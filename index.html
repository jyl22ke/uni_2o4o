<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <link rel="shortcut icon" href="#" type="image/x-icon">
  <link rel="icon" href="#" type="image/x-icon">
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />        
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
  <script  src="http://code.jquery.com/jquery-latest.min.js"></script>
  <script src="http://code.jquery.com/jquery-3.4.1.min.js"></script> 
  <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>      
  <script src="http://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  
  <style type="text/css">

	input, button{font-size: 0.8em; text-align:center; font-weight:bold;}
	input:focus,#ctg:focus{outline: solid red;}
	.dsp {width: 50px; margin: auto;}

	*{margin:0;padding:0px;list-style:none;text-decoration:none;}
	body{font-size:100%;}
	.container{display: flex; flex-direction: column;}
	.canvas {
		background: #e0ebeb;
		display:grid; 
		grid-template-columns: repeat(21,38px);
		margin: 10px;
		background-size:cover; 
		grid-gap: 0px;
		text-align:center;
		}
	.insrt {margin: 10px;height: auto;font-size: 1.0em;}
	#sjtm, .bday {width:65px;} #sj {width:130px;} #tm {width:65px;}
	#sel_dt, .txt {font-size: 0.9em; text-align:center; font-weight:bold;}
	.ifo { font-size: 1.0em; width:798px;}
	.hangun {grid-column: 15/span 7;grid-row: 1/span 1; color: #000; font-weight: bold;border:1px solid black;}
	.hunt {grid-column: 15/span 1;grid-row: span 2; color: #000; font-weight: bold;border:1px solid black;min-height:30px;}
	.hun1 {grid-column: 16/span 1;grid-row: span 2; color: #000; border:1px solid black;min-height:30px; font-size: 1.6em; font-weight: bold; border-right: none; font-family:"한양해서";padding-top: 15px;}
	.hun2 {grid-column: 17/span 2;grid-row: span 2; color: #000; border:1px solid black;min-height:30px; font-size: 14px; border-left: none; text-align:left;}
	.hun3 {grid-column: 19/span 3;grid-row: span 2; color: #000; border:1px solid black;min-height:30px; font-size: 0.8em; border-left: none; text-align:left;}
	.sjt {grid-column: 1/span 2;grid-row: 2/span 5; color: #000; font-weight: bold;border:1px solid black; display: flex; flex-direction: column;}
	.sjat,.sjbt {grid-column: 1/span 2;grid-row: span 1; color: #000; font-weight: bold;border:1px solid black;min-height:30px;}
	.sjct {grid-column: 1/span 2;grid-row: span 1; color: #000; font-weight: bold;border:1px solid black;min-height:30px; font-size: 0.6em;}
	.hun {grid-column: 15/span 1;grid-row: span 1; color: #000; font-weight: bold;border:1px solid black;min-height:30px;}
	.huna {grid-column: 16/span 3;grid-row: span 1; color: #000; border:1px solid black;min-height:30px; font-size: 0.8em; border-left: none; text-align:left;}
	.hunb {grid-column: 19/span 3;grid-row: span 1; color: #000; border:1px solid black;min-height:30px; font-size: 0.8em; border-left: none; text-align:left;}
	.sjo,.sjot {grid-column: span 3;grid-row: span 1; color: #000; font-weight: bold;border:1px solid black;min-height:30px;}
	.sjut1,.sjut2,.sjut3 {grid-column: span 1;grid-row: span 1; color: #000; font-weight: bold;border:1px solid black;min-height:30px;}
	.sju1 {grid-column: span 1;grid-row: span 1; color: #000; border:1px solid black;min-height:30px; font-size: 1.6em; font-weight: bold; padding-top:30px; border-right: none; font-family:"한양해서";}
	.sju2 {grid-column: span 1;grid-row: span 1; color: #000; border:1px solid black;min-height:30px; font-size: 0.8em; border-left: none;}
	.seu {grid-column: span 2;grid-row: span 1; color: #000; border:1px solid black;min-height:30px; font-size: 0.7em; text-align:left;}
	.mou {grid-column: span 2;grid-row: span 1; color: #000; border:1px solid red;min-height:30px; font-size: 0.7em; text-align:left;}
	.dau {grid-column: span 2;grid-row: span 1; color: #000; border:1px solid blue;min-height:30px; font-size: 0.7em; text-align:left;}
	.sja,.sjb {grid-column: span 3;grid-row: span 1; color: #000; border:1px solid black;min-height:30px; font-size: 0.8em;}
	.sj {grid-column: span 3;grid-row: span 1; color: #000; font-weight: bold;border:1px solid black;height:60px;font-size:3.0em; font-family:"한양해서";}
	.out { display: flex; min-height: 100px; width: 798px; padding: 0 10px;}
	.out1 { display: flex; flex-direction: column; float:left; padding: 0 10px; width: 798px;}
	#output1,#output2,#output3,#output4,#output5 {color: #000; padding:10px;border:1px solid black;text-align:left; font-size: 0.8em;}
	#output1,#output3 { min-height: 400px;}
	#output0,#output2,#output4,#output5 { min-height: 100px;}
	#output0 {color: #000; background: #ffeecc; padding:10px;border:1px solid black;text-align:left; font-size: 0.8em; width:776px;}
	#outputa,#outputb {color: #000; padding:10px;border:1px solid black;text-align:left; font-size: 0.8em; width:776px; min-height: 100px;}
	#output1,#output2,#outputa {background: #ebebe0;}
	#output3,#output4,#output5,#outputb {background: #f2d9f2;}
	.spcs, .spct {font-weight: bold;}
	.spcs:hover, .spct:hover {color:#f00;cursor:pointer;}
	.txca,.txcb,.txcc{display: none;}
	.dum {width:798px; display: block;}

	table{border: 1px solid black; border-collapse: collapse;}
	td{border: 1px solid black;}
	.rdat { width: 400px;}
	.rdat0,.rdat1 {width: 40px; text-align:center;}
	.rdat2 {width: 120px; text-align:center;}
	.rdau0,.rdau1,.rdau2 {width: 65px; text-align:center;}
	.rdat0,.rdau0 {font-weight: bold;}
	#submit, #submit1 {padding: 0; font-weight: bold;}
	#sola {display:none; font-weight: bold; width: 200px;}
	#clear1 {padding: 0;}
	@media screen and (min-width: 800px) {.container{display: block;} .canvas {float: left;} #output0 {width:776px;} #output1 {width:480px;} #output3 {width:560px;} #output2 {width: 300px;} #output4,#output5 {width: 740px;} .out {width: 1040px;}}

  </style>

 </head>
 <body>
<div id="dvCSV">
</div>    

<div class="container">
	<div class="insrt">
		<p class="ifo"> &nbsp; 주민번호(생일): <input type="text" id="sjtm" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /> 생시: <input type="time" id="tm" value="">&nbsp; 사주: <input type="text" id="sj" maxlength="9">&nbsp; 성별: <input type="radio" name="gender" value="남양">남(양) <input type="radio" name="gender" value="여음">여(음) &nbsp;<button id="submit1">제 출</button></p><br/> 
		<p class="ifo"><label for="year02" class="sr-only"> &nbsp; 음력</label> <button id="submit">조 회 </button> &nbsp; <input id="bday" class="bday" type="text" name="bday" min="1881-01-01" max="2050-11-18" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" />
		<label class="btn white active" for="isLeap01">	<input type="radio" name="isLeap" id="isLeap01" value="1" checked=""> 평달</label>
		<label class="btn white" for="isLeap02"><input type="radio" name="isLeap" id="isLeap02" value="0"> 윤달</label>
		<span class="txt"> (1881년 1월 1일 ∼ 2050년 11월 18일)</span> &nbsp;<button id="clear1">지우기</button> <select id="sel_dt" name="sel_dt"></select></p><p class="ifo"> &nbsp; <span id="sola"></span></p>
	</div>
<hr/>
<div class="dum">
	<div class="canvas">
		<div class="sjat">십성(간)</div>
		<div class="sja" id="sj7a"></div>
		<div class="sja" id="sj5a"></div>
		<div class="sja" id="sj3a"></div>
		<div class="sja" id="sj1a"></div>
		<div class="hangun">행운 <input type="date" id="hunDate"></div>
		<div class="sjt">사주</br></br></br><!---->
			<input type ="button" class="dsp" onclick="disp('.sjut1','.sju1','.sju2');" value="대운"></button>
			<input type ="button" class="dsp" onclick="disp('.sjut2','.seu','');" value="연운"></button>
			<input type ="button" class="dsp" onclick="disp('.sjut3','.mou','.dau');" value="월일"></button>
			<input type ="button" class="dsp" onclick="disp('.out','',''); disp('#outputa','#outputb','');" value="output"></button></br>
		</div>
		<div class="sjot">시</div>
		<div class="sjot">일</div>
		<div class="sjot">월</div>
		<div class="sjot">년</div>
		<div class="hunt">대운</div>
		<div class="hun1" id="hunL1"></div>
		<div class="hun2" id="hunL2"></div>
		<div class="hun3" id="hunL3"></div>
		<div class="sj" id="sj7"></div>
		<div class="sj" id="sj5"></div>
		<div class="sj" id="sj3"></div>
		<div class="sj" id="sj1"></div>
		<div class="sjo" id="sjg7"></div>
		<div class="sjo" id="sjg5"></div>
		<div class="sjo" id="sjg3"></div>
		<div class="sjo" id="sjg1"></div>
		<div class="hunt">연운</div>
		<div class="hun1" id="hunY1"></div>
		<div class="hun2" id="hunY2"></div>
		<div class="hun3" id="hunY3"></div>
		<div class="sj" id="sj8"></div>
		<div class="sj" id="sj6"></div>
		<div class="sj" id="sj4"></div>
		<div class="sj" id="sj2"></div>
		<div class="sjo" id="sjg8"></div>
		<div class="sjo" id="sjg6"></div>
		<div class="sjo" id="sjg4"></div>
		<div class="sjo" id="sjg2"></div>
		<div class="hunt">월운</div>
		<div class="hun1" id="hunM1"></div>
		<div class="hun2" id="hunM2"></div>
		<div class="hun3" id="hunM3"></div>
		<div class="sjat">십성(지)</div>
		<div class="sja" id="sj8a"></div>
		<div class="sja" id="sj6a"></div>
		<div class="sja" id="sj4a"></div>
		<div class="sja" id="sj2a"></div>
		<div class="sjbt">지장간</div>
		<div class="sjb" id="sj8b"></div>
		<div class="sjb" id="sj6b"></div>
		<div class="sjb" id="sj4b"></div>
		<div class="sjb" id="sj2b"></div>
		<div class="hunt">일운</div>
		<div class="hun1" id="hunD1"></div>
		<div class="hun2" id="hunD2"></div>
		<div class="hun3" id="hunD3"></div>
		<div class="sjbt">십이운성</div>
		<div class="sjb" id="sj8c"></div>
		<div class="sjb" id="sj6c"></div>
		<div class="sjb" id="sj4c"></div>
		<div class="sjb" id="sj2c"></div>
		<div class="sjbt sjex">신살</div>
		<div class="sjb sjex" id="ssal4"></div>
		<div class="sjb sjex" id="ssal3"></div>
		<div class="sjb sjex" id="ssal2"></div>
		<div class="sjb sjex" id="ssal1"></div>
		<div class="hun sjex">원국 &nbsp; / &nbsp; 행운</div>
		<div class="huna sjex" id="ssal0"></div>
		<div class="hunb sjex" id="ssalb"></div>
		<div class="sjut1">대운</div>
		<div class="sju1" id="sjua10"></div>
		<div class="sju2" id="sjub10"></div>
		<div class="sju1" id="sjua9"></div>
		<div class="sju2" id="sjub9"></div>
		<div class="sju1" id="sjua8"></div>
		<div class="sju2" id="sjub8"></div>
		<div class="sju1" id="sjua7"></div>
		<div class="sju2" id="sjub7"></div>
		<div class="sju1" id="sjua6"></div>
		<div class="sju2" id="sjub6"></div>
		<div class="sju1" id="sjua5"></div>
		<div class="sju2" id="sjub5"></div>
		<div class="sju1" id="sjua4"></div>
		<div class="sju2" id="sjub4"></div>
		<div class="sju1" id="sjua3"></div>
		<div class="sju2" id="sjub3"></div>
		<div class="sju1" id="sjua2"></div>
		<div class="sju2" id="sjub2"></div>
		<div class="sju1" id="sjua1"></div>
		<div class="sju2" id="sjub1"></div>
		<div class="sjut2">연운</div>
		<div class="seu" id="seu10"></div>
		<div class="seu" id="seu9"></div>
		<div class="seu" id="seu8"></div>
		<div class="seu" id="seu7"></div>
		<div class="seu" id="seu6"></div>
		<div class="seu" id="seu5"></div>
		<div class="seu" id="seu4"></div>
		<div class="seu" id="seu3"></div>
		<div class="seu" id="seu2"></div>
		<div class="seu" id="seu1"></div>		
		<div class="sjut3">월운 일운</div>
		<div class="mou" id="mou3"></div>
		<div class="mou" id="mou2"></div>
		<div class="mou" id="mou1"></div>
		<div class="dau" id="dau7"></div>
		<div class="dau" id="dau6"></div>
		<div class="dau" id="dau5"></div>
		<div class="dau" id="dau4"></div>
		<div class="dau" id="dau3"></div>
		<div class="dau" id="dau2"></div>
		<div class="dau" id="dau1"></div>		
	</div>
	<div class="out1">
		<div id="output0"></div>
		<div id="outputa"></div>
		<div id="outputb"></div>
	</div>
</div>
	<div class="out">
		<div id="output1"></div>
		<div id="output3"></div>
	</div>
	<div class="out">
		<div id="output2"></div>
		<div class="out2">
			<div id="output4"></div>
			<div id="output5"> </div>
		</div>
	</div>
</div>

<script type="text/javascript">
/* Date() 함수에서 날짜 형식 출력 하는 방법 (함수)
자바스크립트에서 Date() 날짜 함수를 이용해서 특정 형식으로 년, 월, 일, 시간 등을 출력 할때 출력 format 함수가 없어서 고생하는 경우가 많다.
그래서 함수로 만들어서 사용하면 편리하다
*/

Date.prototype.format = function (f) {
    if (!this.valueOf()) return " ";
    let weekKorName = ["일요일", "월요일", "화요일", "수요일", "목요일", "금요일", "토요일"];
    let weekKorShortName = ["일", "월", "화", "수", "목", "금", "토"];
    let weekEngName = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    let weekEngShortName = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
    let d = this;

    return f.replace(/(yyyy|yy|MM|dd|KS|KL|ES|EL|HH|hh|mm|ss|a\/p)/gi, function ($1) {
        switch ($1) {
            case "yyyy": return d.getFullYear(); // 년 (4자리)
            case "yy": return (d.getFullYear() % 1000).zf(2); // 년 (2자리)
            case "MM": return (d.getMonth() + 1).zf(2); // 월 (2자리)
            case "dd": return d.getDate().zf(2); // 일 (2자리)
            case "KS": return weekKorShortName[d.getDay()]; // 요일 (짧은 한글)
            case "KL": return weekKorName[d.getDay()]; // 요일 (긴 한글)
            case "ES": return weekEngShortName[d.getDay()]; // 요일 (짧은 영어)
            case "EL": return weekEngName[d.getDay()]; // 요일 (긴 영어)
            case "HH": return d.getHours().zf(2); // 시간 (24시간 기준, 2자리)
            case "hh": return ((h = d.getHours() % 12) ? h : 12).zf(2); // 시간 (12시간 기준, 2자리)
            case "mm": return d.getMinutes().zf(2); // 분 (2자리)
            case "ss": return d.getSeconds().zf(2); // 초 (2자리)
            case "a/p": return d.getHours() < 12 ? "오전" : "오후"; // 오전/오후 구분
            default: return $1;
        };
    });
};

String.prototype.string = function (len) { let s = '', i = 0; while (i++ < len) { s += this; } return s; };
String.prototype.zf = function (len) { return "0".string(len - this.length) + this; };
Number.prototype.zf = function (len) { return this.toString().zf(len); };
	
//--- 사용법은    dd.format('yyyy-MM-dd HH:mm') ===> 결과:  '2021-10-15 15:28'
</script>

<script type="text/javascript">

fread("ca01_actss");	
fread("ca02_actgdbad");	
fread("ca03_hunresult");	
fread("ca03a_unse");	
fread("ca04_kstadj");	
fread("ca05_sijitime");	
fread("ca06_mjsjfind");	
fread("ca07_tjsjfind");	
fread("ca08_monthstart");	
fread("ca09r_yjsjfind");	
fread("ca10a_ghabch");	
fread("ca10b_ghabch");	
fread("ca11_lunar_cal");	
fread("ca12_jhabch");	
fread("cgh01_sibsng_simri6chin");	
fread("cgh02_dhap_simrihealth");	
fread("gan");	
fread("ganji_habchung");	
fread("jiji");	
fread("sibsungX1");	
fread("unsung");	
fread("spec_6hab");	
fread("spec_jjchng");	
fread("spec_jjhyung");	
fread("spec_djhae");	
fread("spec_banghab");	
fread("spec_samhab");	
fread("jjref");	
fread("hc_listg");	
fread("testg");	
fread("a_gan");	
fread("a_jiji");	
fread("a_ssng");	
fread("a_unsng");	
fread("a_ilju");	
fread("sinsal_list1");	
fread("sinsal_list2");	
fread("sinsal_gen");	
	
function fread(fn){
    $(function (){
	let fileName = "./" + fn + ".csv";	// 파일 이름

	$.ajax({
		url:fileName,
		dataType:'text',
		success: function(da) {
			let textLine = '<script type="text/javascript">let ' + fn + '=[';
                        let rows = da.split('\n');
                        for (let i = 0; i < rows.length; i++) {
				if (i == 0){textLine += '['}else{textLine += ',['};
				let cells = rows[i].split(',');
                                for (let j = 0; j < cells.length; j++) {
					textLine += '"';
					textLine += cells[j].trim();;
					if (j == cells.length-1){textLine += '"'}else{textLine += '",'};
				}
				textLine += ']';
			}	
			textLine += ']';			
			$('#dvCSV').append(textLine);
		}
	});
    });
};

</script>	 

<script type="text/javascript">
	let gj_nfo = new Array; let hgj_nfo = new Array; let hun_list = new Array; let ganhc_nfo = new Array; let jjhc_nfo = new Array; let saju = ""; let saju_h = ""; let symdt = ""; let gendr = ""; 
	let now = null; let hunD = null; let longungj = ""; let ohtx = ""; let nfo_tugan = ""; let code1 = ""; let hnj = ""; let desc = ""; let sj_list = new Array; let sjtx = ""; let sinsal_nfo = new Array;
	let sj_yg = ""; let sj_mg = ""; let sj_dg = ""; let sj_tg = ""; let sj_yj = ""; let sj_mj = ""; let sj_dj = ""; let sj_tj = "";  //--- 사주 (년월일시)간지
	let hn_lg = ""; let hn_yg = ""; let hn_mg = ""; let hn_dg = ""; 	let hn_lj = ""; let hn_yj = ""; let hn_mj = ""; let hn_dj = ""; let hn_ganji = "";  //--- 행운 (대세월일)운 간지

	disp(".sjut1",".sju1",".sju2"); disp(".sjut2",".seu",".out"); disp(".sjut3",".mou",".dau"); disp("#outputa","#outputb","");
	now = new Date();  //---- 현재시간

//=========== 음력 조회 함수 ===========
$( function() {
	$( 'button#submit' ).click( function() {
		let ad2 = ""; let devd = null;
		ad2 = "1881-01-29"; devd = new Date(ad2);  //---- 초기 시작일(전일,양력)
		$('#sola').empty();
		bdat = document.getElementById('bday').value;
		if (bdat.substr(0,2)>now.format('yyyy-MM-dd').substr(2,2)){
			Lbday = new Date("19" + bdat.substr(0,2), bdat.substr(2,2)-1, bdat.substr(4,2)).format('yyyy-MM-dd');
		}else{
			Lbday = new Date("20" + bdat.substr(0,2), bdat.substr(2,2)-1, bdat.substr(4,2)).format('yyyy-MM-dd');
		};
		mtyp = $('input[name="isLeap"]:checked').val();
		subj = Lbday.substr(0,4); temp = ca11_lunar_cal.filter(isFind);
		v = Number(Lbday.substr(5,2));  //---- 월(음력)
			cnt = Number(temp[0][1]);   //---- 누적일수
		n = 0; m = 1;
		while (m < v){
			if (temp[0][n+2]>"2")	{
				cnt += 26 + Number(temp[0][n+2]);
			}else{
				if (temp[0][n+2]>"0")	{
					cnt += 28 + Number(temp[0][n+2]);
					m += 1;
				};
			};
			n += 1;
		};
		if (mtyp === "0"){
			if (temp[0][v+2]>"2"){
				cnt += 28 + Number(temp[0][v+1]);
			}else{	document.getElementById("sola").innerText += " 평달입니다. ";};
		};
		cnt += Number(Lbday.substr(8,2));
		birt = new Date(devd.setDate(devd.getDate() + cnt));
		Sbday = birt.format('yyyy-MM-dd');
		$("#sola").show();
		document.getElementById("sola").innerText += "음력 " + Lbday + "의 양력 날짜는 " + Sbday; 
		$('input#bday').val('');
	});
});

//=========== 양력을 음력으로 변환 함수 ===========
function slr2lnr(birth0){
	let ad2 = ""; let devd = null;
	ad2 = "1881-01-29 23:59"; devd = new Date(ad2);  //---- 초기 시작일(전일,양력)
	cnt = Math.ceil((birth0.getTime()-devd.getTime()+180000)/86400000);
	for (i=0; i<ca11_lunar_cal.length; i++){
		if (ca11_lunar_cal[i][1] > cnt){
			yn = ca11_lunar_cal[i-1][0];
			subj = yn;
			temp1 = ca11_lunar_cal.filter(isFind);
			break;
		};
	};
	cnt = cnt - temp1[0][1]; n = 2; m = 1;
	while (cnt > 30){
		if (temp1[0][n] > "2"){
			cnt = cnt - (26 + Number(temp1[0][n]));
			n += 1;
		}else{
			if (temp1[0][n] > "0"){
				cnt = cnt - (28 + Number(temp1[0][n]));
				n += 1;
				m += 1;
			};
		};
	};
	if (temp1[0][n] > "2"){
		if (cnt > 26 + Number(temp1[0][n])){
			cnt = cnt - (26 + Number(temp1[0][n]));
			mn = String(m).padStart(2,"0");
			dn = String(cnt).padStart(2,"0");
		}else{
			m -= 1;
			mn = String(m).padStart(2,"0") + "윤";
			dn = String(cnt).padStart(2,"0");
		};
	}else{
		if (temp1[0][n] > "0"){
			if (cnt > 28 + Number(temp1[0][n])){
				cnt = cnt - (26 + Number(temp1[0][n]));
				m += 1;
				mn = String(m).padStart(2,"0");
				dn = String(cnt).padStart(2,"0");
			}else{
				mn = String(m).padStart(2,"0");
				dn = String(cnt).padStart(2,"0");
			};
		};
	};	
	lnrd = yn + "-" + mn + "-" + dn;
};

//========= 화면 지우기 ========
$( function() {
	$('button#clear1').click( function() {
		location.reload();
	});
});

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//======= 생년월일 변경시 ======
$("#sjtm").change(function(){
	$('input#tm').val('');
});

//=== 제출버튼 클릭시 실행되는 함수
$( function() {
	$( 'button#submit1' ).click( function() {
		$('select#sel_dt').empty(); sjtx = ""; cssn = 1;
		sjmain(); 
	});
});

//=========== 사주 입력시 실행되는 main 함수 ===========
function sjmain(){
		//------------------ 변수값 clear RESET start -------------------
		sj_yg = ""; sj_mg = ""; sj_dg = ""; sj_tg = "";  //--- 사주 (년월일시)간
		sj_yj = ""; sj_mj = ""; sj_dj = ""; sj_tj = "";  //--- 사주 (년월일시)지
		birth = ""; birth0 = null; birth1 = null; sj_list = []; 
		
		$('input#bday').val('');
		$('#sola').empty();
		$("#sola").hide();
		$('#output0').empty();
		$('#output1').empty();
		$('#output2').empty();
		$('#output3').empty();
		$('#output4').empty();
		$('#output5').empty();
		$('#outputa').empty();
		$('#outputb').empty();
		$('#ssal0').empty();
		$('#ssalb').empty();
		$('.huna').empty();
		$('.hunb').empty();
		$('.sj').empty();
		$('.sja').empty();
		$('.sjb').empty();
		$('.sjo').empty();
		$('.sju1').empty();
		$('.sju2').empty();
		$('.seu').empty();
		$('.mou').empty();
		$('.dau').empty();
		$('.hun1').empty();
		$('.hun2').empty();
		$('.hun3').empty();
		chg_bgcolor('.sj','#fff','#fff');
		
		ganhc_nfo = [
		["위치","gan","월-합오행","원국1","원국2","원국3","대운","연운","월운","일운","시운"],
		["연간","","","","","","","","","",""],
		["월간","","","","","","","","","",""],
		["일간","","","","","","","","","",""],
		["시간","","","","","","","","","",""]];

		jjhc_nfo = [
		["위치","jiji","합충형해파","원국1","원국2","원국3","대운","연운","월운","일운","시운"],
		["연지","","","","","","","","","",""],
		["월지","","","","","","","","","",""],
		["일지","","","","","","","","","",""],
		["시지","","","","","","","","","",""]];

		sinsal_nfo = [
		["기준","ganji","연지","월지","일지","시지","대운","연운","월운","일운","시운"],
		["연간","","","","","","","","","",""],
		["월간","","","","","","","","","",""],
		["일간","","","","","","","","","",""],
		["시간","","","","","","","","","",""],
		["연지","","","","","","","","","",""],
		["월지","","","","","","","","","",""],
		["일지","","","","","","","","","",""],
		["시지","","","","","","","","","",""]];

		gj_nfo = [
		["위치","gan","g오행","g십성","통근","jiji","j오행","j십성","운성","장간1","장간2","장간3","1십성","2십성","3십성","비고"],
		["연주","","","","","","","","","","","","","","",""],["월주","","","","","","","","","","","","","","",""],["일주","","","","","","","","","","","","","","",""],["시주","","","","","","","","","","","","","","",""]];

		hgj_nfo = [
		["위치","gan","g오행","g십성","통근","jiji","j오행","j십성","운성","장간1","장간2","장간3","1십성","2십성","3십성","비고"],
		["대운","","","","","","","","","","","","","","",""],["연운","","","","","","","","","","","","","","",""],["월운","","","","","","","","","","","","","","",""],["일운","","","","","","","","","","","","","","",""],
		["시운","","","","","","","","","","","","","","",""]];

		hun_list = [
		["위치","gan","g오행","g십성","통근","jiji","j오행","j십성","운성","장간1","장간2","장간3","1십성","2십성","3십성","대운일"],
		["초대운","","","","","","","","","","","","","","",""],["2대운","","","","","","","","","","","","","","",""],["3대운","","","","","","","","","","","","","","",""],["4대운","","","","","","","","","","","","","","",""],
		["5대운","","","","","","","","","","","","","","",""],["6대운","","","","","","","","","","","","","","",""],["7대운","","","","","","","","","","","","","","",""],["8대운","","","","","","","","","","","","","","",""],
		["9대운","","","","","","","","","","","","","","",""],["10대운","","","","","","","","","","","","","","",""],["11대운","","","","","","","","","","","","","","",""],["12대운","","","","","","","","","","","","","","",""],
		["13대운","","","","","","","","","","","","","","",""],["14대운","","","","","","","","","","","","","","",""]];
		
		now = new Date();
		let tomorrow = new Date(now.setDate(now.getDate() + 1));
		document.getElementById("hunDate").value = tomorrow.format('yyyy-MM-dd');  //--- 행운일자를 내일로 설정(initial)
		saju_h = document.getElementById('sj').value;  //--- 직접 입력한 한글사주
		sjdat = document.getElementById('sjtm').value;  //--- 직접 입력한 생년월일(text)
		sjtim = document.getElementById('tm').value;  //--- 직접 입력한 생시(text)
		gendr = $('input[name="gender"]:checked').val();  //--- 성별
		hunD = document.getElementById('hunDate').value;  //--- 보려는 행운일자(text)
		if (sjdat != ""){
			if (sjtim == ""){ sjtx = "x"; sjtim = "06:00";};
			if (sjdat.substr(0,2)>now.format('yyyy-MM-dd').substr(2,2)){
				symdt = new Date("19" + sjdat.substr(0,2), sjdat.substr(2,2)-1, sjdat.substr(4,2), sjtim.substr(0,2), sjtim.substr(3,2)).format('yyyy-MM-dd HH:mm');
			}else{
				symdt = new Date("20" + sjdat.substr(0,2), sjdat.substr(2,2)-1, sjdat.substr(4,2), sjtim.substr(0,2), sjtim.substr(3,2)).format('yyyy-MM-dd HH:mm');
			};
			convrtsj(symdt);
			if (sjtx=="x"){tsj7 = ""; tsj8 = "";};
			saju = tsj1 + tsj2 + tsj3 + tsj4 + tsj5 + tsj6 + tsj7 + tsj8;
			birth = rqD; birth0 = rqD0; birth1 = rqD1;
		}else{
			saju_chk();
			saju = saju_h;
		};

		subj = saju.substr(0,1); temp = gan.filter(isFindj); sj_yg = temp[0][0]; gj_nfo[1][1] = sj_yg; sinsal_nfo[1][1] = sj_yg;
		subj = saju.substr(1,1); temp = jiji.filter(isFindj); sj_yj = temp[0][0]; gj_nfo[1][5] = sj_yj; sinsal_nfo[5][1] = sj_yj;
		subj = saju.substr(2,1); temp = gan.filter(isFindj); sj_mg = temp[0][0]; gj_nfo[2][1] = sj_mg; sinsal_nfo[2][1] = sj_mg;
		subj = saju.substr(3,1); temp = jiji.filter(isFindj); sj_mj = temp[0][0]; gj_nfo[2][5] = sj_mj; sinsal_nfo[6][1] = sj_mj;
		subj = saju.substr(4,1); temp = gan.filter(isFindj); sj_dg = temp[0][0]; gj_nfo[3][1] = sj_dg; sinsal_nfo[3][1] = sj_dg;
		subj = saju.substr(5,1); temp = jiji.filter(isFindj); sj_dj = temp[0][0]; gj_nfo[3][5] = sj_dj; sinsal_nfo[7][1] = sj_dj;
		if (sjtx != "x"){
			subj = saju.substr(6,1); temp = gan.filter(isFindj); sj_tg = temp[0][0]; gj_nfo[4][1] = sj_tg; sinsal_nfo[4][1] = sj_tg;
			subj = saju.substr(7,1); temp = jiji.filter(isFindj); sj_tj = temp[0][0]; gj_nfo[4][5] = sj_tj; sinsal_nfo[8][1] = sj_tj;
		};
		mktable(1,sj_yg,sj_yj,gj_nfo);
		mktable(2,sj_mg,sj_mj,gj_nfo);
		mktable(3,sj_dg,sj_dj,gj_nfo);
		if (sjtx != "x"){ mktable(4,sj_tg,sj_tj,gj_nfo);};
		ganhc_nfo[1][1] = sj_yg; ganhc_nfo[2][1] = sj_mg; ganhc_nfo[3][1] = sj_dg; ganhc_nfo[4][1] = sj_tg; 
		ganhc_nfo[1][2] = ""; ganhc_nfo[2][2] = gj_nfo[2][6].substr(1,1); subj = sj_dg; temp = cgh02_dhap_simrihealth.filter(isFind); ganhc_nfo[3][2] = temp[0][2]; ganhc_nfo[4][2] = ""; 

		longun();
		seun();
 		moun();
		dayun();
		fill_saju();
		ganji_root();
		tugan();
		rootgchk();
		mpohcnt();
  		wongug();
		sinsal();
		spclcarac();
		hangun();
};

//====== 시간(년월일시)을 사주로 변환하는 함수 ==========
function convrtsj(reqD){
	tsj1 = ""; tsj2 = ""; tsj3 = ""; tsj4 = ""; tsj5 = ""; tsj6 = ""; tsj7 = ""; tsj8 = "";
	
	rqD = ""; yrstart = ""; cor_t = ""; cor_d = 0; crh = 0; temp = []; temp1 = [];
	//--- 표준시/써머타임 (ca04_kstadj.csv) 시간 보정 ----------------------
	rqD0 = new Date(reqD.substr(0,16));  //--- 입력시간(date)
	for (i=1; i<ca04_kstadj.length; i++){
		if (reqD >= ca04_kstadj[i][0] && reqD <= ca04_kstadj[i][1]){
			crh = Number(ca04_kstadj[i][4]) * 1800000;  //--- 시간보정 수
		};
	};
	rqD1 = new Date(rqD0.getTime() - crh);  //--- 보정된 시간(date): 서울표준시
	rqD = rqD1.format('yyyy-MM-dd HH:mm');  //--- 보정시간(text)
	//--- 시지(sj_tj) 확인 ----------------------	
	rqD_t = rqD1.format('HH:mm');
	for ( i=1 ; i < ca05_sijitime.length ; i++ ){
		if (ca05_sijitime[i][0] <= rqD_t && ca05_sijitime[i][1] >= rqD_t){
			tsj8 = ca05_sijitime[i][2];  //--- 시지 (sj_tj)
			cor_t = String(Number(ca05_sijitime[i][3]) % 12);  //--- 시지 수 (시간 결정에 사용)
			cor_d = parseInt(Number(ca05_sijitime[i][3]) / 12);  //--- 일주 수 (일주 보정에 사용)
		};
	};
	//--- 일간(sj_dg) 확인 ----------------------
	ix = (Math.floor((rqD1.getTime() + 30600000 + crh) / 86400000) + 600077 + cor_d) % 10 + 1;
	tsj5 = ca09r_yjsjfind[1][ix];  //--- 일간 (sj_dg)
	//--- 시주 배열 만들기 / 시간(sj_tg) 확인 ---
	ttit = ca07_tjsjfind.slice(0, 1);  //---시주배열 이름 (첫줄) 가져오기
	subj = tsj5; tgtmp = ca07_tjsjfind.filter(isFind);  //---시주(일간 기준)
	tgtmp.unshift(ttit[0]);  //---시주배열 + 이름 추가
	for (i=1; i<tgtmp[0].length; i++){
		if (tgtmp[0][i] === cor_t){
			tsj7 = tgtmp[1][i].substr(0,1);   //--- 시간 (sj_tg)
		};
	};
	//--- 일지(sj_dj) 확인 ----------------------
	ix = (Math.floor((rqD1.getTime() + 30600000 + crh) / 86400000) + 600077 + cor_d) % 12 + 1;
	tsj6 = ca09r_yjsjfind[2][ix];  //--- 일지 (sj_dj)
	//--- 월지(sj_mj) 확인 ----------------------
	for ( i=1 ; i < ca08_monthstart.length ; i++ ){
		if (ca08_monthstart[i][5] <= rqD && ca08_monthstart[i+1][5] > rqD){
			premon = new Date(ca08_monthstart[i][5].substr(0,16));  //--- 이전절기 (대운수 계산시 사용)
			postmon = new Date(ca08_monthstart[i+1][5].substr(0,16));  //--- 다음절기 (대운수 계산시 사용)
			tsj4 = ca08_monthstart[i][2];  //--- 월지 (sj_mj)
			term = Number(ca08_monthstart[i][6]);  //--- 월 일수 (기간) 대운수 계산시 사용
		};
		if (ca08_monthstart[i][3] === '입춘' && ca08_monthstart[i][5].substr(0,4) === rqD1.format('yyyy')){
			yrstart = ca08_monthstart[i][5];  //--- 년 시작점(입춘) 년주 계산시 사용---입력시간(text)
		};
	};
	//--- 년간(sj_yg) 확인 ----------------------
	if (rqD < yrstart){ crnoy = 5 }else{ crnoy = 4 };  //--- 년도 보정수 (입춘이전 전년 년주 사용)
	ix = (rqD1.getFullYear() - crnoy) % 10 + 1;
	tsj1 = ca09r_yjsjfind[1][ix];  //--- 년간 (sj_yg)
	//--- 년지(sj_yj) 확인 ----------------------
	ix = (rqD1.getFullYear() - crnoy ) % 12 + 1;
	tsj2 = ca09r_yjsjfind[2][ix];  //--- 년지 (sj_yj)
	//--- 월주 배열 만들기 ----------------------
	ytit = ca06_mjsjfind.slice(1, 2);  //---월주배열 이름 (둘째줄) 가져오기
	subj = tsj1; ygtmp = ca06_mjsjfind.filter(isFind);  //---월주(년간 기준)
	ygtmp.unshift(ytit[0]);  //---월주배열 + 이름 추가
	idx = ygtmp[0].lastIndexOf(tsj4);
	tsj3 = ygtmp[1][idx].substr(0,1);  //--- 월간 (sj_mg)
};
	
//======= 사주 월간/시간 오류 check =======	
function saju_chk(){
	ya = saju_h.substr(0,1);yb = saju_h.substr(1,1);
	ma = saju_h.substr(2,1);mb = saju_h.substr(3,1);
	da = saju_h.substr(4,1);db = saju_h.substr(5,1);
	ta = saju_h.substr(6,1);tb = saju_h.substr(7,1);

	a = ca09r_yjsjfind[1].indexOf(ya);b = ca09r_yjsjfind[2].indexOf(yb);
	c = ca09r_yjsjfind[1].indexOf(ma);d = ca09r_yjsjfind[2].indexOf(mb);
	e = ca09r_yjsjfind[1].indexOf(da);f = ca09r_yjsjfind[2].indexOf(db);
	g = ca09r_yjsjfind[1].indexOf(ta);h = ca09r_yjsjfind[2].indexOf(tb);
	if (a >= b){ny = (a - b) * 6 + b;}else{ny = (10 + a - b) * 6 + b;}; //--- 년간/년지(a/b) 순번(ny)
	if (c >= d){nm = (c - d) * 6 + d;}else{nm = (10 + c - d) * 6 + d;}; //--- 월간/월지(c/d) 순번(nm)
	if (e >= f){nd = (e - f) * 6 + f;}else{nd = (10 + e - f) * 6 + f;}; //--- 일간/일지(e/f) 순번(nd)
	if (g >= h){nt = (g - h) * 6 + h;}else{nt = (10 + g - h) * 6 + h;}; //--- 시간/시지(g/h) 순번(nt)
	if (a > 5) {a = a - 5};
	if (d < 3){nma = a * 12 + d; }else{nma = (a - 1) * 12 + d; };
	if (nma > 60) {nma = nma - 60};
	if (e > 5) {e = e - 5};
	nta = (e - 1) * 12 + h;
	if (nta > 60){	nta = nta - 60;};	
	if (nm != nma || nt != nta){
		document.getElementById("output2").innerText += "생년월일 check : 사주가 맞지 않습니다.. " + saju_h + " \n";
	}else{
		mo = (nm + 11) % 12; if (mo == 0){mo = 12;}; //---- 월
		yr = ny + 1863; //---- 년도
		let year = now.getFullYear();	// 연도
		bsd = 117763200000; //--- 기준 갑자일(1908-01-10) = -1955836800000 + 2073600000000 = 117763200000 
		while (yr <= year){
			subj = yr; subj1 = mb;  //--- 년도, 월지를 이용하여 검색
			ns = ca08_monthstart.findIndex(isFindm); //---- mb월(양력) 시작일 확인 (index)
			if (ns != -1){
				startdate = new Date(ca08_monthstart[ns][5].substr(0,10)); //---- mb월(양력) 시작일
				enddate = new Date(ca08_monthstart[ns+1][5].substr(0,10)); //---- mb월(양력) 종료일
				sd = startdate.getTime() + 2073600000000; //--- 월 시작일(sd)
				co_s = Math.ceil(((sd - bsd)/86400000) % 60);  //--- 월 시작일의 60갑자 순번
				bs = parseInt(((sd - bsd)/86400000) / 60);
				bsd = bsd + bs * 5184000000;
				ed = enddate.getTime() + 2073600000000; //--- 월 종료일(ed)
				co_e = Math.ceil(((ed - bsd)/86400000) % 60);  //--- 월 종료일의 60갑자 순번
				if ((co_s < co_e && co_s <= nd && nd < co_e) || (co_s > co_e && (co_s <= nd || nd < co_e))){
						if (nd > co_s){	
						birth1 = new Date(startdate.setDate(startdate.getDate() + nd - co_s - 1));
						}else{
						birth1 = new Date(startdate.setDate(startdate.getDate() + nd + 60 - co_s - 1));
					};
					birth1.setTime(birth1.getTime() - 30600000);  //--- 시간 보정 (08:30)
					hrs = Number(ca09r_yjsjfind[3][h]);
					birth1.setHours(birth1.getHours() + hrs);  //--- 시간 입력(시지)
					birth1 = new Date(birth1); 
					for (i=1; i<ca04_kstadj.length; i++){
						crh = Number(ca04_kstadj[i][4]) * 1800000; 
						if ((new Date(ca04_kstadj[i][0]) - birth1) <= crh && (new Date(ca04_kstadj[i][1]) - birth1) >= crh){
							birth0 = new Date(birth1.getTime() + crh);
						};
					};
					birth = birth1.format('yyyy-MM-dd HH:mm');  //--- 입력시간(text)
					symdt = birth0.format('yyyy-MM-ddTHH:mm');  //--- 입력시간(text)
					premon = new Date(ca08_monthstart[ns][5].substr(0,16));  //--- 이전절기 (대운수 계산시 사용)
					postmon = new Date(ca08_monthstart[ns+1][5].substr(0,16));  //--- 다음절기 (대운수 계산시 사용)
					term = Number(ca08_monthstart[ns][6]);  //--- 월 일수 (기간) 대운수 계산시 사용
					document.getElementById("output2").innerText += "생년월일 : " + symdt + " (" + (year-yr+1) + "세) \n";
					sj_list.push(symdt);
				};
			};
			yr = yr + 60; //---- 년도 확인
		};
		if (sj_list.length >1){
			document.getElementById("output2").innerText += "---------------------- 생년월일 번호선택 ---- \n";
			$("#sel_dt").append('<option value="">생일선택</option>');
			sj_list.forEach((item)=>{$("#sel_dt").append('<option value="' + item + '">' + item + '</option>');});
		}
	};
};

//========= 같은사주의 날자가 2개 이상인 경우 하나를 선택 =========
$(function(){
	$('#sel_dt').change(function(){
		symdt = $("#sel_dt option:selected").val(); // 선택된 날자를 출력한다.  
		$('#sjtm').val(symdt.substr(2,2) + symdt.substr(5,2) + symdt.substr(8,2));
		$('#tm').val(symdt.substr(11,5));
		sjmain();
	});
});

//========= 간지 배경색 =========
function chg_bgcolor(a,b,c) {
	$(a).css("background","linear-gradient(145deg," + b + ", 45%," + c + " 55%)");
}

//=========== 데이터 보이기 / 숨기기 =======	
function disp(a,b,c){
	if ($(a).css('display') == 'none'){	$(a).show();}else{$(a).hide();	};
	if (b != ""){if($(b).css('display') == 'none'){$(b).show();}else{$(b).hide();};};
	if (c != ""){if($(c).css('display') == 'none'){$(c).show();}else{$(c).hide();};};
};
	
//====== 배열에서 subj 를 가져오는 함수 ====== 부분배열 가져오기
function isFind(element)  {
	if(element[0] === subj)  {
		return true;
	};
};

//====== 십성배열에서 subj (지지) 를 가져오는 함수 ====== 부분배열 가져오기
function isFindj(element)  {
	if (element[1].includes(subj)) {
		return true;
	};
};

//====== 배열에서 subj 유사문자열 가져오는 함수 ====== 부분배열 가져오기
function isFindm(element)  {
	if(element[0].includes(subj) && element[2] == subj1)  {
		return true;
	};
};

//====== 배열에서 subj 를 가져오는 함수 ====== 부분배열 가져오기
function isFindx(element)  {
	if (element[0].includes(subj)) {
		return true;
	};
};

//--- 십성 긍부정심리/육친 검색 함수
//--- ss_simri("정재",cgh01_sibsng_simri6chin,1)    --- 1:긍정, 2:부정, 0:육친
function ss_simri(ss,arr,sel){
	subj = ss; temp = arr.filter(isFind); 
	if (sel == 0){
		if (gendr == "남양"){ rslt = temp[0][3];}else{ rslt = temp[0][4];};	
	}else{
		rslt = temp[0][sel];
	};
};

//====== 연지합 ===================
//--- yjhab("output1");
function yjhab(destin){
	document.getElementById(destin).innerText += "■ 연지합--- " + txt + " " + rslt + "--- 일간의 연간 월간십성에 대한 부정심리 \n";
	ss_simri(gj_nfo[1][3],cgh01_sibsng_simri6chin,2); document.getElementById(destin).innerText += "◐ " + gj_nfo[1][3] + "심리( ~19세)--- " + rslt + "\n";  //---연간십성 부정심리
	ss_simri(gj_nfo[2][3],cgh01_sibsng_simri6chin,2); document.getElementById(destin).innerText += "◐ " + gj_nfo[2][3] + "심리(20~38세)--- " + rslt + "\n";  //---월간십성 부정심리
	document.getElementById(destin).innerText += "--------------------------------------------------------------\n";
};
		
//====== 일지합 (1)===================
//--- djhab("output1");
function djhab(destin){
	subj = rslt.substr(0,2); tempj = spec_6hab.filter(isFind);
	document.getElementById(destin).innerText += "■ 일지합--- " + txt + " " + rslt + "\n ◐ 심리적 고조. 오지랖 기운으로 새로운 일을 벌리나 결과는 시원치 않다" + "\n ◐ " + sz + tempj[0][1] + "\n"; 
	if (destin == "output3"){document.getElementById(destin).innerText += "◐ " + tempj[0][2] + "\n"; };
	document.getElementById(destin).innerText += "--------------------------------------------------------------\n";
};
		
//====== 연지충 ===================
//--- yjchng("output1");
function yjchng(destin){
	document.getElementById(destin).innerText += "■ 연지충--- " + txt + " " + rslt + "--- 일간의 연지 월지십성에 대한 부정심리 \n";
	ss_simri(gj_nfo[1][7],cgh01_sibsng_simri6chin,2); document.getElementById(destin).innerText += "◐ " + gj_nfo[1][7] + "심리( ~19세)--- " + rslt + "\n";  //---연지십성 부정심리
	ss_simri(gj_nfo[2][7],cgh01_sibsng_simri6chin,2); document.getElementById(destin).innerText += "◐ " + gj_nfo[2][7] + "심리(20~38세)--- " + rslt + "\n";  //---월지십성 부정심리
	ss_simri(gj_nfo[1][7],cgh01_sibsng_simri6chin,0); document.getElementById(destin).innerText += "◐ 육친(" + rslt + ") 불화(반목) ( ~19세) \n";	//--- 연지십성 육친관계 불화
	ss_simri(gj_nfo[2][7],cgh01_sibsng_simri6chin,0); document.getElementById(destin).innerText += "◐ 육친(" + rslt + ") 불화(반목) (20~38세) \n";  //--- 월지십성 육친관계 불화
	document.getElementById(destin).innerText += "--------------------------------------------------------------\n";
};
		
//====== 일지충 (2)===================
//--- djchng("output1");
function djchng(destin){
	document.getElementById(destin).innerText += "■ 일지충--- " + txt + " " + rslt + "\n";
	subj = rslt.substr(0,2); 
	tempj = spec_jjchng.filter(isFind);
	if (destin == "output3"){
		document.getElementById(destin).innerText += "◐ " + tempj[0][1] + "\n ◐ " + tempj[0][2] + " \n";
		document.getElementById(destin).innerText += "◐ 왕신발 쇠자발--- \n";
		jjg_turb();
	}else{
		document.getElementById(destin).innerText += "◐ " + sz + tempj[0][1] + "\n ◐ " + tempj[0][2] + " \n";
	};
		document.getElementById(destin).innerText += "◐ 원진귀문 있으면--- 이중성격 증후군(잔소리 폭언-술마시면 드러남) \n";
	document.getElementById(destin).innerText += "--------------------------------------------------------------\n";
};

//====== 연지해 ===================
function yjhae(destin){
	document.getElementById(destin).innerText += "■ 연지해--- " + txt + " " + rslt + "일간의 육합대상지지 십성에 대한 부정심리 \n";	  //--- 연지해 -------
	subj = sj_yj; tempj = spec_6hab.filter(isFindx); if (tempj[0][0].substr(0,1) == sj_yj){tgt = tempj[0][0].substr(1,1);}else{tgt = tempj[0][0].substr(0,1);}; sibsng(sj_dg,"",tgt);
	ss_simri(js_titl,cgh01_sibsng_simri6chin,2); document.getElementById(destin).innerText += "◐ " + js_titl + " 부정심리(0~19세)--- " + rslt + "\n";
	subj = sj_mj; tempj = spec_6hab.filter(isFindx); if (tempj[0][0].substr(0,1) == sj_mj){tgt = tempj[0][0].substr(1,1);}else{tgt = tempj[0][0].substr(0,1);}; sibsng(sj_dg,"",tgt);
	ss_simri(js_titl,cgh01_sibsng_simri6chin,2); document.getElementById(destin).innerText += "◐ " + js_titl + " 부정심리(20~38세)--- " + rslt + "\n";
	document.getElementById(destin).innerText += "--------------------------------------------------------------\n";
};

//====== 일지해 (3)===================
//--- djhae(sj_mj,sj_dj,2,"output1"); 또는 djhae(sj_dj,sj_tj,3,"output1");
function djhae(a,b,c,destin){
	document.getElementById(destin).innerText += "■ 일지해--- " + txt + " " + rslt + "--- 일간의 육합대상지지 십성에 흉화 \n ◐ " + sz + " 엉뚱한 일을 발생시켜 뜻하지 않게 다투거나 냉담하게 되는 등 매사를 지연시켜 목전에서 포기하게 만드는 흉살이다. \n";
	if (c == 2){document.getElementById(destin).innerText += " ◐ 형제와 인연이 박함은 물론 배우자가 대체로 쇠약한 편인데 여명의 경우 흉해가 더 심하다. \n";};
	if (c == 3){document.getElementById(destin).innerText += " ◐ 배우자와 자식의 덕이 없을 뿐만 아니라 당주의 노년고독과 질병을 암시 \n";};
	subj = rslt.substr(0,2); tempj = spec_djhae.filter(isFind); document.getElementById(destin).innerText += "◐ 육친에 흉화/병증--- " + tempj[0][1] + "\n";	  //--- 일지해 -------
	subj = a; tempj = spec_6hab.filter(isFindx); if (tempj[0][0].substr(0,1) == a){tgt = tempj[0][0].substr(1,1);}else{tgt = tempj[0][0].substr(0,1);}; sibsng(sj_dg,"",tgt);
	ss_simri(js_titl,cgh01_sibsng_simri6chin,0); document.getElementById(destin).innerText += "◐ 육친(" + rslt + ") 흉화 \n";  //---육합대상지지의 십성육친 흉화
	subj = b; tempj = spec_6hab.filter(isFindx); if (tempj[0][0].substr(0,1) == b){tgt = tempj[0][0].substr(1,1);}else{tgt = tempj[0][0].substr(0,1);}; sibsng(sj_dg,"",tgt);
	ss_simri(js_titl,cgh01_sibsng_simri6chin,0); document.getElementById(destin).innerText += "◐ 육친(" + rslt + ") 흉화 \n";  //---일지 육합대상지지의 십성육친 흉화
	document.getElementById(destin).innerText += "--------------------------------------------------------------\n";
};

//====== 정지 (7)===================
function suspend(destin){
	document.getElementById(destin).innerText += "■ " + rslt0 + " " + txt + " " + rslt + " \n";  //--- 정지 (7)
	document.getElementById(destin).innerText += "--------------------------------------------------------------\n";
};

//====== 합충+해 흉화 (8)===================
//--- hwunghwa(sj_dj,hnj,"output3");
function hwunghwa(a,b,destin){
	document.getElementById(destin).innerText += "■ " + rslt0 + " " + txt + " " + rslt + " \n";  //--- 합충-해흉화 (8)
	subj = rslt.substr(0,2); tempj = spec_djhae.filter(isFind);
	document.getElementById(destin).innerText += "◐ " + sz + tempj[0][1] + "\n";
	document.getElementById(destin).innerText += "--------------------------------------------------------------\n";
};

//====== 연지파 ===================
//--- yjpa("output1");
function yjpa(destin){
	document.getElementById(destin).innerText += "■ 연지파--- " + txt + " " + rslt + "--- 일간의 지지십성에 대한 부정심리 \n";
	ss_simri(gj_nfo[1][7],cgh01_sibsng_simri6chin,2); document.getElementById(destin).innerText += "◐ " + gj_nfo[1][7] + "심리( ~19세)--- " + rslt + "\n";  //---연지십성 부정심리
	ss_simri(gj_nfo[2][7],cgh01_sibsng_simri6chin,2); document.getElementById(destin).innerText += "◐ " + gj_nfo[2][7] + "심리(20~38세)--- " + rslt + "\n";  //---월지십성 부정심리
	document.getElementById(destin).innerText += "--------------------------------------------------------------\n";
};

//====== 일지파 (4)===================
//--- djpa(sj_mj,sj_dj,"output1"); 또는 djpa(sj_dj,sj_tj,"output1");
function djpa(a,b,destin){
	document.getElementById(destin).innerText += "■ 일지파--- " + txt + " " + rslt + "--- 삼합왕지 십성육친에 흉화(암시) 및 동착에 실행 \n ◐ " + sz + " 이탈 파괴 붕괴 분리 절단 반목 대립 파손 파재 이별을 암시하여 매사 장애를 촉발한다. 어떤 일의 중단을 예고하여 새로운 국면으로 전환시키는 역할을 담당하므로 파가 오면 일단 십성육신의 변화는 불가피하다. 파와 연관하는 모든 지지의 삼합 왕지에 변화를 준다.\n";
	subj = a; tempj = spec_samhab.filter(isFindx); tgt = tempj[0][0].substr(1,1); sibsng(sj_dg,"",tgt); 
	ss_simri(js_titl,cgh01_sibsng_simri6chin,0); document.getElementById(destin).innerText += "◐ 육친(" + rslt + ") 흉화 \n";  //--- 일지 삼합왕지 십성육친
	subj = b; tempj = spec_samhab.filter(isFindx); tgt = tempj[0][0].substr(1,1); sibsng(sj_dg,"",tgt); 
	ss_simri(js_titl,cgh01_sibsng_simri6chin,0); document.getElementById(destin).innerText += "◐ 육친(" + rslt + ") 흉화 \n";  //--- 일지 삼합왕지 십성육친
	document.getElementById(destin).innerText += "--------------------------------------------------------------\n";
};

//====== 지지형 구성체크 함수 ======
let ifo = false; let jjh_unsng = ""; let posd = ""; let pose = ""; let hcj = ""; let ttlhc = ""; let ttlh = "";
	//--- 지지형 e (기본)
function johhe_chk(a,destin){
	subj = "0a"; tempj = spec_jjhyung.filter(isFind); 
	document.getElementById(destin).innerText += "■<지지형>--- " + txt + " " + rslt + "\n" + "◐ " + tempj[0][2] + "\n"; 
	document.getElementById(destin).innerText += "◐ 육친의 흉화--- \n"; 
	for (k = 0; k < posd.length; k++){
		if (((k>0) && (rslt.includes("丑") || rslt.includes("戌") || rslt.includes("未"))) || ((k>0) && (rslt.includes("辰") || rslt.includes("午") || rslt.includes("酉") || rslt.includes("亥")))) {
			continue;
		}else{
			if (posd.substr(k,1) < "5"){
				sibsTugsin(gj_nfo[Number(posd.substr(k,1))][7]); subj = hs_titl; tempj = spec_jjhyung.filter(isFind); 
				document.getElementById(destin).innerText += "◎ " + subj + "---" + tempj[0][2] + "\n";
				if (posd.length == 4 && (rslt.includes("辰") || rslt.includes("午") || rslt.includes("酉") || rslt.includes("亥"))){
					sibsTugsin(gj_nfo[3][7]); subj = hs_titl; tempj = spec_jjhyung.filter(isFind); 
					document.getElementById(destin).innerText += "◎ " + subj + "---" + tempj[0][2] + "\n";
				};
			}else{
				sibsTugsin(hgj_nfo[Number(posd.substr(k,1))-4][7]); subj = hs_titl; tempj = spec_jjhyung.filter(isFind); 
				document.getElementById(destin).innerText += "◎ " + subj + "---" + tempj[0][2] + "\n";
			};
		};
	};
	document.getElementById(destin).innerText += "--------------------------------------------------------------\n";
};
	
	//--- 지지형 a (삼형-인사신)
function johha_chk(a,destin){
	let jjh_unsng = "";
	johhe_chk(a,destin); //pose += posd;
	for (k = 0; k < posd.length; k++)	{
		if (posd.substr(k,1) < "5"){
			jjh_unsng += gj_nfo[Number(posd.substr(k,1))][8];
		}else{
			jjh_unsng += gj_nfo[3][8];
			jjh_unsng += hgj_nfo[Number(posd.substr(k,1))-4][8];
		};
	};
	subj = "1a"; tempj = spec_jjhyung.filter(isFind); rslt = rslt_hyng1;
	document.getElementById(destin).innerText += "★★" + rslt + " 삼형--- \n" + "◐ " + tempj[0][2] + "\n"; 
	subj = "1b"; tempj = spec_jjhyung.filter(isFind);
	document.getElementById(destin).innerText += "◐ " + tempj[0][2] + "\n"; 
	if ((pose.includes("12") || pose.includes("21")) && sj_yj != sj_mj){
		document.getElementById(destin).innerText += "◐ 잔머리가 발달하여 홀로 겉도는 가운데 성격이 급하고 조열하여 마찰이 잦고 게다가 지구력이 약하여 자모자패(自謀自敗)의 전형적인 유형이다. 심리 불안정 초년 범죄 악행--- \n"; 
	};
	if ((pose.includes("23") || pose.includes("32")) && sj_mj != sj_dj){
		document.getElementById(destin).innerText += "◐ 부모형제와 마찰이 심한 편으로 해당 시기(20~57세)에 굴곡이 많음을 암시한다. 부모형제와 인연없음--- \n"; 
	};
	if ((pose.includes("34") || pose.includes("43")) && sj_dj != sj_tj){
		document.getElementById(destin).innerText += "◐ 처덕과 자식 복이 없는 가운데 직주(職住) 이동이 심하고 특히 여명은 낙태 등 산액이 있을 수 있다.--- \n"; 
	};
	if (jjh_unsng.includes("장생") || jjh_unsng.includes("관대") || jjh_unsng.includes("건록") || jjh_unsng.includes("제왕")){
		document.getElementById(destin).innerText += "◐ 생사여탈 직업군에서 두각을 나타낸다.(군 검 경 의사 종교인 활인업)--- \n"; 
	};
	if (jjh_unsng.includes("사") || jjh_unsng.includes("절")){document.getElementById(destin).innerText += "◐ 매사불성(每事不成)이며 흉사가 다반사로 일어나고 부부는 해로 문제로 갈등하게 된다.--- \n";};

	if (a == 2){  //--- 행운
		txsj = sj_yj + sj_mj + sj_tj; txhn = hn_lj + hn_yj + hn_mj + hn_dj; txt1 = "";
		if (sj_dj == "寅" && txhn.includes("巳")){txt1 = "건강 이상";};
		if (sj_dj == "寅" && txhn.includes("申")){txt1 = "구설. 신경쇠약";};
		if (sj_dj == "巳" && txhn.includes("寅")){txt1 = "성격 변화";};
		if (sj_dj == "巳" && txhn.includes("申")){txt1 = "재물 손괴";};
		if (sj_dj == "申" && txhn.includes("寅")){txt1 = "편두통";};
		if (sj_dj == "申" && txhn.includes("巳")){txt1 = "관재 구설";};
		if (((sj_dj == "寅" && txsj.includes("巳")) || (sj_dj == "巳" && txsj.includes("寅"))) && txhn.includes("申")){txt1 = "골격계 질환. 대장. 순환기. 폐질환";};
		if (((sj_dj == "寅" && txsj.includes("申")) || (sj_dj == "申" && txsj.includes("寅"))) && txhn.includes("巳")){txt1 = "순환기 질환. 눈. 심장. 소장";};
		if (((sj_dj == "巳" && txsj.includes("申")) || (sj_dj == "申" && txsj.includes("巳"))) && txhn.includes("寅")){txt1 = "신경계. 간장. 임파. 갑상선";};
		if ((sj_ji.includes("寅") && sj_ji.includes("巳") && sj_ji.includes("申")) && txhn.includes("申")){txt1 = "골격계 질환. 대장. 순환기. 폐질환";};
		if ((sj_ji.includes("寅") && sj_ji.includes("巳") && sj_ji.includes("申")) && txhn.includes("巳")){txt1 = "순환기 질환. 눈. 심장. 소장";};
		if ((sj_ji.includes("寅") && sj_ji.includes("巳") && sj_ji.includes("申")) && txhn.includes("寅")){txt1 = "신경계. 간장. 임파. 갑상선";};
		document.getElementById(destin).innerText += "◐ 삼형살 병증--- " + txt1 + "\n"; 
	};
	document.getElementById(destin).innerText += "--------------------------------------------------------------\n";
};

	//--- 지지형 b (붕형-축술미)
function johhb_chk(a,destin){
	johhe_chk(a,destin); 
	subj = "3a"; tempj = spec_jjhyung.filter(isFind); rslt = rslt_hyng2;
	document.getElementById(destin).innerText += "★★" + rslt + " 붕형--- \n" + "◐ " + tempj[0][2] + "\n"; 
	subj = "3b"; tempj = spec_jjhyung.filter(isFind);
	document.getElementById(destin).innerText += "◐ " + tempj[0][2] + "\n"; 
	document.getElementById(destin).innerText += "--------------------------------------------------------------\n";
};

	//--- 지지형 c (상형-자묘)
function johhc_chk(a,destin){
	johhe_chk(a,destin);
	subj = "2a"; tempj = spec_jjhyung.filter(isFind); rslt = rslt_hyng3;
	document.getElementById(destin).innerText += "★★ " + rslt + " 상형--- " + "\n" + "◐ " + tempj[0][2] + "\n"; 
	document.getElementById(destin).innerText += "--------------------------------------------------------------\n";
};

	//--- 지지형 d (병존자형-진오유해)
function johhd_chk(a,destin){
	johhe_chk(a,destin);
	subj = "4a"; tempj = spec_jjhyung.filter(isFind); rslt = rslt_hyng4;
	document.getElementById(destin).innerText += "★★ " + rslt + " 자형 \n ◐ " + tempj[0][2] + "\n"; 
	subj = rslt0.substr(0,2); tempj = spec_jjhyung.filter(isFind);
	document.getElementById(destin).innerText += "◐" + subj + " 자형--- " + tempj[0][2] + "\n"; 
	if (rslt0.length > 5 && rslt0.includes("자형")){
		subj = rslt0.substr(3,2); tempj = spec_jjhyung.filter(isFind);
		document.getElementById(destin).innerText += "◐" + subj + " 자형--- " + tempj[0][2] + "\n"; 
	};
	document.getElementById(destin).innerText += "--------------------------------------------------------------\n";
};

//====== 장간동요 ===================
function jjg_turb(){  
	//--- sj_gan: 천간4자, sj_dg+sj_dj: 일주
	//--- 지장간 일지: gj_nfo[3][9].substr(0,1), gj_nfo[3][10].substr(0,1), gj_nfo[3][11].substr(0,1)
	//--- 위치: pos_ch = "2": 월지,  "4": 시지,  "24": 원국투충, "": 행운충
	if (pos_ch.length == 0){pos_ch = "3";	};  //--- 행운충의 경우 일지의 지장간만 적용
	if ("辰戌丑未".includes(sj_dj)){  //--- 사고의 개
		sago();
	}else{  //--- 생왕개지
		gaeji();
	};
};

//--- return true; return false; //--- 반복문에서 현재이후의 모든 상위 반복문 절차까지 탈출
//--- break; //--- 반복문에서 현재반복문의 나머지절차를 탈출하고 상위 반복문을 계속실행
//--- continue; //--- 반복문에서 현재반복문의 현재절차만 탈출하고 나머지 절차와 상위반복문을 계속실행

//====== 사고의 개 ===================
function sago(){  
	document.getElementById("output3").innerText += "◐ 사고의 개---" + pos_ch + " \n";
	for (j=0; j<pos_ch.length; j++){
		m = pos_ch.substr(j,1);
		for (i=0; i<3; i++){
			if (gj_nfo[m][i+9] == ""){continue;
			}else{
				sjj = gj_nfo[m][i+9].substr(0,1);
			};
			if (sj_gan.includes(sjj)){
				txt4go = gj_nfo[m][i+12] + "(" + sjj + ") 입고(십성) 흉";  //--- 지장간 기물이 천간에 있으면 입고(십성흉)
				if (txt2.substr(txt2.length-1) == "길"){txt4go += " ==> ★ 무난";};
			}else{
				dx = "甲己乙庚丙辛丁壬戊癸".indexOf(sjj);
				if(dx%2==1){sjg = "甲己乙庚丙辛丁壬戊癸".substr(dx-1,1);}else{sjg = "甲己乙庚丙辛丁壬戊癸".substr(dx+1,1);};
				if (sj_gan.includes(sjg)){
					sibsng(sj_dg,sjg,"");  //--- 지장간 기물이 천간에 없지만 합반합거(십성흉)
					txt4go = gs_titl + "(" + sjg + ") 합반합거(십성) 흉-- 누군가에 속음. 사기수";
					if (txt2.substr(txt2.length-1) == "길"){txt4go += " ==> ★ 무난";};
				}else{
					txt4go = gj_nfo[m][i+12] + "(" + sjj + ") 독야청청(십성) 길";  //--- 지장간 기물이 천간에 없고 독야청청(십성길)
				};
			};
			document.getElementById("output3").innerText += "- " + txt4go + "\n";
		};
	};
};

//====== 생왕개지 ===================
function gaeji(){  
	document.getElementById("output3").innerText += "◐ 생왕개지---" + pos_ch + " \n";
	for (j=0; j<pos_ch.length; j++){
		m = pos_ch.substr(j,1);
		if (gj_nfo[m][10] == ""){i=1;	}else{i=0;};
		sjj = gj_nfo[m][i+10].substr(0,1);
		if (sj_gan.includes(sjj)){
			txt4go = gj_nfo[m][i+13] + "(" + sjj + ") 투간(십성) 길";  //--- 지장간 중(본)기 기물이 천간에 있으면 투간(십성길)
		}else{
			dx = "甲己乙庚丙辛丁壬戊癸".indexOf(sjj);
			if(dx%2==1){sjg = "甲己乙庚丙辛丁壬戊癸".substr(dx-1,1);}else{sjg = "甲己乙庚丙辛丁壬戊癸".substr(dx+1,1);};
			if (sj_gan.includes(sjg)){
				sibsng(sj_dg,sjg,"");  //--- 지장간 중(본)기 기물이 천간에 없지만 합반합거(십성흉)
				txt4go = gs_titl + "(" + sjg + ") 합반합거(십성) 흉-- 누군가에 속음. 사기수";
				if (txt2.substr(txt2.length-1) == "길"){txt4go += " ==> ★ 무난";};
			}else{
				txt4go = gj_nfo[m][i+13] + "(" + sjj + ") 독야청청.. 충발에 따른 흉";  //--- 지장간 기물이 천간에 없고 독야청청(십성흉)
				if (txt2.substr(txt2.length-1) == "길"){txt4go += " ==> ★ 무난";};
			};
		};
		document.getElementById("output3").innerText += "- " + txt4go + "\n";
	};
};

//====== gj_nfo, hgj_nfo, hun_list 테이블 작성 ====== mktable(1,hn_lg,hn_lj,hgj_nfo);
function mktable(a,b,c,fnm){
	subj = b; temp = gan.filter(isFind); fnm[a][2] = temp[0][4].substr(1,2); fnm[a][15] = temp[0][5]; 
	subj = c; temp = jiji.filter(isFind); fnm[a][6] = temp[0][4].substr(1,2);  fnm[a][15] += temp[0][5];
	fnm[a][9] = temp[0][6]; fnm[a][10] = temp[0][7]; fnm[a][11] = temp[0][8];
	sibsng(sj_dg,temp[0][6].substr(0,1),""); fnm[a][12] = gs_titl;
	sibsng(sj_dg,temp[0][7].substr(0,1),""); fnm[a][13] = gs_titl;
	sibsng(sj_dg,temp[0][8].substr(0,1),""); fnm[a][14] = gs_titl;
	sibsng(sj_dg,b,c); fnm[a][3] = gs_titl; fnm[a][7] = js_titl;
	unsng(sj_dg,c); fnm[a][8] = js_titl;
	hroo(b,c,a); fnm[a][4] = rt;
};

//====== 천간지지 십성 chk ======	
function sibsng(a,b,c){
	gs_titl = ""; js_titl = "";
	idb = sibsungX1[0].lastIndexOf(a) - 1;
	if (b != ""){
		idx = sibsungX1[0].lastIndexOf(b);
		gs_titl = sibsungX1[idb][idx];  //--- (천간)십성 이름
	};
	if (c != ""){
		if (c == "辰" || c == "戌"){idx = sibsungX1[1].lastIndexOf("辰戌");
		}else{if (c == "丑" || c == "未"){idx = sibsungX1[1].lastIndexOf("丑未");
			}else{idx = sibsungX1[1].lastIndexOf(c);};};
		js_titl = sibsungX1[idb][idx];  //--- (지지)십성 이름
	};
};

//======= 십이운성 기록하는 함수 =====
function unsng(a,b){
	idb = sibsungX1[0].lastIndexOf(a) - 1;	
	idx = unsung[idb].lastIndexOf(b);
	js_titl = unsung[0][idx];
};
	
//====== 천간합 자기자리 통근체크 함수 ======
//---- hroo(천간,지지,c); --- c: 시주이면 4(예외적용)..
function hroo(a,b,c){  
	hro = ""; rt = "";
	sibsng(a,"",b);
	hro = js_titl;  //--- 십성
	if (hro === "비견" || hro === "겁재" || hro === "편인" || hro === "정인"){	rt = "1" + hro; }else{ rt = "0" + hro;};  //--- 통근1불통근0 + 십성
	if (c==4){  //--- 예외 적용 (甲일간 己巳시,乙일간 庚辰시,戊일간 癸亥시,癸일간 戊午시는 불통근으로 간주함.)
		if ((sj_dg == "甲" && sj_tg == "己" && sj_tj == "巳") || (sj_dg == "乙" && sj_tg == "庚" && sj_tj == "辰") || (sj_dg == "戊" && sj_tg == "癸" && sj_tj == "亥") || (sj_dg == "癸" && sj_tg == "戊" && sj_tj == "午")){	rt = "0" + hro;};  //--- 불통근 + 십성
	};
};

//---- 통근체크 ----
function ganji_root(){
	//------ 모든 천간의 통근 확인 -----------
	document.getElementById("output2").innerText += "(위치가중: 10 7 4 1 월지13 일지12 기본10) \n";
	subj = sj_yg; temp = sibsungX1.filter(isFind); root_point("년간",temp[0],"비견","겁재","편인","정인","output2");
	subj = sj_mg; temp = sibsungX1.filter(isFind); root_point("월간",temp[0],"비견","겁재","편인","정인","output2");
	subj = sj_dg; temp = sibsungX1.filter(isFind); root_point("일간",temp[0],"비견","겁재","편인","정인","output2");
	if (sjtx != "x"){ subj = sj_tg; temp = sibsungX1.filter(isFind); root_point("시간",temp[0],"비견","겁재","편인","정인","output2");};
	document.getElementById("output2").innerText += "\n";
};

//========== 천간의 통근을 확인하는 함수 ==========
function root_point(a,b,c,d,e,f,g) {
	tit = ""; cfm = ""; eff1 = 0; eff2 = 0; eff3 = 0; eff4 = 0; eff0 = 0;
	efft = 0; isol = "";
		idx = b.lastIndexOf(c); tit += sibsungX1[0][idx];
		idx = b.lastIndexOf(d); tit += sibsungX1[0][idx];
		idx = b.lastIndexOf(e); tit += sibsungX1[0][idx];
		idx = b.lastIndexOf(f); tit += sibsungX1[0][idx];		
	for (i=1;i<5 ; i++){
		if (tit.includes(gj_nfo[i][11].substr(0,1))==true){document.getElementById(g).innerText += i + ".... 지장간 " + gj_nfo[i][11] + "\n"; cfm += "kj"; eval('eff' + i + ' += Number(gj_nfo[i][11].substr(1,2))');};
		if (gj_nfo[i][10] != "" && tit.includes(gj_nfo[i][10].substr(0,1))==true){document.getElementById(g).innerText += i + ".... 지장간b " + gj_nfo[i][10] + "\n"; cfm += "kj"; eval('eff' + i + ' += Number(gj_nfo[i][10].substr(1,2))');};
		if (tit.includes(gj_nfo[i][9].substr(0,1))==true){document.getElementById(g).innerText += i + ".... 지장간a " + gj_nfo[i][9] + "\n"; cfm += "kj"; eval('eff' + i + ' += Number(gj_nfo[i][9].substr(1,2))');};
	};
	if (a == "년간"){eff0 = (eff1 * 100) + (eff2 *13 * 7) + (eff3 * 12 * 4) + (eff4 * 10);};
	if (a == "월간"){eff0 = (eff2 * 130) + (eff3 *12 * 7) + (eff4 * 40) + (eff1 * 70);};
	if (a == "일간"){eff0 = (eff3 * 120) + (eff2 *13 * 7) + (eff4 * 70) + (eff1 * 40);};
	if (a == "시간"){eff0 = (eff4 * 100) + (eff3 *12 * 7) + (eff2 * 13 * 4) + (eff1 * 10);};
	efft = parseInt(eff0 / 30);
	if (efft > 119){ ganf = "극강";
	}else{if (efft > 89){ ganf = "강";
		}else{if (efft > 59){ ganf = "중";
			}else{if (efft > 29){ ganf = "약";
				}else{ganf = "극약";}}};};
	if (a == "년간"){ 
		ganf1 = ganf; 
		if (ganf1 != "극약" || tit.includes(sj_mg)){
			isol_y = "";
		}else{isol_y = "고립"; isol = "고립";};
	};		
	if (a == "월간"){ 
		ganf2 = ganf;
		if (ganf2 != "극약" || tit.includes(sj_dg) || tit.includes(sj_yg)){
			isol_m = "";
		}else{isol_m = "고립"; isol = "고립";};
	};		
	if (a == "일간"){ 
		ganf3 = ganf 
		if (ganf3 != "극약" || tit.includes(sj_mg) || tit.includes(sj_tg)){
			isol_d = "";
		}else{isol_d = "고립"; isol = "고립";};
	};		
	if (a == "시간"){ 
		ganf4 = ganf 
		if (ganf4 != "극약" || tit.includes(sj_dg)){
			isol_t = "";
		}else{isol_t = "고립"; isol = "고립";};
	};		
	document.getElementById("output2").innerText += ".............................." + a + " " + b[0] + " 통근 " + ganf + isol + " ..... " + String(efft) + "%\n";
};	
	
//========== 지지의 투간을 확인하는 함수 ==========
function tugan(){
	sj_gan = sj_yg + sj_mg + sj_dg + sj_tg; 
	sj_ji = sj_yj + sj_mj + sj_dj + sj_tj; 
	sj_ganji = sj_yg + sj_yj + sj_mg + sj_mj + sj_dg + sj_dj + sj_tg + sj_tj;
	jjg = ""; eff0 = 0; pos = "";idx = 0; n = 0; ttx = ""; nfo_tugan = "";
	subj = sj_dg; temp = sibsungX1.filter(isFind);
	for (i=1; i<5; i++){
		for (j=0; j<3; j++){
			jjg = gj_nfo[i][j+9].substr(0,1);  //--- 지장간
			if (jjg != ""){
				eff = Number(gj_nfo[i][j+9].substr(1,2));  //---지장간 비율
				eff0 = 0; pos = "";
				if (sj_gan.includes(jjg)){
					n = 0;
					while (true){
						idx = sj_gan.indexOf(jjg,n)  //--- 투간된 위치
						if(idx == -1){break;};		
						pos += String(idx+1);
						eff0 += parseInt(eff/30 *(100-Math.abs(idx+1-i)*30));
						n = idx + 1;
					};
					if (i == 1){ttx = "년지";
					}else{	if (i == 2){ttx = "월지"; idx = sibsungX1[0].lastIndexOf(jjg); nfo_tugan += "\n월지투간==> " + temp[0][idx] + "格 "+ jjg + "..용신";
						}else{	if (i == 3){ttx = "일지";
							}else{	if (i == 4){ttx = "시지";}}}};
					document.getElementById("output2").innerText += String(i) + ".... 지장간 " + jjg + eff + "..........." + ttx +" .... " + pos + " 투간... " + eff0 + "%\n";
				};	
			};
		};
	};
};
	
//========== 오행의 갯수 check 하는 함수 ==========
function mpohcnt(){
	let sp1 = (ohtx.match(/양목/g) || []).length; 
	let sp2 = (ohtx.match(/양화/g) || []).length;
	let sp3 = (ohtx.match(/양토/g) || []).length;
	let sp4 = (ohtx.match(/양금/g) || []).length;
	let sp5 = (ohtx.match(/양수/g) || []).length;
	let sm1 = (ohtx.match(/음목/g) || []).length;
	let sm2 = (ohtx.match(/음화/g) || []).length;
	let sm3 = (ohtx.match(/음토/g) || []).length;
	let sm4 = (ohtx.match(/음금/g) || []).length;
	let sm5 = (ohtx.match(/음수/g) || []).length;
	document.getElementById("output2").innerText += "오행...양...음\n";
	document.getElementById("output2").innerText += "...목......" + String(sp1) + "......" + String(sm1) + "\n";
	document.getElementById("output2").innerText += "...화......" + String(sp2) + "......" + String(sm2) + "\n";
	document.getElementById("output2").innerText += "...토......" + String(sp3) + "......" + String(sm3) + "\n";
	document.getElementById("output2").innerText += "...금......" + String(sp4) + "......" + String(sm4) + "\n";
	document.getElementById("output2").innerText += "...수......" + String(sp5) + "......" + String(sm5) + "\n";
	document.getElementById("output2").innerText += "\n";

	let sstx = gj_nfo[1][3] + gj_nfo[1][7] + gj_nfo[2][3] + gj_nfo[2][7] + gj_nfo[3][3] + gj_nfo[3][7] + gj_nfo[4][3] + gj_nfo[4][7];
	document.getElementById("output2").innerText += "...편인......" + (sstx.match(/편인/g) || []).length + "......" + (sstx.match(/정인/g) || []).length + "......정인 \n";
	document.getElementById("output2").innerText += "...비견......" + (sstx.match(/비견/g) || []).length + "......" + (sstx.match(/겁재/g) || []).length + "......겁재 \n";
	document.getElementById("output2").innerText += "...식신......" + (sstx.match(/식신/g) || []).length + "......" + (sstx.match(/상관/g) || []).length + "......상관 \n";
	document.getElementById("output2").innerText += "...편재......" + (sstx.match(/편재/g) || []).length + "......" + (sstx.match(/정재/g) || []).length + "......정재 \n";
	document.getElementById("output2").innerText += "...편관......" + (sstx.match(/편관/g) || []).length + "......" + (sstx.match(/정관/g) || []).length + "......정관 \n";
	document.getElementById("output2").innerText += "\n";
};
	
//=========== 일간의 통근 상황 확인===========
function rootgchk(){
	pointr = ""; 
	document.getElementById("output2").innerText += "\n";
	dgroot(gj_nfo[3][7],1);  //----- 일지 = 인성/비겁 여부 -----
	dgroot(gj_nfo[2][7],2);  //----- 월지 = 인성/비겁 여부 -----
	pwrcnt();  //----- 일간의 세력상태 확인 -----
	
	pn = pointr.match(/Y/g);
	pn1 = pointr.match(/N/g);
	if(pn != null) {
		if(pn.length === 3){
			document.getElementById("output2").innerText += "극신강 사주 ..." + pointr + "\n";
		}else{
			if(pn.length === 2){
				document.getElementById("output2").innerText += "신강 사주 ..." + pointr + "\n";
			}else{
				if(pn.length === 1){
					document.getElementById("output2").innerText += "신약 사주 ..." + pointr + "\n";}}};
	}else{document.getElementById("output2").innerText += "극신약 사주 ..." + pointr + "\n";};
	sibsng(sj_dg,"",sj_mj); document.getElementById("output2").innerText += "사주격국 (기본) " + js_titl + "格 " + nfo_tugan + "\n\n";

	//--- output1에 추가 display
	if(pn != null) {
		if(pn.length === 3){
			document.getElementById("output1").innerText += "극신강 사주 ..." + pointr + "\n";
		}else{
			if(pn.length === 2){
				document.getElementById("output1").innerText += "신강 사주 ..." + pointr + "\n";
			}else{
				if(pn.length === 1){
					document.getElementById("output1").innerText += "신약 사주 ..." + pointr + "\n";}}};
	}else{document.getElementById("output1").innerText += "극신약 사주 ..." + pointr + "\n";};
	document.getElementById("output1").innerText += "사주격국 (기본) " + js_titl + "格 " + nfo_tugan + "\n\n";
};	
	
//========= 일간의 통근 check 하는 함수 ========
function dgroot(pos,a){
	pass = ""; fail = "";
	if (pos === "정인" || pos === "편인" || pos === "비견" || pos === "겁재"){ 
		if (a === 1){ pointr = pointr + "득지Y"; pass = "득지\n";
		}else{if (a === 2){ pointr = pointr + "득령Y"; pass = "득령\n";}else{pass = pos + " 통근\n";}};
		document.getElementById("output2").innerText += "일간 " + pass;
	}else{
		if (a === 1){ pointr = pointr + "실지N"; fail = "실지\n";
		}else{if (a === 2){ pointr = pointr + "실령N"; fail = "실령\n";}else{ fail = " ";}};
		document.getElementById("output2").innerText += fail;};
};
	
//========= 일간의 세력 check 하는 함수 =========
function pwrcnt(){
	sstext = gj_nfo[1][3] + gj_nfo[1][7] + gj_nfo[2][3] + gj_nfo[2][7] + gj_nfo[3][7] + gj_nfo[4][3] + gj_nfo[4][7];  //--- 십성
	let r1 = (sstext.match(/비견/g) || []).length;
	let r2 = (sstext.match(/겁재/g) || []).length;
	let r3 = (sstext.match(/편인/g) || []).length;
	let r4 = (sstext.match(/정인/g) || []).length;

	r0 = r1 + r2 + r3 + r4;
	if (r0 > 3){
		pointr = pointr + "득세Y";
		document.getElementById("output2").innerText += "일간 득세 " + String(r0) + " / " + String(7-r0) + "\n\n";
	}else{
		pointr = pointr + "실세N";
		document.getElementById("output2").innerText += "일간 실세 " + String(r0) + " / " + String(7-r0) + "\n\n";};
};
	
//======= 대운수 & 초기대운일 ======
function longun(){
	longungj = ""; 
	if (gj_nfo[1][2].substr(0,1) === gendr.substr(1,1)){
		perio = (postmon - birth1) / term * 10 * 365;
		r = 1;
	}else{
		perio = (birth1 - premon) / term * 10 * 365;
		r = -1;
	};
	firstD = new Date(symdt.substr(0,16));  //--- 초기대운일 
	firstD.setTime(firstD.getTime() + perio);  //--- 초기대운일 계산	
	age = firstD.getFullYear() - birth0.getFullYear() + 1;  //--- 대운수(나이)
	firstD = new Date(firstD); firstD1 = new Date(firstD.format('yyyy-MM-dd HH:mm'));
	slr2lnr(birth0);
	document.getElementById("output2").innerText += "생년월일 : " + birth0.format('yyyy-MM-dd HH:mm') + " (" + (now.getFullYear() - birth0.getFullYear() + 1) + "세 " + gendr.substr(0,1) + "성) \n";
	document.getElementById("output2").innerText += " (음 력) : " + lnrd + " \n";
	document.getElementById("output2").innerText += "초기대운일 (" + age + "세) " + firstD.format('yyyy-MM-dd HH:mm') + " \n\n";
	due = firstD;
	for (i=0; i<gan.length; i++){
		if (gan[i][0] === sj_mg){a = i};
	};
	for (i=0; i<jiji.length; i++){
		if (jiji[i][0] === sj_mj){b = i};
	};
	
	for (i=1; i<15; i++){
		ca = (a + i * r + 59) % 10 + 1;
		cb = (b + i * r + 59) % 12 + 1;
		posa = "sjua" + i; posb = "sjub" + i;
		longungj += gan[ca][0] + jiji[cb][0];
		if (i==1){
			hun_list[i][15] = firstD1.format('yyyy-MM-dd HH:mm');
		}else{
			firstD1.setFullYear(firstD1.getFullYear() + 10); 
			hun_list[i][15] = firstD1.format('yyyy-MM-dd HH:mm');
		};
		hun_list[i][1] = gan[ca][0]; hun_list[i][2] = gan[ca][4].substr(1,2); hun_list[i][5] = jiji[cb][0]; hun_list[i][6] = jiji[cb][4].substr(1,2);  //--- 대운 테이블(hun_list) 생성
		hun_list[i][9] = jiji[cb][6]; hun_list[i][10] = jiji[cb][7]; hun_list[i][11] = jiji[cb][8];
		sibsng(sj_dg,jiji[cb][6].substr(0,1),""); hun_list[i][12] = gs_titl; 
		sibsng(sj_dg,jiji[cb][8].substr(0,1),""); hun_list[i][14] = gs_titl;
		if (jiji[cb][7] == ""){	hun_list[i][13] = ""}else{sibsng(sj_dg,jiji[cb][7].substr(0,1),""); hun_list[i][13] = gs_titl;}; 
		hroo(gan[ca][0],jiji[cb][0],0); hun_list[i][4] = rt;
		unsng(sj_dg,jiji[cb][0]); hun_list[i][8] = js_titl;
		
		sibsng(sj_dg,gan[ca][0],jiji[cb][0]); hun_list[i][3] = gs_titl; hun_list[i][7] = js_titl; 
		if (i < 11){
			document.getElementById(posb).innerText += "(" + (age + (i - 1) * 10) + ")" + "\n";
			document.getElementById(posa).innerText += gan[ca][0] + "\n";
			document.getElementById(posb).innerText += hun_list[i][3] + "\n" + hun_list[i][2] + " \n\n";
			document.getElementById(posa).innerText += jiji[cb][0] + "\n";
			document.getElementById(posb).innerText += hun_list[i][7] + "\n" + hun_list[i][6] + " \n " + hun_list[i][8] + " \n";
		};
	};
};
	
//====== 연운 ======
function seun(){
	vwyr = null; rvwyr = null; seug = ""; seugs = ""; seugoh = ""; seuj = ""; seujs = ""; seujoh = "";
	rvwyr = birth1.getFullYear() + age - 1;
	subj = sj_dg; temp = sibsungX1.filter(isFind); temp1 = unsung.filter(isFind);  //---십성(일간)
	k = 1; j = 0;
	for (i=0; i<150; i++){
		vwyr = rvwyr + i;
		mo = (vwyr - 1863) % 10; 
		no = (vwyr - 1863) % 12;
		if (mo === 0){ mo = 10; };
		if (no === 0){ no = 12; };
		if (j == 10){
			k += 1;
			j = 0
		};
		if (k < 11){
			posi = "seu" + k;
		}else{
			posi = "";
		};
		seug = gan[mo][0]; 
		seugoh = gan[mo][4].substr(1,2);
		idx = sibsungX1[0].lastIndexOf(seug);
		seugs = temp[0][idx];  //--- (천간)십성 이름
		if (posi != ""){		
			document.getElementById(posi).innerText += vwyr + " (" + (vwyr - birth1.getFullYear() + 1) + ")\n";
			document.getElementById(posi).innerText += seug + seugs + seugoh + "\n";
		};
		seuj = jiji[no][0];
		seujoh = jiji[no][4].substr(1,2);
		if (seuj == "辰" || seuj == "戌"){idx = sibsungX1[1].lastIndexOf("辰戌");
		}else{if (seuj == "丑" || seuj == "未"){idx = sibsungX1[1].lastIndexOf("丑未");
			}else{idx = sibsungX1[1].lastIndexOf(seuj);};};
		seujs = temp[0][idx];  //--- (지지)십성 이름
		iuns = temp1[0].lastIndexOf(seuj);
		seuns = unsung[0][iuns]; if (seuns.length>1){seuns = seuns.substr(1);};
		if (posi != ""){
			document.getElementById(posi).innerText += seuj + seujs + seujoh + " " + seuns + "\n";
			if ((i%10) != 9){document.getElementById(posi).innerText += "--------------\n";};
		};
		j += 1;
	};
};
	
//====== 월운 ======
function moun(){
	subj = sj_dg; temp = sibsungX1.filter(isFind); temp1 = unsung.filter(isFind);  //---십성(일간)
	for (i=0; i<12; i++){
		n = i - 3;
		posi = "mou" + ((n + 3) % 3 + 1);
 		mountit = new Date(now.setMonth(now.getMonth() + n));
		
		mothg = ((mountit.getFullYear() - 1909) * 12 + mountit.getMonth() + 1) % 10 + 1;  //--- 1908.12 (무신 갑자) 이후 월간
		if (mothg == 0){mothg = 10;};
		mothj = ((mountit.getFullYear() - 1909) * 12 + mountit.getMonth() + 1) % 12 + 1;  //--- 1908.12 (무신 갑자) 이후 월지
		if (mothj == 0){mothj = 12;};
 		moung = gan[mothg][0];
 		moungoh = gan[mothg][4].substr(1,2);  //--- (천간)음양오행
 		idx = sibsungX1[0].lastIndexOf(moung);
 		moungs = temp[0][idx];  //--- (천간)십성 이름
		
		mounj = jiji[mothj][0];
		mounjoh = jiji[mothj][4].substr(1,2);
		if (mounj == "辰" || mounj == "戌"){idx = sibsungX1[1].lastIndexOf("辰戌");
		}else{if (mounj == "丑" || mounj == "未"){idx = sibsungX1[1].lastIndexOf("丑未");
			}else{idx = sibsungX1[1].lastIndexOf(mounj);};};
		mounjs = temp[0][idx];  //--- (지지)십성 이름
		iuns = temp1[0].lastIndexOf(mounj);
		mouns = unsung[0][iuns]; if (mouns.length>1){mouns = mouns.substr(1);};
		document.getElementById(posi).innerText += mountit.format('yyyy-MM') + " (" + mounj + ")\n";
 		document.getElementById(posi).innerText += moung + moungs + moungoh + "\n";
 		document.getElementById(posi).innerText += mounj + mounjs + mounjoh + " " + mouns + "\n";
		if (i < 9){document.getElementById(posi).innerText += "--------------\n";};
	};
};

//====== 일운 ======
function dayun(){
	subj = sj_dg; temp = sibsungX1.filter(isFind); temp1 = unsung.filter(isFind); now = now; //---십성(일간)
	for (i=0; i<28; i++){
 		dauntit = new Date(now.setDate(now.getDate() + i - 3));
		posi = "dau" + (i % 7 + 1);
		daysg = Math.ceil((dauntit.getTime() - new Date('1908-01-10').getTime()) / 86400000) % 10;
		if (daysg == 0){daysg = 10};
		daysj = Math.ceil((dauntit.getTime() - new Date('1908-01-10').getTime()) / 86400000) % 12;
		if (daysj == 0){daysj = 12};
		daung = gan[daysg][0];
		daungoh = gan[daysg][4].substr(1,2);  //--- (천간)음양오행
		idx = sibsungX1[0].lastIndexOf(daung);
		daungs = temp[0][idx];  //--- (천간)십성 이름

		daunj = jiji[daysj][0];
		daunjoh = jiji[daysj][4].substr(1,2);
		if (daunj == "辰" || daunj == "戌"){idx = sibsungX1[1].lastIndexOf("辰戌");
		}else{if (daunj == "丑" || daunj == "未"){idx = sibsungX1[1].lastIndexOf("丑未");
			}else{idx = sibsungX1[1].lastIndexOf(daunj);};};
		daunjs = temp[0][idx];  //--- (지지)십성 이름
		iuns = temp1[0].lastIndexOf(daunj);
		dauns = unsung[0][iuns]; if (dauns.length>1){dauns = dauns.substr(1);};
		document.getElementById(posi).innerText += dauntit.format('yyyy-MM-dd') + "\n";
 		document.getElementById(posi).innerText += daung + daungs + daungoh + "\n";
 		document.getElementById(posi).innerText += daunj + daunjs + daunjoh + " " + dauns + "\n";
		if (i < 21){document.getElementById(posi).innerText += "--------------\n";};
	};
};
	
//======= 화면양식에 사주내용 기록하는 함수 =====
function fill_saju(){
	ohtx = "";
	for (i=1;i<5 ; i++){
		m = i * 2 -1;
		n = i * 2;
		document.getElementById("sj" + m).innerText += gj_nfo[i][1];  //--- 천간 기록
		document.getElementById("sjg" + m).innerText += gj_nfo[i][2];  //--- 천간 음양오행 기록
		chg_bgcolor("#sj" + m,gj_nfo[i][15].substr(0,4),gj_nfo[i][15].substr(0,4));  //--- 천간 배경색
		document.getElementById("sj" + n).innerText += gj_nfo[i][5];  //--- 지지 기록
		document.getElementById("sjg" + n).innerText += gj_nfo[i][6];  //--- 지지 음양오행 기록
		chg_bgcolor("#sj" + n,gj_nfo[i][15].substr(4,4),gj_nfo[i][15].substr(4,4));  //--- 지지 배경색
		ohtx += gj_nfo[i][2] + gj_nfo[i][6]; 

		//--- 지장간 기록 ---
		document.getElementById("sj" + n + "b").innerText += gj_nfo[i][9] + " " + gj_nfo[i][12]  + "\n";
		if (gj_nfo[i][10] == ""){
			document.getElementById("sj" + n + "b").innerText += " \n";
		}else{
			document.getElementById("sj" + n + "b").innerText += gj_nfo[i][10] + " " + gj_nfo[i][13] + "\n";
		};
		document.getElementById("sj" + n + "b").innerText += gj_nfo[i][11] + " " + gj_nfo[i][14] + "\n";
	}
	document.getElementById("sj1a").innerText += gj_nfo[1][3] + "\n"; document.getElementById("sj2a").innerText += gj_nfo[1][7] + "\n";  //--- 년주 십성 기록
	document.getElementById("sj3a").innerText += gj_nfo[2][3] + "\n"; document.getElementById("sj4a").innerText += gj_nfo[2][7] + "\n";  //--- 월주 십성 기록
	document.getElementById("sj5a").innerText += "일간(나)\n"; document.getElementById("sj6a").innerText += gj_nfo[3][7] + "\n";  //--- 일주 십성 기록
	document.getElementById("sj7a").innerText += gj_nfo[4][3] + "\n"; document.getElementById("sj8a").innerText += gj_nfo[4][7] + "\n";  //--- 시주 십성 기록
	document.getElementById("sj2c").innerText += "(일간) " + gj_nfo[1][8] + " \n";  //----- 년지 십이운성 기록
	document.getElementById("sj4c").innerText += "(일간) " + gj_nfo[2][8] + " \n";  //----- 월지 십이운성 기록
	document.getElementById("sj6c").innerText += "(일간) " + gj_nfo[3][8] + " \n";  //----- 일지 십이운성 기록
	document.getElementById("sj8c").innerText += "(일간) " + gj_nfo[4][8] + " \n";  //----- 시지 십이운성 기록
};

//====== 천간합충 원국/행운 결과 출력 함수 ======
//--- result_out(code2, desc, "원국", "output1");
function result_out(tx,desc,sts,dstin){
	if (tx != "-"){
		document.getElementById(dstin).innerText += "■ 일간 " + hcg3 + " " + sts + "--- " + desc + "\n";
		if (sts.includes("실행")){
			if (tx == "1"){summing1(dstin);};  //--- 합(1)
			if (tx == "2"){summing2(dstin); summing1(dstin); };  //--- 합화 용신(2)
			if (tx == "3"){summing3(dstin);};  //--- 불합(3)
			if (tx == "4"){summing4(dstin);};  //--- 합봉(4) 
			if (tx == "5"){summing5(dstin);};  //--- 용봉(5) 
			if (tx == "6"){summing3(dstin); summing6(dstin, sts);};  //--- 합파불합(6)
			if (tx == "7"){summing3(dstin); summing8(dstin);};  //--- 불합+충(7)
			if (tx == "8"){summing8(dstin);};  //--- 충발(8) 
			if (tx == "9"){summing3(dstin); summing6(dstin, sts); summing8(dstin);};  //--- 합파충(9) 
			if (tx == "b"){summingb(dstin);};  //--- 충거(b) 
		};
		document.getElementById(dstin).innerText += "--------------------------------------------------------------\n";
	};
};

//======== 합(1) 내용 summary ========
function summing1(dstin){
	subj = sj_dg; temp = cgh02_dhap_simrihealth.filter(isFind); sz = "";
	if (ganhc_nfo[3][4].includes(temp[0][7])){sz = "심리(20~38세)---";};
	if (ganhc_nfo[3][5].includes(temp[0][7])){sz = "심리(58세~)---";};
	//--- 정재/정관의 긍정심리
	subj = temp[0][3].substr(3,2);
	for (j=1; j< cgh01_sibsng_simri6chin.length; j++){
		if (cgh01_sibsng_simri6chin[j][0] == subj){
			rslt = cgh01_sibsng_simri6chin[j][1]; 
			document.getElementById(dstin).innerText += "◐ " + subj + sz + rslt + "\n";
		};
	};
	document.getElementById(dstin).innerText += "◐ 일간의 심리--- 1.다정다감 2.부화뇌동 3.부정망상\n" + temp[0][4] + " " + temp[0][6] + "\n 배우자 이상형---" + temp[0][5] + "\n";
	if (temp[0][8].includes(sj_dg)){ sts = "총명하여 학술과 기예에 관심이 많고, 또 양순하면서도 다정다감하여 대인관계가 원만한 편이다. 하지만 이성으로부터 많은 관심을 받거나 부화뇌동(附和雷同)하려는 심리가 강해 자칫하면 구설에 휘말릴 수 있다.";};  //--- 합화생
	if (temp[0][9].includes(sj_dg)){ sts = "신강하면 흉화가 없지만 신약하면 소심박약(小心薄弱)하고 편향성(偏向性)을 띠게 된다";};  //--- 합화극
	document.getElementById(dstin).innerText += sts + "\n 건강에 주의---" + temp[0][11] + "\n";
};

//======== 합화(2) 내용 summary ========
function summing2(dstin){
	n = 0; subj = sj_dg; temp = cgh02_dhap_simrihealth.filter(isFind);
	for (k = 2; k < sibsungX1.length; k++){
		if (sibsungX1[k][2].substr(1,1) == temp[0][2]){
			idx = sibsungX1[k].indexOf('편관');
			rslt += sibsungX1[0][idx] + sibsungX1[1][idx];
			idx = sibsungX1[k].indexOf('정관');
			rslt += sibsungX1[0][idx] + sibsungX1[1][idx];
		};
	};
	if (rslt.includes(sj_yg)){ n += 1;}else{ n += 0;}; if (rslt.includes(sj_yj)){ n += 1;}else{ n += 0;};	
	if (rslt.includes(sj_dj)){ n += 1;}else{ n += 0;}; if (rslt.includes(sj_tj)){ n += 1;}else{ n += 0;};
	if (hcg3.substr(0,1) == "합"){ if (rslt.includes(sj_tg)){ n += 1;}else{ n += 0;};};
	if (hcg3.substr(2,1) == "합"){ if (rslt.includes(sj_mg)){ n += 1;}else{ n += 0;};};	
	if (n == 0){document.getElementById(dstin).innerText += "◐ " + desc.substr(0,3) + "합화격 " + temp[0][2] + "오행 용신\n";
	}else{document.getElementById(dstin).innerText += " + 합오행을 극함\n◐ 성합불화 ";};
};
	
//======== 불합(3) 내용 summary ========
function summing3(dstin){
	subj = sj_dg; temp = cgh02_dhap_simrihealth.filter(isFind); sz = "";
	if (ganhc_nfo[3][4].includes(temp[0][7])){sz = "심리(20~38세)---";};
	if (ganhc_nfo[3][5].includes(temp[0][7])){sz = "심리(58세~)---";};
	subj = temp[0][3].substr(3,2);
	for (j=1; j< cgh01_sibsng_simri6chin.length; j++){
		if (cgh01_sibsng_simri6chin[j][0] == subj){
			rslt = cgh01_sibsng_simri6chin[j][2]; 
			document.getElementById(dstin).innerText += "◐ " + subj + sz + rslt + "\n";
		};
	};
};
	
//======== 합봉(4) 내용 summary ========
function summing4(dstin){
	subj = sj_dg; temp = cgh02_dhap_simrihealth.filter(isFind); 
	document.getElementById(dstin).innerText += "◐ 건강 흉화 " + temp[0][11] + "\n";
	subj = temp[0][3].substr(3,2);
	temp = cgh01_sibsng_simri6chin.filter(isFind);
	if (gendr == "남양"){n = 1;}else{n = 2;};
	document.getElementById(dstin).innerText += "(" + temp[0][n+2] + ") 흉화--- \n";
	document.getElementById(dstin).innerText += temp[0][2] + "손재수 노다공소\n";
};
	
//======== 용봉(5) 내용 summary ========
function summing5(dstin){
	subj = sj_dg; temp = cgh02_dhap_simrihealth.filter(isFind);
	document.getElementById(dstin).innerText += "◐ " + temp[0][3].substr(3,2) + "운 " + temp[0][4].substr(0,2) + "운 흉화 \n";
	document.getElementById(dstin).innerText += "건강 흉화 " + temp[0][11] + "\n";
};
	
//======== 합파불합(6) 내용 summary ========
function summing6(dstin, sts){
	if (gendr == "남양"){n = 1;}else{n = 2;};
	if (sts == "원국"){subj = gj_nfo[4][3];};
	if (sts == "대운"){subj = hgj_nfo[1][3];};
	if (sts == "연운"){subj = hgj_nfo[2][3];};
	if (sts == "월운"){subj = hgj_nfo[3][3];};
	if (sts == "일운"){subj = hgj_nfo[4][3];};
	temp = cgh01_sibsng_simri6chin.filter(isFind);
	if (sts == "원국"){document.getElementById(dstin).innerText += "◐ "+ subj + "(58세~ ) " + "육친의 흉화 (" + temp[0][n+2] + ") \n";
	}else{	document.getElementById(dstin).innerText += "◐ "+ subj + "육친의 흉화 (" + temp[0][n+2] + ") \n";};
};
	
//======== 충 충발(8,) 내용 summary ========
function summing8(dstin){
	sz = "";
	if (ganhc_nfo[3][4].includes("충")){sz = "(20~38세)";};
	if (ganhc_nfo[3][5].includes("충")){sz += "(58세~ )";};
	n = "甲乙丙丁戊己庚辛壬癸".indexOf(sj_dg) + 1; 
	document.getElementById(dstin).innerText += "◐ 충발: 편고함이 지나쳐 객기와 만용을 부리기 쉬우며 대체로 소극적이고 무능한 일면의 부정적경향을 보이거나 정신적 혼란으로 건강을 해치는 등 성격적 결함을 보임 \n";
	if (n < 5){subj = "편관";};
	if (n > 6){subj = "편재";};
	document.getElementById(dstin).innerText += "◐ " + subj.substr(1,1) + "성(" + subj + ") 부조화--- " + sz + "\n";	
	rslt0 = "◐ 상신... 몸에 상처가 생김.. ";
	if (n == 1 || n == 7){rslt0 += "(근육통 골다공증 견통 대머리)\n";}; if (n == 2 || n == 8){rslt0 += "(두통 치통 요통 빙의)\n";}; 
	if (n == 3 || n == 9){rslt0 += "(심장 또는 신장질환)\n";}; if (n == 4 || n == 10){rslt0 += "(복부 방광 내분비계통 혼인파혼-작파(作破))\n";};
	document.getElementById(dstin).innerText += rslt0;	
	temp = cgh01_sibsng_simri6chin.filter(isFind);
	if (gendr == "남양"){ rslt = temp[0][3]; }else{ rslt = temp[0][4]; };	
	document.getElementById(dstin).innerText += "◐ 육친(" + rslt + ") 불화(반목)--- \n";	
};
	
//======== 행운천간합 합화오행 육친십성 흉화(0) 내용 summary ========
function summing0(a,dstin){
	subj = a;
	temp = sibsungX1.filter(isFind);
	reln = Math.ceil((temp[0].indexOf(gj_nfo[1][3])-2) / 2);
	temp = cgh02_dhap_simrihealth.filter(isFind);
	if (temp[0][4].substr(0,2)=="비견"){reln += 0};
	if (temp[0][4].substr(0,2)=="식상"){reln += 1};
	if (temp[0][4].substr(0,2)=="재성"){reln += 2};
	if (temp[0][4].substr(0,2)=="관성"){reln += 3};
	if (temp[0][4].substr(0,2)=="인성"){reln += 4};
	if (reln>5){ reln = reln - 5;}	

	if (gendr == "남양"){ 
		rslt = cgh01_sibsng_simri6chin[reln * 2 - 1][3];  
		rslt += cgh01_sibsng_simri6chin[reln * 2][3];
	}else{ 
		rslt = cgh01_sibsng_simri6chin[reln * 2 - 1][4]; 
		rslt += cgh01_sibsng_simri6chin[reln * 2][4];
	};	
	document.getElementById(dstin).innerText += "◐ 육친(" + rslt + ") 흉화--- \n";
};

//======== 충거(b) 내용 summary ========
function summingb(dstin){
	n = "甲乙丙丁戊己庚辛壬癸".indexOf(sj_dg) + 1; 
	if (n < 5){subj = "편관";};
	if (n > 6){subj = "편재";};
	document.getElementById(dstin).innerText += "◐ " + subj.substr(1,1) + "성(" + subj + ") 발흥--- \n";	
	rslt0 = "건강회복... 질병 완화.. ";
	if (n == 1 || n == 7){rslt0 += "(근육통 골다공증 견통 대머리)\n";}; if (n == 2 || n == 8){rslt0 += "(두통 치통 요통 빙의)\n";}; 
	if (n == 3 || n == 9){rslt0 += "(심장 또는 신장질환)\n";}; if (n == 4 || n == 10){rslt0 += "(복부 방광 내분비계통)\n";};
	document.getElementById(dstin).innerText += rslt0;	
	temp = cgh01_sibsng_simri6chin.filter(isFind);
	if (gendr == "남양"){ rslt = temp[0][3]; }else{ rslt = temp[0][4]; };	
	document.getElementById(dstin).innerText += "육친(" + rslt + ") 불화(반목)의 개선 화해--- \n";	
};

//======== 극(c) 내용 summary ========
function summingc(dstin){
//	document.getElementById(dstin).innerText += rslt0 + "\n";
};

	//---   hcompchk("천간합",5,sj_yg,sj_mg,2);
function hcompchk(a,b,c,d,e){  
	subj = a; rslt = "";
	chab = ganji_habchung.filter(isFind);  //===천간/지지 합충극형해파
	for (i = 1; i < b + 1; i++){
		texstr = chab[0][i].substr(0,e); 
		if (texstr == (c + d) || texstr == (d + c)){
			rslt = texstr + a.substr(2,1);
		};
	};
};

//====== 행운 천간합충극 체크결과 집계 함수 ======
//----   habchk2(3);
function habchk2(a){
	if (a == 1){bas = sj_yg;}; if (a == 2){bas = sj_mg;}; if (a == 3){bas = sj_dg;}; if (a == 4){bas = sj_tg;}; 
	rslt0 = ""; hcompchk("천간합",5,bas,hn_lg,2); if (rslt != ""){rslt0 += rslt;}; hcompchk("천간충",4,bas,hn_lg,2); if (rslt != ""){rslt0 += rslt;};	hcompchk("천간극",6,bas,hn_lg,2); if (rslt != ""){rslt0 += rslt;};
	ganhc_nfo[a][6] = rslt0; 
	rslt0 = ""; hcompchk("천간합",5,bas,hn_yg,2); if (rslt != ""){rslt0 += rslt;}; hcompchk("천간충",4,bas,hn_yg,2); if (rslt != ""){rslt0 += rslt;};	hcompchk("천간극",6,bas,hn_yg,2); if (rslt != ""){rslt0 += rslt;};
	ganhc_nfo[a][7] = rslt0;
	rslt0 = ""; hcompchk("천간합",5,bas,hn_mg,2); if (rslt != ""){rslt0 += rslt;}; hcompchk("천간충",4,bas,hn_mg,2); if (rslt != ""){rslt0 += rslt;};	hcompchk("천간극",6,bas,hn_mg,2); if (rslt != ""){rslt0 += rslt;};
	ganhc_nfo[a][8] = rslt0;
	rslt0 = ""; hcompchk("천간합",5,bas,hn_dg,2); if (rslt != ""){rslt0 += rslt;}; hcompchk("천간충",4,bas,hn_dg,2); if (rslt != ""){rslt0 += rslt;};	hcompchk("천간극",6,bas,hn_dg,2); if (rslt != ""){rslt0 += rslt;};
	ganhc_nfo[a][9] = rslt0;
};

//========== 천간합충 지지합충형해파==========
function wongug(){
	hcg1 = ""; hcg2 = ""; hcg3 = ""; hcg4 = ""; rt1 = ""; rt2 = ""; rt3 = ""; sj_org2 = ""; hcj1 = ""; hcj2 = ""; hcj3 = ""; hcj4 = ""; ttlhc = ""; ttlh = ""; hcj = ""; rslt_chng = ""; 
	rslt_hyng1 = ""; rslt_hyng2 = ""; rslt_hyng3 = ""; rslt_hyng4 = "";
	
	document.getElementById("output1").innerText += "<<원국>>..... \n";
	if (gj_nfo[1][4].substr(0,1) == "0" && gj_nfo[2][4].substr(0,1) == "0"){rt1 = "0"}else{rt1 = "1"};  //--- 연간합 통근
	if (gj_nfo[2][4].substr(0,1) == "0" && gj_nfo[3][4].substr(0,1) == "0"){rt2 = "0"}else{rt2 = "1"};  //--- 일(월)간합 통근
	if (gj_nfo[3][4].substr(0,1) == "0" && gj_nfo[4][4].substr(0,1) == "0"){rt3 = "0"}else{rt3 = "1"};  //--- 일(시)간합 통근

//------ 원국 천간/지지 합충극 check
	//------------------------------- 천간 -------------------
	//--- 합충관계를 check하여 ganhc_nfo 배열에 저장
	//--- 연간합충
	rslt0 = ""; 
	hcompchk("천간합",5,sj_yg,sj_mg,2); if (rslt != ""){rslt0 += rslt;}; 
	hcompchk("천간충",4,sj_yg,sj_mg,2); if (rslt != ""){rslt0 += rslt;}; 
	hcompchk("천간극",6,sj_yg,sj_mg,2); if (rslt != ""){rslt0 += rslt;};
	ganhc_nfo[1][3] = rslt0; document.getElementById("sj1a").innerText += ganhc_nfo[1][3];  //--- 화면양식에 연간 합충 기록
	ganhc_nfo[2][3] = rslt0;

	//--- 일간합충
	rslt0 = ""; 
	hcompchk("천간합",5,sj_dg,sj_mg,2); if (rslt != ""){rslt0 += rslt;}; 
	hcompchk("천간충",4,sj_dg,sj_mg,2); if (rslt != ""){rslt0 += rslt;}; 
	hcompchk("천간극",6,sj_dg,sj_mg,2); if (rslt != ""){rslt0 += rslt;};
	ganhc_nfo[2][4] = rslt0; document.getElementById("sj3a").innerText += ganhc_nfo[2][3] + ganhc_nfo[2][4];  //--- 화면양식에 월간 합충 기록
	ganhc_nfo[3][4] = rslt0;

	rslt0 = ""; 
	hcompchk("천간합",5,sj_dg,sj_tg,2); if (rslt != ""){rslt0 += rslt;}; 	
	hcompchk("천간충",4,sj_dg,sj_tg,2); if (rslt != ""){rslt0 += rslt;}; 
	hcompchk("천간극",6,sj_dg,sj_tg,2); if (rslt != ""){rslt0 += rslt;};
	ganhc_nfo[3][5] = rslt0; document.getElementById("sj5a").innerText += ganhc_nfo[3][4] + ganhc_nfo[3][5];  //--- 화면양식에 일간 합충 기록
	ganhc_nfo[4][5] = rslt0; document.getElementById("sj7a").innerText += ganhc_nfo[4][5];  //--- 화면양식에 시간 합충 기록

//--- ⓐ 원국 chk
	//------------------------------- 지지 -------------------
	jjhc_nfo[1][1] = sj_yj; jjhc_nfo[2][1] = sj_mj; jjhc_nfo[3][1] = sj_dj; jjhc_nfo[4][1] = sj_tj;
	wongug_chk(sj_yj,sj_mj); jjhc_nfo[1][3] += rslt; jjhc_nfo[2][3] += rslt;  //--- 연-월 합충해파형
	wongug_chk(sj_dj,sj_mj); jjhc_nfo[2][4] += rslt; jjhc_nfo[3][4] += rslt;  //--- 일-월 합충해파형 
	wongug_chk(sj_dj,sj_tj); jjhc_nfo[3][3] += rslt; jjhc_nfo[4][3] += rslt;  //--- 일-시 합충해파형 
	if ("寅巳申丑戌未".includes(sj_yj)){
		wongug_chk(sj_yj,sj_dj); if (rslt.includes("형")){jjhc_nfo[1][5] += rslt.substr(0,2) + "형"; jjhc_nfo[3][5] += rslt.substr(0,2) + "형";};  //--- 연-일 형  
		wongug_chk(sj_yj,sj_tj); if (rslt.includes("형")){jjhc_nfo[1][4] += rslt.substr(0,2) + "형"; jjhc_nfo[4][4] += rslt.substr(0,2) + "형";};  //--- 연-시 형 
	};
	if ("寅巳申丑戌未".includes(sj_mj)){
		wongug_chk(sj_mj,sj_tj); if (rslt.includes("형")){jjhc_nfo[2][5] += rslt.substr(0,2) + "형"; jjhc_nfo[4][5] += rslt.substr(0,2) + "형";};  //--- 월-시 형 
	};
	if (jjhc_nfo[1][3].includes("형")){s = "형" + jjhc_nfo[1][4].substr(2) + jjhc_nfo[1][5].substr(2); solution(s); jjhc_nfo[1][2] = rslt;  //--- 연지 합충해파를 제외한 원국일지 형 (연지)
	}else{	s = jjhc_nfo[1][4].substr(2) + jjhc_nfo[1][5].substr(2); solution(s); jjhc_nfo[1][2] = rslt;};
	if (jjhc_nfo[2][3].includes("형")){s = "형" + jjhc_nfo[2][4].substr(2) + jjhc_nfo[2][5].substr(2); solution(s); jjhc_nfo[2][2] = rslt;  //--- 연지 합충해파를 제외한 원국일지 합충형해파 (월지)
	}else{	s = jjhc_nfo[2][4].substr(2) + jjhc_nfo[2][5].substr(2); solution(s); jjhc_nfo[2][2] = rslt;};
	s = jjhc_nfo[3][3].substr(2) + jjhc_nfo[3][4].substr(2) + jjhc_nfo[3][5].substr(2); solution(s); jjhc_nfo[3][2] = rslt;  //--- 원국일지 합충형해파 (일지)
	s = jjhc_nfo[4][3].substr(2) + jjhc_nfo[4][4].substr(2) + jjhc_nfo[4][5].substr(2); solution(s); jjhc_nfo[4][2] = rslt;  //--- 원국일지 합충형해파 (시지)

	document.getElementById("sj2a").innerText += jjhc_nfo[1][3] + jjhc_nfo[1][4] + jjhc_nfo[1][5];  //--- 화면양식에 연지 합충파해 기록
	document.getElementById("sj4a").innerText += jjhc_nfo[2][3] + jjhc_nfo[2][4] + jjhc_nfo[2][5];  //--- 화면양식에 월지 합충파해 기록
	document.getElementById("sj6a").innerText += jjhc_nfo[3][3] + jjhc_nfo[3][4] + jjhc_nfo[3][5];  //--- 화면양식에 일지 합충파해 기록
	document.getElementById("sj8a").innerText += jjhc_nfo[4][3] + jjhc_nfo[4][4] + jjhc_nfo[4][5];  //--- 화면양식에 시지 합충파해 기록
	//------ 원국 hcg1 코드 생성
	if (ganhc_nfo[1][3].substr(2,1)==""){hcg1 += "----";
	}else{	hcg1 += ganhc_nfo[1][3].substr(2,1) + rt1 + "--";}; 
	hcg1 += "-";
	//--- 원국 hcg2 코드 생성
	if (ganhc_nfo[2][3].substr(2,1)=="" && ganhc_nfo[2][4].substr(2,1)==""){hcg2 += "----";
	}else{	hcg2 += ganhc_nfo[2][4].substr(2,1) + rt2 + "--";}; 
	hcg2 += "-";
	//--- 원국 hcg3 코드 생성
	if (ganhc_nfo[3][4].substr(2,1)=="" && ganhc_nfo[3][5].substr(2,1)==""){hcg3 += "----";
	}else{
		if (ganhc_nfo[3][4].substr(2,1)==""){if (sj_mg == sj_dg)	{hcg3 += "쟁" + rt2;}else{hcg3 += "--";};
		}else{	hcg3 += ganhc_nfo[3][4].substr(2,1) + rt2;};
		if (ganhc_nfo[3][5].substr(2,1)==""){if (sj_tg == sj_dg){hcg3 += "쟁" + rt3;}else{hcg3 += "--";};	
		}else{	hcg3 += ganhc_nfo[3][5].substr(2,1) + rt3;}; 
	};
	if (ganhc_nfo[2][2] == ganhc_nfo[3][2]){hcg3 += "1";}else{hcg3 += "0";};  //--- hcg3에 월지 합오행 체크 추가
    //--- 원국 hcg4 코드 생성
	if (ganhc_nfo[4][5].substr(2,1)==""){hcg4 += "----";
	}else{	hcg4 += ganhc_nfo[4][5].substr(2,1) + rt3 + "--";}; 
	hcg4 += "-";
	//=======================================

	for (i = 0; i < ca10a_ghabch.length; i++){
		//------ 연간 합충
 		if (ca10a_ghabch[i][0] == "연간" && ca10a_ghabch[i][1] == hcg1 && hcg1 != '-----'){
			sts = "연간"; document.getElementById("output1").innerText += "■" + sts + " " + hcg1 + " " + ganhc_nfo[1][3] + " " + ca10a_ghabch[i][4] +  "\n";  //--- 원국 연간합충 출력
			if (ca10a_ghabch[i][5] == "a"){ 
				document.getElementById("output1").innerText += gj_nfo[1][3] + "--- " + ca10a_ghabch[i][4] + "--( ~19세)\n";  //--- 연간충(a)-연간
				document.getElementById("output1").innerText += gj_nfo[2][3] + "--- " + ca10a_ghabch[i][4] + "--(20~38세)\n";  //--- 연간충(a)-월간
			}else{
				if (ca10a_ghabch[i][5] == "c"){n = 1;};  //--- 연간합 긍정(c)
				if (ca10a_ghabch[i][5] == "d"){n = 2;};  //--- 연간합 부정(d)

				ss_simri(gj_nfo[1][3],cgh01_sibsng_simri6chin,n); document.getElementById("output1").innerText += "◐ " + gj_nfo[1][3] + "심리( ~19세)--- " + rslt + "\n";
				ss_simri(gj_nfo[2][3],cgh01_sibsng_simri6chin,n); document.getElementById("output1").innerText += "◐ " + gj_nfo[2][3] + "심리(20~38세)--- " + rslt + "\n";
			};
			document.getElementById("output1").innerText += "--------------------------------------------------------------\n";
		};
		//------ 일간 합충
		if (ca10a_ghabch[i][0] == "일간" && ca10a_ghabch[i][1] == hcg3){  //--- 원국코드 (code1) 및 결과코드 (code2) 생성
			code2 = ca10a_ghabch[i][5];
			if (ca10a_ghabch[i][5] ==  "-" || ca10a_ghabch[i][5] ==  "b"){code1 = "-"; code1 += gj_nfo[3][4].substr(0,1); code1 += hcg3.substr(4,1); };
			if (ca10a_ghabch[i][5] > "0" && ca10a_ghabch[i][5] < "7"){code1 = code2; code1 += "-"; code1 += hcg3.substr(4,1); };
			if (ca10a_ghabch[i][5] ==  "7" || ca10a_ghabch[i][5] ==  "8"){code1 = code2; code1 += "--"; };

			if (hcg3.substr(0,4) != '----'){
				if (code2 == "1" || code2 == "2" || code2 == "3"){
					if (ganhc_nfo[3][4].includes("합")){desc = ganhc_nfo[3][4] + " " + ca10a_ghabch[i][4];
					}else{desc = ganhc_nfo[3][5] + " " + ca10a_ghabch[i][4];};
				}else{	
					if (code2 == "8"){
						if (ganhc_nfo[3][4].includes("충")){desc = ganhc_nfo[3][4] + " " + ca10a_ghabch[i][4];
						}else{desc = ganhc_nfo[3][5] + " " + ca10a_ghabch[i][4];};
					}else{	desc = ca10a_ghabch[i][4];};
				};
				result_out(code2, desc, "원국(암시)", "output1");  //--- 원국 일간합충 출력
			};
		};
	};	
	//------ new version test 원국 지지 합충형해파 결과 출력 ("output1")
	hcj1 = jjhc_nfo[1][2]; hcj2 = jjhc_nfo[2][2]; hcj3 = jjhc_nfo[3][2]; hcj4 = jjhc_nfo[4][2]; 
	ttlhc = hcj1 + hcj2 + hcj3 + hcj4; 
	johc();
};

//------ new version test 원국 지지 합충형해파 결과 출력 ("output1")
function johc(){
	txt = "원국"; sz = ""; pos_ch = "";
	if (jjhc_nfo[1][3] != ""){
		if (jjhc_nfo[1][3].includes("합") == true){chkg(sj_yj,sj_mj); rslt += "합"; yjhab("output1");};  //--- 연지합
		if (jjhc_nfo[1][3].includes("충") == true){chkg(sj_yj,sj_mj); rslt += "충"; yjchng("output1");};  //--- 연지충 
		if (jjhc_nfo[1][3].includes("해") == true){chkg(sj_yj,sj_mj); rslt += "해"; yjhae("output1");};  //--- 연지해 
		if (jjhc_nfo[1][3].includes("파") == true){chkg(sj_yj,sj_mj); rslt += "파"; yjpa("output1");};  //--- 연지파 
	};
	if (jjhc_nfo[3][4] != ""){sz = "(20~57세)---"; txt += "(암시)";
		if (jjhc_nfo[3][4].includes("합") == true){chkg(sj_dj,sj_mj); rslt += "합"; djhab("output1");};  //--- 일지합
		if (jjhc_nfo[3][4].includes("충") == true){chkg(sj_dj,sj_mj); rslt += "충"; rslt_chng += rslt; djchng("output1"); pos_ch += "2";};  //--- 일지충 
		if (jjhc_nfo[3][4].includes("해") == true){chkg(sj_dj,sj_mj); rslt += "해"; djhae(sj_mj,sj_dj,2,"output1");};  //--- 일지해 
		if (jjhc_nfo[3][4].includes("파") == true){chkg(sj_dj,sj_mj); rslt += "파"; djpa(sj_mj,sj_dj,"output1");};  //--- 일지파 
		if (rslt != ""){pos += "23"};
	};
	if (jjhc_nfo[3][3] != ""){sz = "(39세~ )---"; txt += "(암시)";
		if (jjhc_nfo[3][3].includes("합") == true){chkg(sj_dj,sj_tj); rslt += "합"; djhab("output1");};  //--- 일지합
		if (jjhc_nfo[3][3].includes("충") == true){chkg(sj_dj,sj_tj); rslt += "충"; rslt_chng += rslt; djchng("output1"); pos_ch += "4";};  //--- 일지충 
		if (jjhc_nfo[3][3].includes("해") == true){chkg(sj_dj,sj_tj); rslt += "해"; djhae(sj_dj,sj_tj,3,"output1");};  //--- 일지해 
		if (jjhc_nfo[3][3].includes("파") == true){chkg(sj_dj,sj_tj); rslt += "파"; djpa(sj_dj,sj_tj,"output1");};  //--- 일지파 
		if (rslt != ""){pos += "34"};
	};
	if (pos_ch != ""){pos_ch = "3" + pos_ch;};
	if (ttlhc.includes("형")){ if (txt.includes("(암시)") == false){txt += "(암시)";};
		johga_chk(1,0,0); if (rslt.length == 3){posd = pos; rslt = "寅巳申형"; rslt_hyng1 += rslt; johha_chk(1,"output1");
		}else{	if (rslt.length == 2){posd = pos; chkg(rslt.substr(0,1), rslt.substr(1,1)); rslt += "형"; rslt_hyng1 += rslt; johha_chk(1,"output1");};};  //--- 지지형(삼형)
		johgb_chk(1,0,0); if (rslt.length == 3){posd = pos; rslt = "丑戌未형"; rslt_hyng2 += rslt; johha_chk(1,"output1");
		}else{if (rslt.length == 2){posd = pos; chkg(rslt.substr(0,1), rslt.substr(1,1)); rslt += "형"; rslt_hyng2 += rslt; johhb_chk(1,"output1");};};  //--- 지지형(붕형)
		johgc_chk(1,0,0); if (rslt.length > 1){posd = pos; rslt = "子卯형"; rslt_hyng3 += rslt; johhc_chk(1,"output1");};  //--- 지지형(상형)
		johgd_chk(1,0,0); if (rslt.length > 1){posd = pos; rslt0 += "자형"; rslt_hyng4 += rslt0; johhd_chk(1,"output1");};  //--- 지지형(자형)
	};
};

function johga_chk(a,m,n){
//------
	rslt = ""; arr = ["寅","巳","申"]; pos = ""; let jjh_unsng = ""; sjj = "";
	if (a == 1){  //--- 원국
		if (arr.includes(sj_yj)){pos += "1"; if (rslt.includes(sj_yj) == false){rslt += sj_yj;};};
		if (arr.includes(sj_mj)){pos += "2"; if (rslt.includes(sj_mj) == false){rslt += sj_mj;};};
		if (arr.includes(sj_dj)){pos += "3"; if (rslt.includes(sj_dj) == false){rslt += sj_dj;};};
		if (arr.includes(sj_tj)){pos += "4"; if (rslt.includes(sj_tj) == false){rslt += sj_tj;};};
		posd = pos;
	};
	if (a == 2){  //--- 행운
		if (m == 1){sjj = sj_yj}; if (m == 2){sjj = sj_mj}; if (m == 3){sjj = sj_dj}; if (m == 4){sjj = sj_tj}; 
		if (sjj != hnj && arr.includes(sjj) && arr.includes(hnj)){pos += String(n-1); rslt += sjj + hnj; rslt0 += rslt;};
		posd = pos;  
	};
};

function johgb_chk(a,m,n){
//------
	rslt = ""; arr = ["丑","戌","未"]; pos = "";
	if (a == 1){  //--- 원국
		if (arr.includes(sj_yj)){pos += "1"; if (rslt.includes(sj_yj) == false){rslt += sj_yj;};};
		if (arr.includes(sj_mj)){pos += "2"; if (rslt.includes(sj_mj) == false){rslt += sj_mj;};};
		if (arr.includes(sj_dj)){pos += "3"; if (rslt.includes(sj_dj) == false){rslt += sj_dj;};};
		if (arr.includes(sj_tj)){pos += "4"; if (rslt.includes(sj_tj) == false){rslt += sj_tj;};};
		posd = pos;
	};
	if (a == 2){  //--- 행운
		if (m == 1){sjj = sj_yj}; if (m == 2){sjj = sj_mj}; if (m == 3){sjj = sj_dj}; if (m == 4){sjj = sj_tj}; 
		if (sjj != hnj && arr.includes(sjj) && arr.includes(hnj)){pos += String(n-1); rslt += sjj + hnj; rslt0 += rslt;};
		posd = pos;  
	};
};

function johgc_chk(a,m,n){
//------
	rslt = ""; arr = ["子","卯"]; pos = "";
	if (a == 1){  //--- 원국
		if (arr.includes(sj_yj) && arr.includes(sj_mj) && sj_yj != sj_mj){	pos += "12"; if (rslt.includes("子卯") == false){rslt += "子卯";};};
		if (arr.includes(sj_mj) && arr.includes(sj_dj) && sj_mj != sj_dj){ pos += "23"; if (rslt.includes("子卯") == false){rslt += "子卯";};};
		if (arr.includes(sj_dj) && arr.includes(sj_tj) && sj_dj != sj_tj){pos += "34"; if (rslt.includes("子卯") == false){rslt += "子卯";};};
		posd = pos;  
	};
	if (a == 2){  //--- 행운
		if (m == 1){sjj = sj_yj}; if (m == 2){sjj = sj_mj}; if (m == 3){sjj = sj_dj}; if (m == 4){sjj = sj_tj}; 
		if (sjj != hnj && arr.includes(sjj) && arr.includes(hnj)){pos += String(n-1); rslt = sjj + hnj + "형";};
		rslt0 += rslt;	posd = pos;  
	};
};

function johgd_chk(a,m,n){
//------
	arr = ["辰","午","酉","亥"]; pos = "";
	rslt = "";
	if (a == 1){  //--- 원국
		if (arr.includes(sj_yj) && sj_yj == sj_mj){pos += "12"; rslt += sj_yj + sj_mj + "형"; };
		if (arr.includes(sj_mj) && sj_mj == sj_dj){	pos += "23"; rslt += sj_mj + sj_dj + "형"; };
		if (arr.includes(sj_dj) && sj_dj == sj_tj){pos += "34"; rslt += sj_dj + sj_tj + "형"; };
		rslt0 = rslt;	posd = pos;  
	};
	if (a == 2){  //--- 행운
		if (m == 1){sjj = sj_yj}; if (m == 2){sjj = sj_mj}; if (m == 3){sjj = sj_dj}; if (m == 4){sjj = sj_tj}; 
		if (sjj == hnj && arr.includes(hnj)){pos += String(n-1); rslt = sjj + hnj + "형";};
		rslt0 = rslt;	posd = pos;  
	};
};

function solution(s) {
	rslt = "";
	for (let i = 0; i < s.length; i++) {
		if (s.indexOf(s[i]) === i) rslt += s[i];
	};
};

//======= 지지 원국/행운 합충형해파 체크 함수 ====== wongug_chk(a,b);  a: base, b: target
function wongug_chk(a,b){
	rslt = ""; subj = a;
	temp11 = jjref.filter(isFind);
	idx = temp11[0].lastIndexOf(b);
	if (idx < 1){
		rslt = "";
	}else{
		chkg(a,b); 
		rslt += jjref[0][idx];
	};
};

function chkg(a,b){
	if (testg.includes(a+b)){
		rslt = a + b;
	}else{
		rslt = b + a;
	};
};

//======================
function spclcarac(){
	//--- 일간 특성 출력(output0) 
	subj = sj_dg; temps0 = a_gan.filter(isFind);
	$('#output0').append("■■  나는 어떤 사람인가? </br></br>");
	$('#output0').append("■ 1 일간: "); 
	$('#output0').append(
		$('<span>').prop({
			className: 'spcs css_b1',
			innerHTML: subj + "__ " + temps0[0][1] + ".. " + temps0[0][2] + ".. " + temps0[0][4]
		})
	);
	$('#output0').append("</br>");
	$('#output0').append(
		$('<div>').prop({
			id: 'css_b1',
			innerHTML: "◐ 특성: " + temps0[0][6] + "</br>◐ 질병: " + temps0[0][7],
			className: 'txcb'
		})
	);
	$('#output0').append("--------------------------------------------------------------</br>");

	//--- 지지 특성 출력(output0) 
	subj = sj_dj; temps0 = a_jiji.filter(isFind);
	$('#output0').append("■ 2 일지: ");
	$('#output0').append(
		$('<span>').prop({
			className: 'spcs css_b2',
			innerHTML: subj + "__ " + temps0[0][1]
		})
	);
	$('#output0').append("</br>");
	$('#output0').append(
		$('<div>').prop({
			id: 'css_b2',
			innerHTML: "◐ 특성: " + temps0[0][4] + "</br>◐ 질병: " + temps0[0][5] + "</br>◐ 직업: " + temps0[0][6],
			className: 'txcb'
		})
	);
	$('#output0').append("--------------------------------------------------------------</br>");

	//--- 일지십성/월지십성 특성 출력(output0) 
	sibsng(sj_dg,"",sj_dj); subj = js_titl; temps0 = a_ssng.filter(isFind);
	$('#output0').append("■ 3 일지십성: ");
	$('#output0').append(
		$('<span>').prop({
			className: 'spcs css_b3',
			innerHTML: subj + "__ " + sj_dg + sj_dj
		})
	);
	$('#output0').append("</br>");
	$('#output0').append(
		$('<div>').prop({
			id: 'css_b3',
			innerHTML: "- " + temps0[0][2] + "</br>◐ 장점: " + temps0[0][3] + "</br>◐ 단점: " + temps0[0][4] + "</br>◐ 태과: " + temps0[0][5] + "</br>◐ 불급: " + temps0[0][6] + "</br>◐ 충: " + temps0[0][7],
			className: 'txcb'
		})
	);
	$('#output0').append("--------------------------------------------------------------</br>");

	//--- 십이운성 특성 출력(output0) 
	unsng(sj_dg,sj_dj); subj = js_titl; temps0 = a_unsng.filter(isFind);
	$('#output0').append("■ 4 십이운성: ");
	$('#output0').append(
		$('<span>').prop({
			className: 'spcs css_b4',
			innerHTML: subj + "__ " + sj_dg + sj_dj
		})
	);
	$('#output0').append("</br>");
	$('#output0').append(
		$('<div>').prop({
			id: 'css_b4',
			innerHTML: "- " + temps0[0][5] + "</br>",
			className: 'txcb'
		})
	);
	$('#css_b4').append("--------------------------------------------------------------</br>");
	
	//--- 일지 십성/십이운성 특성 출력(output0) 
	sibsTugsin(gj_nfo[3][7]); let dj_6sin = hs_titl; let dj_n = null;
	if (dj_6sin == "비겁"){dj_n = 7;}; if (dj_6sin == "식상"){dj_n = 8;}; if (dj_6sin == "재성"){dj_n = 9;}; if (dj_6sin == "관성"){dj_n = 10;}; if (dj_6sin == "인성"){dj_n = 11;};
	subj = gj_nfo[3][8]; temps0 = a_unsng.filter(isFind);
	$('#css_b4').append("◐ 육신/운성: " + dj_6sin + "__" + subj + "</br> - " + temps0[0][dj_n] + " </br>");
	$('#css_b4').append("--------------------------------------------------------------</br>");
	unsng(sj_dg,sj_yj); subj = js_titl; temps0 = a_unsng.filter(isFind);
	$('#css_b4').append("◐ 연지: " + subj + "__ " + sj_yj + "</br>  - " + temps0[0][3] + " </br>");
	unsng(sj_dg,sj_mj); subj = js_titl; temps0 = a_unsng.filter(isFind);
	$('#css_b4').append("◐ 월지: " + subj + "__ " + sj_mj + "</br>  - " + temps0[0][4] + " </br>");
	unsng(sj_dg,sj_tj); subj = js_titl; temps0 = a_unsng.filter(isFind);
	if (sjtx != "x"){ $('#css_b4').append("◐ 시지: " + subj + "__ " + sj_tj + "</br>  - " + temps0[0][6] + " </br>");};
	$('#output0').append("--------------------------------------------------------------</br>");

	//--- 일주론 출력(output0) 
	subj = sj_dg + sj_dj; temps0 = a_ilju.filter(isFind);
	st= temps0[0][3].indexOf('여자 :');
	if (gendr.substr(0,1)=="남"){adt = 6; lks = temps0[0][3].substr(4,st-5);}; 
	if (gendr.substr(0,1)=="여"){adt = 7; lks = temps0[0][3].substr(st+4);};
	$('#output0').append("■ 5 일주: ");
	$('#output0').append(
		$('<span>').prop({
			className: 'spcs css_b5',
			innerHTML: subj
		})
	);
	$('#output0').append("</br>");
	$('#output0').append(
		$('<div>').prop({
			id: 'css_b5',
			innerHTML: "- " + temps0[0][1] + "</br> - " + temps0[0][2] + "</br> ◐ 외모: " + lks + "</br> ◐ 직업: " + temps0[0][4] + "</br> ◐ 결혼: " + temps0[0][5] + "</br> - " + temps0[0][adt] + "</br> ◐ 가족: " + temps0[0][8] + "</br> ◐ 비고: " + temps0[0][9],
			className: 'txcb'
		})
	);
	$('#output0').append("--------------------------------------------------------------</br>");
	$("#output0").on("click", "span", function(){ 
		disp("#"+$(this).attr("class").substr(5),"",""); 
	}); 
};

//■■■■■■■■■■■■■■■■■■■■■■■■
//======= 행운 년/월/일 변경시 ======
$("#hunDate").change(function(){
	hangun();
});

//======= 행운 계산 검토 함수 ======
function hangun(){	
	hn_lg = ""; hn_yg = ""; hn_mg = ""; hn_dg = ""; hn_tg = ""; hn_lj = ""; hn_yj = ""; hn_mj = ""; hn_dj = ""; hn_tj = ""; ageL = 0; ageY = 0; rslt0 = ""; hnj = "";
	$('.hun1').empty(); $('.hun2').empty(); $('.hun3').empty();
	$('#output3').empty(); $('#outputb').empty(); $('#ssalb').empty();
	$('#output4').empty(); $('#output5').empty();
	hunD = document.getElementById('hunDate').value;  //--- 행운 일자
	hunD = hunD + " 04:30"; vwyr = Number(hunD.substr(0,4));
	//----- 대운
	for (i=1; i<15; i++){
		if (vwyr-birth1.getFullYear()+1 >= age+(i-1)*10 && vwyr-birth1.getFullYear()+1 < age+i*10){
			hn_lg = hun_list[i][1]; hn_lj = hun_list[i][5]; ageL = age + (i - 1) * 10;
			document.getElementById("hunL2").innerText += "(" + ageL + ")\n";
			document.getElementById("hunL1").innerText += hn_lg + "\n";
			document.getElementById("hunL2").innerText += hun_list[i][3] + " " + hun_list[i][2] + "\n";
			document.getElementById("hunL1").innerText += hn_lj + "\n";
			document.getElementById("hunL2").innerText += "\n" + hun_list[i][7] + " " + hun_list[i][6] + " " + hun_list[i][8] + " \n";
		};
	};
	if (hunD >= ca08_monthstart[1][5] && hunD < ca08_monthstart[ca08_monthstart.length-1][5]){	
		convrtsj(hunD); hunD1 = rqD1;
		subj = tsj1; temp = gan.filter(isFindj); hn_yg = temp[0][0]; hygoh = temp[0][4].substr(1,2);  //--- 한글 행운간지를 한자로 바꿈
		subj = tsj2; temp = jiji.filter(isFindj); hn_yj = temp[0][0]; hyjoh = temp[0][4].substr(1,2);  //--- 한글 행운간지를 한자로 바꿈
		subj = tsj3; temp = gan.filter(isFindj); hn_mg = temp[0][0]; hmgoh = temp[0][4].substr(1,2);  //--- 한글 행운간지를 한자로 바꿈
		subj = tsj4; temp = jiji.filter(isFindj); hn_mj = temp[0][0]; hmjoh = temp[0][4].substr(1,2);  //--- 한글 행운간지를 한자로 바꿈
		subj = tsj5; temp = gan.filter(isFindj); hn_dg = temp[0][0]; hdgoh = temp[0][4].substr(1,2);  //--- 한글 행운간지를 한자로 바꿈
		subj = tsj6; temp = jiji.filter(isFindj); hn_dj = temp[0][0]; hdjoh = temp[0][4].substr(1,2);  //--- 한글 행운간지를 한자로 바꿈
		subj = tsj7; temp = gan.filter(isFindj); hn_tg = temp[0][0]; htgoh = temp[0][4].substr(1,2);  //--- 한글 행운간지를 한자로 바꿈
		subj = tsj8; temp = jiji.filter(isFindj); hn_tj = temp[0][0]; htjoh = temp[0][4].substr(1,2);  //--- 한글 행운간지를 한자로 바꿈
	}else{
		hyr = (vwyr - 1864) % 60; idx = hyr % 10 + 1; hn_yg = gan[idx][0]; hygoh = gan[idx][4].substr(1,2); idx = hyr % 12 + 1; hn_yj = jiji[idx][0]; hyjoh = jiji[idx][4].substr(1,2);
		hmo = (hyr % 5) * 12 + Number(hunD.substr(5,2)); idx = hmo % 10 + 1; hn_mg = gan[idx][0]; hmgoh = gan[idx][4].substr(1,2); idx = hmo % 12 + 1; hn_mj = jiji[idx][0]; hmjoh = jiji[idx][4].substr(1,2);
		hda = Math.ceil((new Date(hunD).getTime() - new Date('1908-01-10').getTime()) / 86400000) % 60; idx = hda % 10 + 1; hn_dg = gan[idx][0]; hdgoh = gan[idx][4].substr(1,2); idx = hda % 12 + 1; hn_dj = jiji[idx][0]; hdjoh = jiji[idx][4].substr(1,2);
	};
	hgj_nfo[1][1] = hn_lg; hgj_nfo[1][5] = hn_lj; hgj_nfo[2][1] = hn_yg; hgj_nfo[2][5] = hn_yj; hgj_nfo[3][1] = hn_mg; hgj_nfo[3][5] = hn_mj; hgj_nfo[4][1] = hn_dg; hgj_nfo[4][5] = hn_dj; 
	mktable(1,hn_lg,hn_lj,hgj_nfo);  //--- 행운 테이블(hgj_nfo) 생성
	mktable(2,hn_yg,hn_yj,hgj_nfo);
	mktable(3,hn_mg,hn_mj,hgj_nfo);
	mktable(4,hn_dg,hn_dj,hgj_nfo);
//	mktable(5,hn_tg,hn_tj,hgj_nfo);
	hn_ganji = hn_lg + hn_lj + hn_yg + hn_yj + hn_mg + hn_mj + hn_dg + hn_dj;

	if (ganhc_nfo[1][3].substr(2,1) != "합" && ganhc_nfo[1][3].substr(2,1) != "충"){habchk2(1);};  //--- 원국에 연간합충이 없으면 행운 check (천간합 흉화)
	if (	(ganhc_nfo[2][3].substr(2,1) != "합" && ganhc_nfo[2][3].substr(2,1) != "충") ||	(ganhc_nfo[2][4].substr(2,1) == "합" || ganhc_nfo[2][4].substr(2,1) == "충")){habchk2(2);};   //--- 월간에 연간합충이 없거나 (천간합 흉화) 일간합충이 있으면 행운 check (일간 행운)
	habchk2(3);  //--- 행운 check (일간 행운)
	habchk2(4);  //--- 시간에 일간합충이 있거나 (일간 행운) 없으면 (천간합 흉화) 행운 check
//---------------------------------------------------------------	
	if (jjhc_nfo[1][2] != ""){
		wongug_chk(sj_yj,hn_lj); jjhc_nfo[1][6] = rslt; wongug_chk(sj_yj,hn_yj); jjhc_nfo[1][7] = rslt; 
		wongug_chk(sj_yj,hn_mj); jjhc_nfo[1][8] = rslt; wongug_chk(sj_yj,hn_dj); jjhc_nfo[1][9] = rslt;
	};
	if (jjhc_nfo[2][2] != ""){
		wongug_chk(sj_mj,hn_lj); jjhc_nfo[2][6] = rslt; wongug_chk(sj_mj,hn_yj); jjhc_nfo[2][7] = rslt; 
		wongug_chk(sj_mj,hn_mj); jjhc_nfo[2][8] = rslt; wongug_chk(sj_mj,hn_dj); jjhc_nfo[2][9] = rslt;
	};
	wongug_chk(sj_dj,hn_lj); jjhc_nfo[3][6] = rslt; wongug_chk(sj_dj,hn_yj); jjhc_nfo[3][7] = rslt; 
	wongug_chk(sj_dj,hn_mj); jjhc_nfo[3][8] = rslt; wongug_chk(sj_dj,hn_dj); jjhc_nfo[3][9] = rslt;
	if (jjhc_nfo[4][2] != ""){
		wongug_chk(sj_tj,hn_lj); jjhc_nfo[4][6] = rslt; wongug_chk(sj_tj,hn_yj); jjhc_nfo[4][7] = rslt; 
		wongug_chk(sj_tj,hn_mj); jjhc_nfo[4][8] = rslt; wongug_chk(sj_tj,hn_dj); jjhc_nfo[4][9] = rslt;
	};
//---------------------------------------------------------------
	outptt();  //--- 참조용 테이블 화면출력 --- "output4" & "output5"
	//----- 연운
	ageY = vwyr - birth1.getFullYear() + 1;
	document.getElementById("hunY2").innerText += vwyr + " (" + ageY + ")\n";
	document.getElementById("hunY1").innerText += hn_yg + "\n";
	document.getElementById("hunY2").innerText += hgj_nfo[2][3] + " " + hgj_nfo[2][2] + "\n";
	document.getElementById("hunY1").innerText += hn_yj + "\n";
	document.getElementById("hunY2").innerText += "\n" + hgj_nfo[2][7] + " " + hgj_nfo[2][6] + " " + hgj_nfo[2][8] + "\n";
	//----- 월운
	document.getElementById("hunM2").innerText += hunD.substr(0,7) + "\n";
	document.getElementById("hunM1").innerText += hn_mg + "\n";
	document.getElementById("hunM2").innerText += hgj_nfo[3][3] + " " + hgj_nfo[3][2] + "\n";
	document.getElementById("hunM1").innerText += hn_mj + "\n";
	document.getElementById("hunM2").innerText += "\n" + hgj_nfo[3][7] + " " + hgj_nfo[3][6] + " " + hgj_nfo[3][8] + "\n";
	//----- 일운
	document.getElementById("hunD2").innerText += hunD.substr(0,10) + "\n";
	document.getElementById("hunD1").innerText += hn_dg + "\n";
	document.getElementById("hunD2").innerText += hgj_nfo[4][3] + " " + hgj_nfo[4][2] + "\n";
	document.getElementById("hunD1").innerText += hn_dj + "\n";
	document.getElementById("hunD2").innerText += "\n" + hgj_nfo[4][7] + " " + hgj_nfo[4][6] + " " + hgj_nfo[4][8] + "\n";

	document.getElementById("output3").innerText += "<<행운 운세분석>>..... \n";
	hanal(1,hn_lg,hn_lj,hn_yg,hn_yj); document.getElementById("output3").innerText += vwyr + "(" + ageY + ") " + hv8 + "... 연운: (" + hn_yg + hn_yj + ") " + hv10 + "- " + hv9 + "\n"; hv10a = "연운: " + hv10;
	hanal(2,hn_yg,hn_yj,hn_mg,hn_mj); document.getElementById("output3").innerText += hunD.substr(0,7) + "- " + hv8 + "... 월운: (" + hn_mg + hn_mj + ") " + hv10 + "- " + hv9 + "\n"; hv10b = "월운: " + hv10;
	hanal(3,hn_mg,hn_mj,hn_dg,hn_dj); document.getElementById("output3").innerText += hunD.substr(2,8) + " " + hv8 + "... 일운: (" + hn_dg + hn_dj + ") " + hv10 + "- " + hv9 + "\n"; hv10c = "일운: " + hv10;
	document.getElementById("output3").innerText += "-----------------------------------------------------------------------------------\n";

	document.getElementById("output3").innerText += "<<행운결과>>..... \n";
	ganhn();
	jijihn();
	sinsalhn();
};

//■■■■■■■■■■■■■■■■■■■■
//======= 행운 신살 description =======
let sinsaltxt1 = ""; let snsal1 = [];
function sinsalhn_out(csno1, sinsaltxt1, g, h, a, b){
	$("#"+csno1).empty();
	snsal1 = sinsaltxt1.split(" ");
	for (i=0; i<snsal1.length; i++){
		if (snsal1[i] != ""){
			subj = snsal1[i]; temps2 = sinsal_gen.filter(isFindx); sinsal_nfo[g][h] += subj + " ";
			document.getElementById(csno1).innerText += "◐ " + temps2[0][0] + "..... " ;
			if (temps2[0][1] != ""){document.getElementById(csno1).innerText += temps2[0][1] + "\n";};
			if (temps2[0][4] != ""){document.getElementById(csno1).innerText += temps2[0][4] + "\n";};
			if (temps2[0][2] != "" && gendr.substr(0,1) == "남"){document.getElementById(csno1).innerText += temps2[0][2] + "\n";};
			if (temps2[0][3] != "" && gendr.substr(0,1) == "여"){document.getElementById(csno1).innerText += temps2[0][3] + "\n";};
			if (subj=="원진"){wonjin(csno1, g, h, a, b);}; if (subj=="귀문"){guimun(csno1, g, h, a, b);};
		};
	};
};

//======= 행운 신살 조회 =======
async function sinsalhn(){
	csno1 = ""; cssn1 = 1; sinsalh_tlist = "";
	for (i=1; i<9; i++){  //--- 변경에 앞서 기존기록 비우기 (행운 영역)
		for (j=6; j<11; j++){sinsal_nfo[i][j] = "";};
	};
	$('#outputb').append("■■  (행운) 신살 _____ </br></br>");
	await sinsal01(sj_dg,hn_lj,sinsal_list1,"da03_dg_jj-dg_hlyj","#outputb","hunL3",3,6); //--- 신살 체크3 -------------------
	await sinsal01(sj_dg,hn_yj,sinsal_list1,"da03_dg_jj-dg_hlyj","#outputb","hunY3",3,7); //--- 신살 체크3 -------------------
	await sinsal01(sj_dg,hn_lj,sinsal_list1,"da05_dg_tj-dg_hj","#outputb","hunL3",3,6); //--- 신살 체크5 -------------------
	await sinsal01(sj_dg,hn_yj,sinsal_list1,"da05_dg_tj-dg_hj","#outputb","hunY3",3,7); //--- 신살 체크5 -------------------
	await sinsal01(sj_dg,hn_mj,sinsal_list1,"da05_dg_tj-dg_hj","#outputb","hunM3",3,8); //--- 신살 체크5 -------------------
	await sinsal01(sj_dg,hn_dj,sinsal_list1,"da05_dg_tj-dg_hj","#outputb","hunD3",3,9); //--- 신살 체크5 -------------------
	await sinsal01(sj_dg,hn_lj,sinsal_list1,"da07_gj_dgj-dg_hj","#outputb","hunL3",3,6); //--- 신살 체크7 -------------------
	await sinsal01(sj_dg,hn_yj,sinsal_list1,"da07_gj_dgj-dg_hj","#outputb","hunY3",3,7); //--- 신살 체크7 -------------------
	await sinsal01(sj_dg,hn_mj,sinsal_list1,"da07_gj_dgj-dg_hj","#outputb","hunM3",3,8); //--- 신살 체크7 -------------------
	await sinsal01(sj_dg,hn_dj,sinsal_list1,"da07_gj_dgj-dg_hj","#outputb","hunD3",3,9); //--- 신살 체크7 -------------------
	await sinsal01(hn_lg,hn_lj,sinsal_list1,"da08_gj_dgj-hgj","#outputb","hunL3",8,6); //--- 신살 체크8 -------------------
	await sinsal01(hn_yg,hn_yj,sinsal_list1,"da08_gj_dgj-hgj","#outputb","hunY3",8,7); //--- 신살 체크8 -------------------
	await sinsal01(hn_mg,hn_mj,sinsal_list1,"da08_gj_dgj-hgj","#outputb","hunM3",8,8); //--- 신살 체크8 -------------------
	await sinsal01(hn_dg,hn_dj,sinsal_list1,"da08_gj_dgj-hgj","#outputb","hunD3",8,9); //--- 신살 체크8 -------------------
	await sinsal01(hn_lg,hn_lj,sinsal_list1,"da12_gj_gj-hgj","#outputb","hunL3",8,6); //--- 신살 체크12 -------------------
	await sinsal01(hn_yg,hn_yj,sinsal_list1,"da12_gj_gj-hgj","#outputb","hunY3",8,7); //--- 신살 체크12 -------------------
	await sinsal01(hn_mg,hn_mj,sinsal_list1,"da12_gj_gj-hgj","#outputb","hunM3",8,8); //--- 신살 체크12 -------------------
	await sinsal01(hn_dg,hn_dj,sinsal_list1,"da12_gj_gj-hgj","#outputb","hunD3",8,9); //--- 신살 체크12 -------------------
	await sinsal01(sj_dg,hn_yj,sinsal_list1,"da13_-dg_hyj","#outputb","hunY3",3,7); //--- 신살 체크13 -------------------
//------------------------------
	await sinsal01(sj_dj,hn_lj,sinsal_list1,"db01_dj_jj-dj_hj","#outputb","hunL3",7,6); //--- 신살 체크1 -------------------
	await sinsal01(sj_dj,hn_yj,sinsal_list1,"db01_dj_jj-dj_hj","#outputb","hunY3",7,7); //--- 신살 체크1 -------------------
	await sinsal01(sj_dj,hn_mj,sinsal_list1,"db01_dj_jj-dj_hj","#outputb","hunM3",7,8); //--- 신살 체크1 -------------------
	await sinsal01(sj_dj,hn_dj,sinsal_list1,"db01_dj_jj-dj_hj","#outputb","hunD3",7,9); //--- 신살 체크1 -------------------
	await sinsal01(sj_dj,hn_lj,sinsal_list1,"db02_dj_mtj-dj_hj","#outputb","hunL3",7,6); //--- 신살 체크2 -------------------
	await sinsal01(sj_dj,hn_yj,sinsal_list1,"db02_dj_mtj-dj_hj","#outputb","hunY3",7,7); //--- 신살 체크2 -------------------
	await sinsal01(sj_dj,hn_mj,sinsal_list1,"db02_dj_mtj-dj_hj","#outputb","hunM3",7,8); //--- 신살 체크2 -------------------
	await sinsal01(sj_dj,hn_dj,sinsal_list1,"db02_dj_mtj-dj_hj","#outputb","hunD3",7,9); //--- 신살 체크2 -------------------
	await sinsal01(sj_dj,hn_lj,sinsal_list1,"db04_dj_ymtj-dj_hj","#outputb","hunL3",7,6); //--- 신살 체크4 -------------------
	await sinsal01(sj_dj,hn_yj,sinsal_list1,"db04_dj_ymtj-dj_hj","#outputb","hunY3",7,7); //--- 신살 체크4 -------------------
	await sinsal01(sj_dj,hn_mj,sinsal_list1,"db04_dj_ymtj-dj_hj","#outputb","hunM3",7,8); //--- 신살 체크4 -------------------
	await sinsal01(sj_dj,hn_dj,sinsal_list1,"db04_dj_ymtj-dj_hj","#outputb","hunD3",7,9); //--- 신살 체크4 -------------------
	await sinsal01(sj_dj,hn_yj,sinsal_list1,"db05_dj_ymtj-dj_hyj","#outputb","hunY3",7,7); //--- 신살 체크5 -------------------
	await sinsal01(sj_mj,hn_yj,sinsal_list1,"db08_mj_ydtj-mj_hyj","#outputb","hunY3",6,7); //--- 신살 체크8 -------------------
	await sinsal01(sj_yj,hn_yj,sinsal_list1,"db09_-yj_hyj","#outputb","hunY3",5,7); //--- 신살 체크9 -------------------
	await pngduh(2,10); //--- 평두
	await chnrjmh(3,10); //--- 천라지망
	await bogeumh(6,10); //--- 복음
	await baneumh(7,10); //--- 반음
	$("#outputb").on("click", "span", function(){ 
		disp("#"+$(this).attr("class").substr(5),"",""); 
	}); 
};

//========== 신살 종류별 행운체크 ==============
	let csno1 = ""; let cssn1 = 1;
function sinsal01(a,b,c,f,d,e,g,h){ //=== a: base, b: target, c: list, d: destin, e: destin2
	return new Promise(function (resolve, reject){
		//========== 배열 영역 (frames) ======================
		let sslist1 = $.map(c, function(element, index) {
			if (element[13] == f) {
				return [element]
			};
		});
		subj = a; temps2 = sslist1.filter(isFind); sinsaltxt1 = "";
		idx = c[0].lastIndexOf(b); sinsaltxt1 = temps2[0][idx];
		if (sinsaltxt1 != ""){
			sinsalh_tlist += sinsaltxt1 + " ";
			apnd01("css_c", "spct ", sinsaltxt1, d);    
			$(d).append("________ " + a + "___ " + b + "________ " + f + "</br>");
			apnd02(csno1, "txcc", sinsaltxt1, d, g, h, a, b); 
			document.getElementById(e).innerText += sinsaltxt1 + "\n";  //----- 화면 신살란 기록
		};
		resolve();
	});
};

//----------- <span></span> ------------------------
function apnd01(css, cla, sin, d){  //--- a: prefix, b: span_class, c: sinsaltxt1, d: destin
	csno1 = css + cssn1;
	$(d).append("■ ");
	$(d).append(
		$('<span>').prop({
			className: cla + csno1,
			innerHTML: sin
		})
	);
};

//----------- <div></div> ------------------------
function apnd02(idn, clb, sin, d, g, h, a, b){  //--- a: csno1, b: div_class, c: sinsaltxt1, d: destin
	$(d).append(
		$('<div>').prop({
			id: idn,
			innerHTML: 'description.....',
			className: clb
		})
	);
	sinsalhn_out(idn, sin, g, h, a, b);
	$(d).append("--------------------------------------------------------------</br>");
	cssn1 += 1;
};

//--- 참조용 테이블 화면출력 --- "output4" & "output5"
function outptt(){
	ptt(gj_nfo,"gj_nfo : 천간지지","#output4");
	ptt(hun_list,"hun_list : 대운","#output4");
	ptt(hgj_nfo,"hgj_nfo : 행운간지","#output5");
	ptt(ganhc_nfo,"ganhc_nfo : 천간합충","#output5");
	ptt(jjhc_nfo,"jjhc_nfo : 지지합충형해파","#output5");
	ptt(sinsal_nfo,"sinsal_nfo : 신살","#output5");
};

//--- "output4" & "output5" 출력 양식 작성하는 함수
let out_string = ""; let rda = "";
function ptt(a,b,destin){
	$( function() {
		out_string = ""; rda = "";
		out_string = "<span class='rdat'>" + b + "</span><br/>";
		out_string += "<table>";
		for (i=0; i<a.length; i++){
			if (a[i].length>12){rda = "rdat"; rda0 = $(".rdat0"); rda1 = $(".rdat1"); rda2 = $(".rdat2");
			}else{	rda = "rdau"; rda0 = $(".rdau0"); rda1 = $(".rdau1"); rda2 = $(".rdau2");};
			out_string += "<tr>";
			for (j=0; j<a[i].length; j++){
				if (i==0){
					if (j==0){
						out_string += "<td class='" + rda + "0'>" + a[i][j];
					}else{
						if (j==a[i].length-1){
							out_string += "</td><td class='" + rda + "2'>" + a[i][j];
						}else{
							out_string += "</td><td class='" + rda + "0'>" + a[i][j];
						};
					};
				}else{
					if (j==0){
						out_string += "<td class='" + rda + "1'>" + a[i][j];
					}else{
						if (j==a[i].length-1){
							out_string += "</td><td class='" + rda + "2'>" + a[i][j];
						}else{
							out_string += "</td><td class='" + rda + "1'>" + a[i][j];
						};
					};
				};
				if (a[i][j]==""){out_string += "-";};
			};
			out_string += "</tr>";
		};
		out_string += "</table>";
		$(destin).append(out_string);
	});
};

let txt = ""; let txt2 = ""; let txt3 = "";
//--- ⓓ 행운 chk ---------- 지지 행운 합충형해파
async function jijihn(){
	smry = ""; 
	await jjhn(3,6); 
	await jjhn(3,7); 
	await jjhn(3,8); 
	await jjhn(3,9); 
	if (jjhc_nfo[1][2] != ""){
		await jjhn(1,6); 
		await jjhn(1,7); 
		await jjhn(1,8); 
		await jjhn(1,9);
	};
	if (jjhc_nfo[2][2] != ""){
		await jjhn(2,6); 
		await jjhn(2,7); 
		await jjhn(2,8); 
		await jjhn(2,9);
	};
	if (jjhc_nfo[4][2] != ""){
		await jjhn(4,6); 
		await jjhn(4,7); 
		await jjhn(4,8); 
		await jjhn(4,9);
	}; 
}; 

//-------- 지지 행운 합충형해파(개별)
function jjhn(m,n){
	return new Promise(function (resolve, reject){
		hncd = ""; texstr = jjhc_nfo[m][n]; // txt2 = "";
		if (texstr != ""){	hncd = texstr.substr(2);};   //--- 행운 코드 생성
		hcj = jjhc_nfo[m][2]; //--- (연월일시)지 원국 합충형해파
		if (hcj != ""){
			for (l=0; l<hcj.length; l++){  //--- 원국 코드마다 실행
				if (hncd != ""){
					for (j=0; j<hncd.length; j++){  //--- 행운 코드마다 실행

						if (n == 6){txt2 = "대운"; txt3 = "(암시) "; hnj = hn_lj; 
							if (hcj.includes(hncd.substr(j,1)) == false){hcj += hncd.substr(j,1);};}; 
						if (n == 7){txt2 = hv10a; hnj = hn_yj;
							if (hcj.includes(hncd.substr(j,1))){txt3 = "(실행) ";
							}else{	txt3 = "(암시) "; hcj += hncd.substr(j,1);};}; 
						if (n == 8){txt2 = hv10b; hnj = hn_mj;
							if (hcj.includes(hncd.substr(j,1))){txt3 = "(실행) ";
							}else{	txt3 = "(암시) "; hcj += hncd.substr(j,1);};}; 
						if (n == 9){txt2 = hv10c; hnj = hn_dj;
							if (hcj.includes(hncd.substr(j,1))){txt3 = "(실행) ";
							}else{	txt3 = "(암시) "; hcj += hncd.substr(j,1);};}; 
						txt = txt2.substr(0,2) + txt3;
						rslt0 = "★★ "; rslt = texstr.substr(0,2) + hncd.substr(j,1);
						subj = hcj.substr(l,1) + hncd.substr(j,1); 
						temp = ca12_jhabch.filter(isFind); 
						rslt_hyng = rslt_hyng1 + rslt_hyng2 + rslt_hyng3 + rslt_hyng4;

						if (subj == "충충" || subj == "충형"){
							rslt0 += subj + "(" + rslt + ") => "; 
							rslt = rslt_chng;
						}else{
							if (subj == "형충" || subj == "형형"){
								rslt0 += subj + "(" + rslt + ") => ";
								rslt = rslt_hyng; 
							}else{
								rslt0 += subj + "=> ";
							};
						};
						rslt0 += temp[0][1] + "... " + rslt;
						if (temp[0][2] == "7"){
							suspend("output3");
						}else{
							if (smry.includes(rslt)){
								continue;
							}else{
								if (rslt.substr(0,1) == rslt.substr(1,1)){rslt += "자형"; smry += rslt;}else{smry += rslt;};
								if (temp[0][2] == "1"){djhab("output3");};  //--- 합
								if (temp[0][2] == "2"){djchng("output3");};  //--- 충
								if (temp[0][2] == "3"){
									if (m == 2){djhae(sj_mj,hnj,2,"output3");};
									if (m == 3){djhae(sj_dj,hnj,0,"output3");};
									if (m == 4){djhae(sj_tj,hnj,3,"output3");};};  //--- 해
								if (temp[0][2] == "4"){  //--- 파
									if (m == 2){djpa(sj_mj,hnj,"output3");};
									if (m == 3){djpa(sj_dj,hnj,"output3");};
									if (m == 4){djpa(sj_tj,hnj,"output3");};};
								if (temp[0][2] == "5"){
									johga_chk(2,m,n); if (rslt.length == 2){posd = pos; chkg(rslt.substr(0,1), rslt.substr(1,1)); rslt += "형"; johha_chk(2,"output3");};
									johgb_chk(2,m,n); if (rslt.length == 2){posd = pos; chkg(rslt.substr(0,1), rslt.substr(1,1)); rslt += "형"; johhb_chk(2,"output3");};
									johgc_chk(2,m,n); if (rslt.length > 1){posd = pos; rslt = "子卯형"; johhc_chk(2,"output3");};
									johgd_chk(2,m,n); if (rslt.length > 1){posd = pos; johhd_chk(2,"output3");};};  //--- 형
								if (temp[0][2] == "8"){rslt0 = hcj.substr(l,1) + "+해=> 흉화--- "; rslt = texstr.substr(0,2) + hncd.substr(j,1); hwunghwa(sj_dj,hnj,"output3");};  //--- 해 흉화
							};
						};
					};
				};
			};
		}else{
			if (m == 3){
				for (j=0; j<hncd.length; j++){  //--- 행운 코드마다 실행
						if (n == 6){txt2 = "대운"; txt3 = "(암시) "; hnj = hn_lj; 
							if (hcj.includes(hncd.substr(j,1)) == false){hcj += hncd.substr(j,1);};}; 
						if (n == 7){txt2 = hv10a; hnj = hn_yj;
							if (hcj.includes(hncd.substr(j,1))){txt3 = "(실행) ";
							}else{	txt3 = "(암시) "; hcj += hncd.substr(j,1);};}; 
						if (n == 8){txt2 = hv10b; hnj = hn_mj;
							if (hcj.includes(hncd.substr(j,1))){txt3 = "(실행) ";
							}else{	txt3 = "(암시) "; hcj += hncd.substr(j,1);};}; 
						if (n == 9){txt2 = hv10c; hnj = hn_dj;
							if (hcj.includes(hncd.substr(j,1))){txt3 = "(실행) ";
							}else{	txt3 = "(암시) "; hcj += hncd.substr(j,1);};}; 
						txt = txt2.substr(0,2) + txt3;
					rslt0 = "★★ "; 
					subj = "-" + hncd.substr(j,1);
					rslt0 += subj + "=> 행운";
					temp = ca12_jhabch.filter(isFind); 
					rslt0 += temp[0][1] + "... "; rslt = texstr.substr(0,2) + hncd.substr(j,1);
					if (smry.includes(rslt)){
						continue;
					}else{
						smry += rslt;
						if (temp[0][2] == "1"){djhab("output3");};  //--- 합
						if (temp[0][2] == "2"){djchng("output3");};  //--- 충
						if (temp[0][2] == "3"){djhae(sj_dj,hnj,0,"output3");};  //--- 해
						if (temp[0][2] == "4"){djpa(sj_dj,hnj,"output3");};  //--- 파
						if (temp[0][2] == "5"){
							johga_chk(2,m,n); if (rslt.length == 2){posd = pos; chkg(rslt.substr(0,1), rslt.substr(1,1)); rslt += "형"; johha_chk(2,"output3");};
							johgb_chk(2,m,n); if (rslt.length == 2){posd = pos; chkg(rslt.substr(0,1), rslt.substr(1,1)); rslt += "형"; johhb_chk(2,"output3");};
							johgc_chk(2,m,n); if (rslt.length > 1){posd = pos; rslt = "子卯형"; johhc_chk(2,"output3");};
							johgd_chk(2,m,n); if (rslt.length > 2){posd = pos; johhd_chk(2,"output3");};
						};  //--- 형
					};
				};
			};
		};
		resolve();
	});
};

//======= 행운 운세분석 ====== ■■■■■■■■ new version ■■■■■■■■
//--- hanal(e,a,b,c,d); ----- hanal(2,a,b,c,d);
function hanal(e,a,b,c,d){
	hv0 = ""; hv1 = ""; hv2 = ""; hv3 = ""; hv4 = ""; hv5 = ""; hv6 = ""; hv7 = ""; hv8 = ""; hv9 = ""; hv10 = ""; hs_titl = "";
	sibsng(sj_dg,a,b); hv1 = gs_titl; hv2 = js_titl;  //--- 일간기준 행운간지(시기 체)의 십성
	sibsng(c,"",d); hv4 = js_titl;  //--- 행운간지(실행 용)의 자체십성
	sibsng(sj_dg,"",sj_dj); hv5 = js_titl;  //--- 일주의 십성
	subj = hv5; hv0 = ca01_actss.filter(isFind);  //--- 일주의 실행분석 십성배열
	idx = ca01_actss[0].lastIndexOf(hv4);
	hv6 = hv0[0][idx];  //--- 실행 십성 (hv6)
	if (e == 1){
		if (ageY < ageL + 5){hv3 = hv1;}else{hv3 = hv2;};  //--- 시기 십성 (hv3)
	};
	if (e == 2){
		if ("寅卯辰巳午未".includes(d)){hv3 = hv1;}else{hv3 = hv2;};  //--- 시기 십성 (hv3)
	};
	if (e == 3){
		if (hunD < ca08_monthstart[ca08_monthstart.length-1][5]){
			refD = new Date(premon.format('yyyy-MM-dd HH:mm'));
			refD = new Date(refD.setDate(refD.getDate() + 15));
			if (hunD1 < refD){hv3 = hv1;}else{hv3 = hv2;};  //--- 시기 십성 (hv3)
		}else{
			subj = ca08_monthstart[ca08_monthstart.length-1][5].substr(0,4) + hunD.substr(4,3);
			temp = ca08_monthstart.filter(isFindx); refD = new Date(temp[0][5]);
			refD = new Date(refD.setDate(refD.getDate() + 15));
			if (hunD.substr(5,11) < refD.format('MM-dd HH:mm')){hv3 = hv1;}else{hv3 = hv2;};  //--- 시기 십성 (hv3)
		};
	};
	if (e == 4){
		if ("子丑寅卯辰巳".includes(d)){hv3 = hv1;}else{hv3 = hv2;};  //--- 시기 십성 (hv3)
	};

	subj = hv6; hv7 = ca02_actgdbad.filter(isFind);  //--- 실행분석 길흉배열
	idx = ca02_actgdbad[0].lastIndexOf(hv3);
	hv8 = ca02_actgdbad[1][idx];  //--- 실행 길흉 
	sibsTugsin(hv3); hv3 = hs_titl; sibsTugsin(hv6); hv6 = hs_titl;
 	for (i=0; i<ca03_hunresult.length; i++){
 		if (ca03_hunresult[i][0]==hv3 && ca03_hunresult[i][1]==hv6){ hv9 = ca03_hunresult[i][2];};
 	};
	subj = hv3; temp = ca03a_unse.filter(isFind);
	idx = temp[0].lastIndexOf(hv6); 
	if (idx == 1){hv10 = temp[0][2] + "발흥 길";}else{	hv10 = ca03a_unse[1][idx];};
};

let tmpdb = new Array; let prc_hb = ""; let prc_ch = "";
//======= 천간 행운합충극 =======
async function ganhn(){
	await ganhn0();
	tmpdb = $.map(ca10b_ghabch, function(element) {
		if (element[1] + element[2] + element[3] == code1){return [element]};
	});
	await dganhn();
};

//====== 천간(연간,월간,시간) 행운합
function ganhn0(){
	return new Promise(function (resolve, reject){
		for (i=1; i<5; i++){
			if (i == 3){continue;
			}else{sts = ""; hcg = ""; a = "";
				if (i == 1){sts = "연간"; hcg = hcg1; a = sj_yg;}; if (i == 2){sts = "월간"; hcg = hcg2; a = sj_mg;}; if (i == 4){sts = "시간"; hcg = hcg4; a = sj_tg;};
				for (j = 0; j < ca10a_ghabch.length; j++){
					if (ca10a_ghabch[j][0] == sts && ca10a_ghabch[j][1] == hcg && hcg == '-----'){
						for (k=6; k<10; k++){
							if (ganhc_nfo[i][k].includes("합")){
								document.getElementById("output3").innerText += "■ 천간행운(" + sts + "합)--- " + ganhc_nfo[0][k] + " " + ganhc_nfo[i][k] + " " + ca10a_ghabch[j][4] + "\n";   //--- 행운에 의한 천간합 체크
								if (ca10a_ghabch[j][5] == "0"){summing0(a,"output3");};  //--- 합화오행 육친십성 흉화(0) 
								document.getElementById("output3").innerText += "--------------------------------------------------------------\n";
							};
						};
					};
				};
			};
		};
		resolve();
	});
};

//====== 천간(일간) 행운합충극
function dganhn(){
	return new Promise(function (resolve, reject){
		let prac = ""; let prad = ""; 
		if (ganhc_nfo[3][4].includes("합") || ganhc_nfo[3][4].includes("충")){prac += ganhc_nfo[3][4].substr(2);};
		if (ganhc_nfo[3][5].includes("합") || ganhc_nfo[3][5].includes("충")){prac += ganhc_nfo[3][5].substr(2);};  //--- 원국 "합충"

		for (i=6; i<10; i++){
			if (i == 6){sts = "대운";}; if (i == 7){sts = "연운";}; if (i == 8){sts = "월운";}; if (i == 9){sts = "일운";};
			xtt = ganhc_nfo[3][i].substr(2);  //--- 행운 xtt = "합","충"
			
			if (i == 6){
				if (xtt == "합" || xtt == "충"){prac += xtt;};
				sts += "(암시)";
			}else{
				if (prac != "" && prac.includes(xtt)){
					sts += "(실행)";
				}else{
					prac += xtt;
					sts += "(암시)";
				};
			};
			
			//--- 일간 행운
			code2 = "";
			if (xtt != ""){
				if (prac.includes(xtt)){ 
					idx = ca10b_ghabch[0].indexOf(xtt)+1; 
					code2 = tmpdb[0][idx]; 
					result_out(code2, ganhc_nfo[3][i] + " " + tmpdb[0][idx-1], sts, "output3");  //--- 대운 일간합충 출력
				}else{
					prac += ganhc_nfo[3][i].substr(2);
				};
			};
			//--- 월간/시간 행운
			for (k=3; k<5; k++){l = 0; l = (k-2) * 2;
				code2 = ""; 	xtt = ganhc_nfo[l][i].substr(2,1); 
				if (xtt != ""){ 
					if (ganhc_nfo[3][k+1].substr(2,1) == "합" && ganhc_nfo[l][i].substr(2,1) == "합"){
						idx = ca10b_ghabch[0].indexOf("쟁")+1; code2 = tmpdb[0][idx]; 
						result_out(code2, "쟁 " + ganhc_nfo[l][i] + " " + tmpdb[0][idx-1], sts, "output3");  //--- 행운 일간 (합봉 용봉 성합 합화) 출력
					};
					if (ganhc_nfo[3][k+1].substr(2,1) == "합" && ganhc_nfo[l][i].substr(2,1) == "충"){
						idx = ca10b_ghabch[0].indexOf(xtt)+1; code2 = tmpdb[0][idx]; 
						result_out(code2, ganhc_nfo[l][i] + " " + tmpdb[0][idx-1], sts, "output3");  //--- 행운 일간 (합파 불합충) 출력
					};
					if (ganhc_nfo[3][k+1].substr(2,1) == "충" && (ganhc_nfo[l][i].substr(2,1) == "합" || ganhc_nfo[l][i].substr(2,1) == "극")){
						idx = ca10b_ghabch[0].indexOf(xtt)+1; code2 = tmpdb[0][idx]; 
						result_out(code2, ganhc_nfo[l][i] + " " + tmpdb[0][idx-1], sts, "output3");  //--- 행운 일간 (충거) 출력
					};
					if (ganhc_nfo[3][k+1].substr(2,1) == "충" && ganhc_nfo[l][i].substr(2,1) == "충"){
						idx = ca10b_ghabch[0].indexOf(xtt)+1; code2 = tmpdb[0][idx]; 
						result_out(code2, "쟁 " + ganhc_nfo[l][i] + " " + tmpdb[0][idx-1], sts, "output3");  //--- 행운 일간 (쟁충발) 출력
					};
				};
			};
		};
		resolve();
	});
};

//======= 십성 to 육신 변환 =======
function sibsTugsin(a){
	if (a == "비견" || a == "겁재"){	hs_titl = "비겁";
	}else{ if (a == "식신" || a == "상관"){	hs_titl = "식상";
		}else{ if (a == "편재" || a == "정재"){	hs_titl = "재성";
			}else{ if (a == "편관" || a == "정관"){	hs_titl = "관성";
				}else{ if (a == "편인" || a == "정인"){	hs_titl = "인성";	};};};};};
};

//■■■■■■■■■■■■■■■■■■■■
//======= 신살 description =======
let sinsaltxt = ""; let snsal = []; let sinsal_tlist = ""; let sinsalh_tlist = "";
function sinsal_out(csno, sinsaltxt, g, h, a, b){
	$("#"+csno).empty();
	snsal = sinsaltxt.split(" ");
	for (i=0; i<snsal.length; i++){
		if (snsal[i] != ""){
			subj = snsal[i]; temps1 = sinsal_gen.filter(isFindx); sinsal_nfo[g][h] += subj + " ";
			document.getElementById(csno).innerText += "◐ " + temps1[0][0] + "..... " ;
			if (temps1[0][1] != ""){document.getElementById(csno).innerText += temps1[0][1] + "\n";};
			if (temps1[0][4] != ""){document.getElementById(csno).innerText += temps1[0][4] + "\n";};
			if (temps1[0][2] != "" && gendr.substr(0,1) == "남"){document.getElementById(csno).innerText += temps1[0][2] + "\n";};
			if (temps1[0][3] != "" && gendr.substr(0,1) == "여"){document.getElementById(csno).innerText += temps1[0][3] + "\n\n";};
			if (subj=="원진"){wonjin(csno, g, h, a, b);}; if (subj=="귀문"){guimun(csno, g, h, a, b);}; 
		};
	};
};

//============ 원진 추가 =============
function wonjin(dest, g, h, a, b){
	chkg(a,b); subj = rslt; temp = wonjn.filter(isFind); 
	document.getElementById(dest).innerText += "\n♠ (" + subj + ")---" + temp[0][1];
	sibsng(sj_dg,"",a); sibsTugsin(js_titl); subj = hs_titl; temp1 = wonjn.filter(isFind);
	document.getElementById(dest).innerText += "\n♠ (" + subj + ")---" + temp1[0][1];
	sibsng(sj_dg,"",b); sibsTugsin(js_titl); subj = hs_titl; temp2 = wonjn.filter(isFind);
	document.getElementById(dest).innerText += "\n♠ (" + subj + ")---" + temp2[0][1];
	if (g==5){subj="연지"}; if (g==6){subj="월지"}; if (g==7){subj="일지"}; if (g==8){subj="시지"}; temp3 = wonjn.filter(isFind);
	document.getElementById(dest).innerText += "\n♠ (" + subj + ")---" + temp3[0][1];
	if (h==2){subj="연지"}; if (h==3){subj="월지"}; if (h==4){subj="일지"}; if (h==5){subj="시지"}; if (h>5){subj="행운"}; temp4 = wonjn.filter(isFind);
	document.getElementById(dest).innerText += "\n♠ (" + subj + ")---" + temp4[0][1];
};

//============ 귀문 추가 =============
function guimun(dest, g, h, a, b){
	chkg(a,b); subj = rslt; temp = gmun.filter(isFind); 
	document.getElementById(dest).innerText += "\n♠ (" + subj + ")---" + temp[0][1];
	sibsng(sj_dg,"",a); sibsTugsin(js_titl); aTus = hs_titl;
	sibsng(sj_dg,"",b); sibsTugsin(js_titl); bTus = hs_titl;
	if ((gendr == "남양" && (aTus=="재성" || bTus=="재성")) || (gendr == "여음" && (aTus=="관성" || bTus=="관성"))){
		document.getElementById(dest).innerText += "\n♠ (" + gendr.substr(0,1) + ") " + hs_titl + "--- 배우자의 정신 횡포가 심함";
		if (g==7 && h==5){
			document.getElementById(dest).innerText += "\n♠ 일지-시지 & (" + gendr.substr(0,1) + ") " + hs_titl + " 귀문--- 배우자가 변태적 성향이 있으며 배우자가 성불감증인 경우가 많음";
		};
	};
	if (h>5){
		sibsTugsin(hgj_nfo[h-5][7]); 
		if (hs_titl=="관성" && gendr=="여음"){
			document.getElementById(dest).innerText += "\n♠ (" + gendr.substr(0,1) + ") " + hs_titl + "행운 귀문관살이 되면--- 부부별리";
		};
	};
};

//======= 신살 체크00 =======
	let csno = ""; let cssn = 1;
function sinsal00(a,b,c,f,d,e,g,h){ //=== a: base, b: target, c: list, f: classcode, d: destin, e: destin2, g: base, h: target
	return new Promise(function (resolve, reject){
		//========== 배열 영역 (frames) ======================
		let sslist = $.map(c, function(element, index) {
			if (element[13] == f) {
				return [element]
			};
		});
		subj = a; temp = sslist.filter(isFind); sinsaltxt = "";
		idx = c[0].lastIndexOf(b); sinsaltxt = temp[0][idx];
		if (sinsaltxt != ""){
			sinsal_tlist += sinsaltxt + " ";
			apnd1("css_a", "spcs ", sinsaltxt, d);    
			$(d).append("________ " + a + "___ " + b + "________ " + f + "</br>");
			apnd2(csno, "txca", sinsaltxt, d, g, h, a, b); 
			document.getElementById(e).innerText += sinsaltxt + "\n";  //----- 화면 신살란 기록
		};
		resolve();
	});
};

//======= 신살 체크02 ======= (태극귀인)
function sinsal02(a,b,c,f,d,e,g,h){ //=== a: base, b: target, c: list, f: classcode, d: destin, e: destin2, g: base, h: target
	return new Promise(function (resolve, reject){
		//========== 배열 영역 (frames) ======================
		let sslist = $.map(c, function(element, index) {
			if (element[13] == f) {
				return [element]
			};
		});
		subj = a; temp = sslist.filter(isFind); sinsaltxt = "";
		idx = c[0].lastIndexOf(b); sinsaltxt = temp[0][idx];
		idx = c[0].lastIndexOf(sj_dj); bastxt = temp[0][idx];
		if (sinsaltxt != "" && bastxt == sinsaltxt){
			sinsal_tlist += sinsaltxt + " ";
			apnd1("css_a", "spcs ", sinsaltxt, d);    
			$(d).append("________ " + a + "___ " + b + "________ " + f + "</br>");
			apnd2(csno, "txca", sinsaltxt, d, g, h, a, b); 
			document.getElementById(e).innerText += sinsaltxt + "\n";  //----- 화면 신살란 기록
		};
		resolve();
	});
};

//-----------------------------------
function apnd1(css, cla, sin, d){  //--- css: prefix, cla: span_class, sin: sinsaltxt, d: destin
	csno = css + cssn;
	$(d).append("■ ");
	$(d).append(
		$('<span>').prop({
			className: cla + csno,
			innerHTML: sin
		})
	);
};

//-----------------------------------
function apnd2(idn, clb, sin, d, g, h, a, b){  //--- idn: csno, clb: div_class, sin: sinsaltxt, d: destin, g: base, h: target
	$(d).append(
		$('<div>').prop({
			id: idn,
			innerHTML: 'description.....',
			className: clb
		})
	);
	sinsal_out(idn, sin, g, h, a, b);
	$(d).append("--------------------------------------------------------------</br>");
	cssn += 1;
};

//======= 신살 조회 =======
async function sinsal(){
	$('#outputa').empty();
	$('#outputa').append("■■  (원국) 신살 _____ </br></br>"); sinsal_tlist = ""; cssn = 1; 
	await sinsal02(sj_dg,sj_yj,sinsal_list1,"da00_dg_ydj","#outputa","ssal1",3,2); //--- 신살 체크0
	await sinsal00(sj_dg,sj_dj,sinsal_list1,"da01_dg_dtj","#outputa","ssal3",3,4); //--- 신살 체크1
	if (sjtx != "x"){await sinsal00(sj_dg,sj_tj,sinsal_list1,"da01_dg_dtj","#outputa","ssal4",3,5);}; //--- 신살 체크1
	await sinsal00(sj_dg,sj_yj,sinsal_list1,"da02_dg_jj","#outputa","ssal1",3,2); //--- 신살 체크2
	await sinsal00(sj_dg,sj_mj,sinsal_list1,"da02_dg_jj","#outputa","ssal2",3,3); //--- 신살 체크2
	await sinsal00(sj_dg,sj_dj,sinsal_list1,"da02_dg_jj","#outputa","ssal3",3,4); //--- 신살 체크2
	if (sjtx != "x"){await sinsal00(sj_dg,sj_tj,sinsal_list1,"da02_dg_jj","#outputa","ssal4",3,5);}; //--- 신살 체크2
	await sinsal00(sj_dg,sj_yj,sinsal_list1,"da03_dg_jj-dg_hlyj","#outputa","ssal1",3,2); //--- 신살 체크3
	await sinsal00(sj_dg,sj_mj,sinsal_list1,"da03_dg_jj-dg_hlyj","#outputa","ssal2",3,3); //--- 신살 체크3
	await sinsal00(sj_dg,sj_dj,sinsal_list1,"da03_dg_jj-dg_hlyj","#outputa","ssal3",3,4); //--- 신살 체크3
	if (sjtx != "x"){await sinsal00(sj_dg,sj_tj,sinsal_list1,"da03_dg_jj-dg_hlyj","#outputa","ssal4",3,5);}; //--- 신살 체크3
	await sinsal00(sj_dg,sj_mj,sinsal_list1,"da04_dg_mdtj","#outputa","ssal2",3,3); //--- 신살 체크4
	await sinsal00(sj_dg,sj_dj,sinsal_list1,"da04_dg_mdtj","#outputa","ssal3",3,4); //--- 신살 체크4
	if (sjtx != "x"){await sinsal00(sj_dg,sj_tj,sinsal_list1,"da04_dg_mdtj","#outputa","ssal4",3,5);}; //--- 신살 체크4
	if (sjtx != "x"){await sinsal00(sj_dg,sj_tj,sinsal_list1,"da05_dg_tj-dg_hj","#outputa","ssal4",3,5);}; //--- 신살 체크5
	await sinsal00(sj_dg,sj_dj,sinsal_list1,"da06_gj_dgj","#outputa","ssal3",3,4); //--- 신살 체크6
	await sinsal00(sj_dg,sj_dj,sinsal_list1,"da07_gj_dgj-dg_hj","#outputa","ssal3",3,4); //--- 신살 체크7
	await sinsal00(sj_dg,sj_dj,sinsal_list1,"da08_gj_dgj-hgj","#outputa","ssal3",3,4); //--- 신살 체크8
	await sinsal00(sj_dg,sj_dj,sinsal_list1,"da09_gj_dgj-ymtgj","#outputa","ssal3",3,4); //--- 신살 체크9
	if (sinsaltxt != ""){
		await sinsal00(sj_yg,sj_yj,sinsal_list1,"da09_gj_dgj-ymtgj","#outputa","ssal1",1,2); //--- 신살 체크9
		await sinsal00(sj_mg,sj_mj,sinsal_list1,"da09_gj_dgj-ymtgj","#outputa","ssal2",2,3); //--- 신살 체크9
		if (sjtx != "x"){await sinsal00(sj_tg,sj_tj,sinsal_list1,"da09_gj_dgj-ymtgj","#outputa","ssal4",4,5);}; //--- 신살 체크9
	};
	await sinsal00(sj_dg,sj_dj,sinsal_list1,"da10_gj_dtgj","#outputa","ssal3",3,4); //--- 신살 체크10
	if (sjtx != "x"){await sinsal00(sj_tg,sj_tj,sinsal_list1,"da10_gj_dtgj","#outputa","ssal4",4,5);}; //--- 신살 체크10
	await sinsal00(sj_dg,sj_dj,sinsal_list1,"da11_gj_gj","#outputa","ssal3",3,4); //--- 신살 체크11
	await sinsal00(sj_yg,sj_yj,sinsal_list1,"da11_gj_gj","#outputa","ssal1",1,2); //--- 신살 체크11
	await sinsal00(sj_mg,sj_mj,sinsal_list1,"da11_gj_gj","#outputa","ssal2",2,3); //--- 신살 체크11
	if (sjtx != "x"){await sinsal00(sj_tg,sj_tj,sinsal_list1,"da11_gj_gj","#outputa","ssal4",4,5);}; //--- 신살 체크11
	await sinsal00(sj_dg,sj_dj,sinsal_list1,"da12_gj_gj-hgj","#outputa","ssal3",3,4); //--- 신살 체크12
	await sinsal00(sj_yg,sj_yj,sinsal_list1,"da12_gj_gj-hgj","#outputa","ssal1",1,2); //--- 신살 체크12
	await sinsal00(sj_mg,sj_mj,sinsal_list1,"da12_gj_gj-hgj","#outputa","ssal2",2,3); //--- 신살 체크12
	if (sjtx != "x"){await sinsal00(sj_tg,sj_tj,sinsal_list1,"da12_gj_gj-hgj","#outputa","ssal4",4,5);}; //--- 신살 체크12
	//------------------------------
	await sinsal00(sj_dj,sj_yj,sinsal_list1,"db01_dj_jj-dj_hj","#outputa","ssal1",7,2); //--- 신살 체크1
	await sinsal00(sj_dj,sj_mj,sinsal_list1,"db01_dj_jj-dj_hj","#outputa","ssal2",7,3); //--- 신살 체크1
	await sinsal00(sj_dj,sj_dj,sinsal_list1,"db01_dj_jj-dj_hj","#outputa","ssal3",7,4); //--- 신살 체크1
	if (sjtx != "x"){await sinsal00(sj_dj,sj_tj,sinsal_list1,"db01_dj_jj-dj_hj","#outputa","ssal4",7,5);}; //--- 신살 체크1
	await sinsal00(sj_dj,sj_mj,sinsal_list1,"db02_dj_mtj-dj_hj","#outputa","ssal2",7,3); //--- 신살 체크2
	if (sjtx != "x"){await sinsal00(sj_dj,sj_tj,sinsal_list1,"db02_dj_mtj-dj_hj","#outputa","ssal4",7,5);}; //--- 신살 체크2
	await sinsal00(sj_dj,sj_yj,sinsal_list1,"db03_dj_ymtj","#outputa","ssal1",7,2); //--- 신살 체크3
	await sinsal00(sj_dj,sj_mj,sinsal_list1,"db03_dj_ymtj","#outputa","ssal2",7,3); //--- 신살 체크3
	if (sjtx != "x"){await sinsal00(sj_dj,sj_tj,sinsal_list1,"db03_dj_ymtj","#outputa","ssal4",7,5);}; //--- 신살 체크3
	await sinsal00(sj_dj,sj_yj,sinsal_list1,"db04_dj_ymtj-dj_hj","#outputa","ssal1",7,2); //--- 신살 체크4
	await sinsal00(sj_dj,sj_mj,sinsal_list1,"db04_dj_ymtj-dj_hj","#outputa","ssal2",7,3); //--- 신살 체크4
	if (sjtx != "x"){await sinsal00(sj_dj,sj_tj,sinsal_list1,"db04_dj_ymtj-dj_hj","#outputa","ssal4",7,5);}; //--- 신살 체크4
	await sinsal00(sj_dj,sj_yj,sinsal_list1,"db05_dj_ymtj-dj_hyj","#outputa","ssal1",7,2); //--- 신살 체크5
	await sinsal00(sj_dj,sj_mj,sinsal_list1,"db05_dj_ymtj-dj_hyj","#outputa","ssal2",7,3); //--- 신살 체크5
	if (sjtx != "x"){await sinsal00(sj_dj,sj_tj,sinsal_list1,"db05_dj_ymtj-dj_hyj","#outputa","ssal4",7,5);}; //--- 신살 체크5
	await sinsal00(sj_mj,sj_dj,sinsal_list1,"db06_mj_dtj","#outputa","ssal3",6,4); //--- 신살 체크6
	if (sjtx != "x"){await sinsal00(sj_mj,sj_tj,sinsal_list1,"db06_mj_dtj","#outputa","ssal4",6,5);}; //--- 신살 체크6
	await sinsal00(sj_mj,sj_yj,sinsal_list1,"db07_mj_ydtj","#outputa","ssal1",6,2); //--- 신살 체크7
	await sinsal00(sj_mj,sj_dj,sinsal_list1,"db07_mj_ydtj","#outputa","ssal3",6,4); //--- 신살 체크7
	if (sjtx != "x"){await sinsal00(sj_mj,sj_tj,sinsal_list1,"db07_mj_ydtj","#outputa","ssal4",6,5);}; //--- 신살 체크7
	await sinsal00(sj_mj,sj_yj,sinsal_list1,"db08_mj_ydtj-mj_hyj","#outputa","ssal1",6,2); //--- 신살 체크8
	await sinsal00(sj_mj,sj_dj,sinsal_list1,"db08_mj_ydtj-mj_hyj","#outputa","ssal3",6,4); //--- 신살 체크8
	if (sjtx != "x"){await sinsal00(sj_mj,sj_tj,sinsal_list1,"db08_mj_ydtj-mj_hyj","#outputa","ssal4",6,5);}; //--- 신살 체크8
	//------------------------------
	await sinsal00(sj_mj,sj_yg,sinsal_list2,"dc01_mj_gg","#outputa","ssal1",1,3); //--- 신살 체크1
	await sinsal00(sj_mj,sj_mg,sinsal_list2,"dc01_mj_gg","#outputa","ssal2",2,2); //--- 신살 체크1
	await sinsal00(sj_mj,sj_dg,sinsal_list2,"dc01_mj_gg","#outputa","ssal3",4,2); //--- 신살 체크1
	if (sjtx != "x"){await sinsal00(sj_mj,sj_tg,sinsal_list2,"dc01_mj_gg","#outputa","ssal4",4,3);}; //--- 신살 체크1
	await hyuncm(1,10); //--- 현침
	await pngdu(2,10); //--- 평두
	await chnrjm(3,10); //--- 천라지망
	await chsagm(4,10); //--- 철쇄개금
	await chmnsg(5,10); //--- 천문성
	await bogeum(6,10); //--- 복음
	await baneum(7,10); //--- 반음
	$('#outputa').on("click", "span", function(){ 
		disp("#"+$(this).attr("class").substr(5),"",""); 
	}); 
};

//======== 평두 (신살) 체크 =========
let cntpd = 0; let cntpda = 0;
function pngdu(g, h){
	return new Promise(function (resolve, reject){
		resul = []; cntpd = 0; 
		resul = sj_ganji.match(/甲/g); if(resul != null) {cntpd += resul.length;};
		resul = sj_ganji.match(/丙/g); if(resul != null) {cntpd += resul.length;};
		resul = sj_ganji.match(/丁/g); if(resul != null) {cntpd += resul.length;};
		resul = sj_ganji.match(/壬/g); if(resul != null) {cntpd += resul.length;};
		resul = sj_ganji.match(/子/g); if(resul != null) {cntpd += resul.length;};
		resul = sj_ganji.match(/辰/g); if(resul != null) {cntpd += resul.length;};
		if (cntpd==3){cntpda = cntpd;};
		if (cntpd>3){
			sinsaltxt = "평두"; 
			sinsal_tlist += sinsaltxt + " ";
			apnd1("css_a", "spcs ", sinsaltxt, "#outputa");    
			$("#outputa").append("________ 甲丙丁壬 子辰 ________ </br>");
			apnd2(csno, "txca", sinsaltxt, "#outputa", g, h); 
			document.getElementById("ssal0").innerText += sinsaltxt + "\n";  //----- 화면 신살란 기록
		};
		resolve();
	});
};

//======== 평두 (신살) 행운체크 =========
function pngduh(g, h){
	return new Promise(function (resolve, reject){
		cntpd = 0;
		if (cntpda==3){
			resul = []; cntpd = cntpda;
			resul = hn_ganji.match(/甲/g); if(resul != null) {cntpd += resul.length;};
			resul = hn_ganji.match(/丙/g); if(resul != null) {cntpd += resul.length;};
			resul = hn_ganji.match(/丁/g); if(resul != null) {cntpd += resul.length;};
			resul = hn_ganji.match(/壬/g); if(resul != null) {cntpd += resul.length;};
			resul = hn_ganji.match(/子/g); if(resul != null) {cntpd += resul.length;};
			resul = hn_ganji.match(/辰/g); if(resul != null) {cntpd += resul.length;};
		};
		if (cntpd>3){
			sinsaltxt1 = "평두"; 
			sinsalh_tlist += sinsaltxt1 + " ";
			apnd01("css_c", "spct ", sinsaltxt1, "#outputb");    
			$("#outputb").append("________ 甲丙丁壬 子辰 ________ </br>");
			apnd02(csno1, "txcc", sinsaltxt1, "#outputb", g, h); 
			document.getElementById("ssalb").innerText += sinsaltxt1 + "\n";  //----- 화면 신살란 기록
		};
		resolve();
	});
};	

//======== 현침 (신살) 체크 =========
function hyuncm(g, h){
	return new Promise(function (resolve, reject){
		resul = []; cntpd = 0; 
		resul = sj_ganji.match(/甲/g); if(resul != null) {cntpd += resul.length;};
		resul = sj_ganji.match(/辛/g); if(resul != null) {cntpd += resul.length;};
		resul = sj_ganji.match(/卯/g); if(resul != null) {cntpd += resul.length;};
		resul = sj_ganji.match(/午/g); if(resul != null) {cntpd += resul.length;};
		resul = sj_ganji.match(/未/g); if(resul != null) {cntpd += resul.length;};
		resul = sj_ganji.match(/申/g); if(resul != null) {cntpd += resul.length;};
		if (cntpd>1){
			sinsaltxt = "현침"; 
			sinsal_tlist += sinsaltxt + " ";
			apnd1("css_a", "spcs ", sinsaltxt, "#outputa");    
			$("#outputa").append("________ 甲辛 卯午未申 ________ </br>");
			apnd2(csno, "txca", sinsaltxt, "#outputa", g, h); 
			document.getElementById("ssal0").innerText += sinsaltxt + "\n";  //----- 화면 신살란 기록
		};
		resolve();
	});
};

//======== 천라지망 (신살) 체크 =========
function chnrjm(g, h){
	return new Promise(function (resolve, reject){
		resul = []; cntpd = 0; 
		if ("戌亥辰巳".includes(sj_dj)){	
			resul = sj_ji.match(/戌/g); if(resul != null) {cntpd += resul.length;};
			resul = sj_ji.match(/亥/g); if(resul != null) {cntpd += resul.length;};
			resul = sj_ji.match(/辰/g); if(resul != null) {cntpd += resul.length;};
			resul = sj_ji.match(/巳/g); if(resul != null) {cntpd += resul.length;};
		};
		if (cntpd>1){
			sinsaltxt = "천라지망"; 
			sinsal_tlist += sinsaltxt + " ";
			apnd1("css_a", "spcs ", sinsaltxt, "#outputa");    
			$("#outputa").append("________ 戌亥辰巳 ________ </br>");
			apnd2(csno, "txca", sinsaltxt, "#outputa", g, h); 
			document.getElementById("ssal0").innerText += sinsaltxt + "\n";  //----- 화면 신살란 기록
		};
		resolve();
	});
};

//======== 천라지망 (신살) 행운체크 =========
function chnrjmh(g, h){
	return new Promise(function (resolve, reject){
		resul = []; cntpd = 0; 
		if ("戌亥辰巳".includes(sj_dj)){	
			resul = hn_ganji.match(/戌/g); if(resul != null) {cntpd += resul.length;};
			resul = hn_ganji.match(/亥/g); if(resul != null) {cntpd += resul.length;};
			resul = hn_ganji.match(/辰/g); if(resul != null) {cntpd += resul.length;};
			resul = hn_ganji.match(/巳/g); if(resul != null) {cntpd += resul.length;};
		}
		if (cntpd>0){
			sinsaltxt1 = "천라지망"; 
			sinsalh_tlist += sinsaltxt1 + " ";
			apnd01("css_c", "spct ", sinsaltxt1, "#outputb");    
			$("#outputb").append("________ 戌亥辰巳 ________ </br>");
			apnd02(csno1, "txcc", sinsaltxt1, "#outputb", g, h); 
			document.getElementById("ssalb").innerText += sinsaltxt1 + "\n";  //----- 화면 신살란 기록
		};
		resolve();
	});
};

//======== 철쇄개금 (신살) 체크 =========
function chsagm(g, h){
	return new Promise(function (resolve, reject){
		resul = []; cntpd = 0; 
		if ("卯酉戌".includes(sj_dj)){	
			resul = sj_ji.match(/卯/g); if(resul != null) {cntpd += resul.length;};
			resul = sj_ji.match(/酉/g); if(resul != null) {cntpd += resul.length;};
			resul = sj_ji.match(/戌/g); if(resul != null) {cntpd += resul.length;};
		};
		if (cntpd>1){
			sinsaltxt = "철쇄개금"; 
			sinsal_tlist += sinsaltxt + " ";
			apnd1("css_a", "spcs ", sinsaltxt, "#outputa");    
			$("#outputa").append("________ 卯酉戌 ________ </br>");
			apnd2(csno, "txca", sinsaltxt, "#outputa", g, h); 
			document.getElementById("ssal0").innerText += sinsaltxt + "\n";  //----- 화면 신살란 기록
		};
		resolve();
	});
};

//======== 천문성(天門星) (신살) 체크 =========
function chmnsg(g, h){
	return new Promise(function (resolve, reject){
		resul = []; cntpd = 0; 
		resul = sj_ji.match(/未/g); if(resul != null) {cntpd += resul.length;};
		resul = sj_ji.match(/戌/g); if(resul != null) {cntpd += resul.length;};
		resul = sj_ji.match(/卯/g); if(resul != null) {cntpd += resul.length;};
		resul = sj_ji.match(/亥/g); if(resul != null) {cntpd += resul.length;};
		resul = sj_ji.match(/寅/g); if(resul != null) {cntpd += resul.length;};
		resul = sj_ji.match(/酉/g); if(resul != null) {cntpd += resul.length;};
		if (cntpd>1 || sj_ji.includes("亥")){
			sinsaltxt = "천문성"; 
			sinsal_tlist += sinsaltxt + " ";
			apnd1("css_a", "spcs ", sinsaltxt, "#outputa");    
			$("#outputa").append("________ 未戌卯亥寅酉 ________ </br>");
			apnd2(csno, "txca", sinsaltxt, "#outputa", g, h); 
			document.getElementById("ssal0").innerText += sinsaltxt + "\n";  //----- 화면 신살란 기록
		};
		resolve();
	});
};

//======== 복음 (신살) 체크 =========
function bogeum(g, h){
	return new Promise(function (resolve, reject){
		sj_ymtgj = sj_ganji.substr(0,4) + sj_ganji.substr(6)
		if (sj_ymtgj.includes(sj_dg+sj_dj)){
			sinsaltxt = "복음"; 
			sinsal_tlist += sinsaltxt + " ";
			apnd1("css_a", "spcs ", sinsaltxt, "#outputa");    
			$("#outputa").append("________ 일주간지 원국중첩 ________ </br>");
			apnd2(csno, "txca", sinsaltxt, "#outputa", g, h); 
			document.getElementById("ssal0").innerText += sinsaltxt + "\n";  //----- 화면 신살란 기록
		};
		resolve();
	});
};

//======== 복음 (신살) 행운체크 =========
function bogeumh(g, h){
	return new Promise(function (resolve, reject){
		if (hn_ganji.includes(sj_dg+sj_dj)){
			sinsaltxt1 = "복음"; dest = "";
			sinsalh_tlist += sinsaltxt1 + " ";
			apnd01("css_c", "spct ", sinsaltxt1, "#outputb");    
			$("#outputb").append("________ 일주간지 행운중첩 ________ </br>");
			apnd02(csno1, "txcc", sinsaltxt1, "#outputb", g, h); 
			if (hn_lg+hn_lj == sj_dg+sj_dj){dest="hunL3"}; if (hn_yg+hn_yj == sj_dg+sj_dj){dest="hunY3"}; 
			if (hn_mg+hn_mj == sj_dg+sj_dj){dest="hunM3"}; if (hn_dg+hn_dj == sj_dg+sj_dj){dest="hunD3"}; 
			document.getElementById(dest).innerText += sinsaltxt1 + "\n";  //----- 화면 신살란 기록
		};
		resolve();
	});
};

//======== 반음(천충지충) (신살) 체크 =========
function baneum(g, h){
	return new Promise(function (resolve, reject){
		if ((ganhc_nfo[2][4].includes("충") && jjhc_nfo[2][4].includes("충")) || (ganhc_nfo[4][5].includes("충") && jjhc_nfo[4][3].includes("충"))){
			sinsaltxt = "반음"; 
			sinsal_tlist += sinsaltxt + " ";
			apnd1("css_a", "spcs ", sinsaltxt, "#outputa");    
			$("#outputa").append("________ 일주 원국 천충지충 ________ </br>");
			apnd2(csno, "txca", sinsaltxt, "#outputa", g, h); 
			document.getElementById("ssal0").innerText += sinsaltxt + "\n";  //----- 화면 신살란 기록
		};
		resolve();
	});
};

//======== 반음(천충지충) (신살) 행운체크 =========
function baneumh(g, h){
	return new Promise(function (resolve, reject){
		for (m=6; m<10; m++){
			if (ganhc_nfo[3][m].includes("충") && jjhc_nfo[3][m].includes("충")){
				sinsaltxt1 = "반음"; dest = "";
				sinsalh_tlist += sinsaltxt1 + " ";
				apnd01("css_c", "spct ", sinsaltxt1, "#outputb");    
				$("#outputb").append("________ 일주 행운 천충지충 ________ </br>");
				apnd02(csno1, "txcc", sinsaltxt1, "#outputb", g, h); 
				if (m==6){dest="hunL3"}; if (m==7){dest="hunY3"}; if (m==8){dest="hunM3"}; if (m==9){dest="hunD3"}; 
				document.getElementById(dest).innerText += sinsaltxt1 + "\n";  //----- 화면 신살란 기록
			};
		};
		resolve();
	});
};


let gmun = [["귀문", "작용"],["辰亥", "집요. 잔소리. 표독. 복수. 기억력. 결벽증. 히스테리. 척병"],["酉子", "마마보이. 공주병. 의타심. 자유주의. 무절제. 무책임"],["未子", "마마보이. 공주병. 의타심. 자유주의. 무절제. 무책임"],["未寅", "무관심. 무표정. 나태. 무반응. 애늙은이. 애매모호"],["寅酉", "무관심. 무표정. 나태. 무반응. 애늙은이. 애매모호"],["丑午", "다혈질. 감정기복. 폭발적. 조급. 작파(作破). 분기탱천. 자학"],["申卯", "만심. 유아독족. 선민성. 상대무시. 자기주장. 과대망상"],["巳戌", "기만. 음흉. 사기. 이중성. 표리부동. 극단적 이기심"]];
let wonjn = [["원진", "특징"],["辰亥", "집요. 잔소리. 동어반복. 같은 행동. 육친 덕 박복"],["寅酉", "몰상식. 자만심. 무례. 하극상. 잔병치레"],["未子", "자식 덕 박복. 신병(身病). 사고수. 역마수"],["丑午", "고독. 강기. 폭발력. 다혈질. 자식 덕 박복. 험담험구. 불평"],["申卯", "표독. 두통. 잔병치레. 죄의식 없음. 몰상식"],["巳戌", "감정기복. 엉뚱함. 사기성. 암중모색. 아집. 고독"],["비겁", "육친 및 동료들과 소원하고 경거망동으로 다툼수"],["식상", "구덕의흠(口德의欠). 비밀 없고 잘난 체. 다변. 구설수"],["재성", "경망스럽고 개념 없이 행동. 손재 및 파산수"],["관성", "불명예스런 구설로 좌천 및 사표수. 관재구설수"],["인성", "순간폭발. 무식. 무례. 인덕 없음. 계약 및 약속 파기수"],["연지", "조부와 부모가 불화. 어려서 가족사랑 받지 못함. 질병: 편두통. 견통. 뇌출혈. 오십견. 인후병. 이비인후질병"],["월지", "월지와 일지의 원진살은 부모형제와 원망. 고부간의 불화. 질병: 흉부통증. 심장병. 위장병. 장기질환. 호흡기질환"],["일지", "전립선. 생식기질병. 산액. 성기능약화. 요실금"],["시지", "배우자 자식과 인연없고 박복. 질병: 골다공증. 하체부실. 하지정맥. 체력쇠약. 몸이 마름"],["행운", "행운에서 원진을 만나면 재물손괴 및 직업중단수가 있고. 사고대운이 원진이면 목숨이 위태로움에 처함"]];

</script>


    </body>
</html>
